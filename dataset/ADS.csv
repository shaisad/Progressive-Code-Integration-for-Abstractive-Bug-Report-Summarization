bug.id,bug_report,golden_summary
1,"""(223734) eclipse - incorrect deprecation comments in platform class"" Date: '2008-03-24 17:36:20' From: 'angel vera' according to the javadoc in platform.getresourcestring(bundle,string), this method has been deprecated and one should use the nls class or the bundlefinder.find() i was able to find the nls class but i didn ' t find the bundlefinder class is the javadoc correct if it is a hint on where to find the bundlefinder class would help the nls class doesn ' t seem to provide me with the same functionality that platform.getresourcestring does, so i am assuming that bundlefinder would do the job that i need please provide me with more information on where to find the bundlefinder and improve the javadoc. Date: '2008-03-25 09:57:01' From: 'oleg besedin' i don ' t think that replacement functionality was ever implemented pascal, you added bunch of comments like that to the platform ver. 1.92 as there are no current plans to act on them (and there has been no actions done in the last 2 years) i think we need to remove those comments - they make a rather confusing javadoc there are 21 "" xxx "" comments that should be removed from javadoc or acted upon. Date: '2008-03-25 09:59:06' From: 'oleg besedin' adding m7 as a milestone to remind to remove those comments. Date: '2008-03-25 11:55:35' From: 'angel vera' (in reply to comment #1) > i don ' t think that replacement functionality was ever implemented > > pascal, you added bunch of comments like that to the platform ver. 1.92 as > there are no current plans to act on them (and there has been no actions done > in the last 2 years) i think we need to remove those comments - they make a > rather confusing javadoc > > there are 21 "" xxx "" comments that should be removed from javadoc or acted upon > so are you saying that the support for using getresourcestring has just been droppped, and that no replacement will be available that concerns me because wtp has a code that uses this method, and i am sure that there is plenty of adopters that are currently using that function as well. Date: '2008-03-25 13:27:23' From: 'oleg besedin' the method platform.getresourcestring(bundle,string) is not deprecated at this time the comments should have been added to the implementation code or to a bug report, not to the javadoc of the platform class. Date: '2008-05-23 04:29:23' From: 'philippe mulet' please adjust the target milestone, so it does not point at a closed milestone in the past. Date: '2008-09-24 16:17:37' From: 'oleg besedin' from bug 247983 other tagged methods -getresourcebundle(bundle) -getresourcestring(bundle, string) -getresourcestring(bundle, string, resourcebundle) Date: '2008-09-24 16:18:04' From: 'oleg besedin' *** bug 247983 has been marked as a duplicate of this bug *** Date: '2008-09-24 16:42:07' From: 'oleg besedin' removed incorrect comments from the platform class. Date: '2008-09-24 16:49:49' From: 'john arthorne' we collided, i just made the same changes the only difference is that i moved the comments to internalplatform also i deprecated platform#endsplash since this has been replaced with iapplicationcontext#applicationrunning().","according to the javadoc in platform.getresourcestring(bundle,string), this method has been deprecated and one should use the nls class or the bundlefinder.find() i was able to find the nls class but i didn ' t find the bundlefinder class the nls class doesn ' t seem to provide me with the same functionality that platform.getresourcestring does, so i am assuming that bundlefinder would do the job that i need as there are no current plans to act on them (and there has been no actions done in the last 2 years) i think we need to remove those comments - they make a rather confusing javadoc there are 21 "" xxx "" comments that should be removed from javadoc or acted upon. that concerns me because wtp has a code that uses this method, and i am sure that there is plenty of adopters that are currently using that function as well. the comments should have been added to the implementation code or to a bug report, not to the javadoc of the platform class. removed incorrect comments from the platform class. also i deprecated platform#endsplash since this has been replaced with iapplicationcontext#applicationrunning()."
2,"""(346116) eclipse - Java files open when inspecting the code, instead of Class file"" Date: '2011-05-17 11:52:30' From: 'angel vera' created attachment 195885 testcase i found a regression from 342 to 362, similar to what bug# 297039 describes i made sure that i have the changes for bug# 297039 in my environment when i use 362 the scenario when i debug the code for my application i see that the java files is open instead of the class file and i can t inspect the content of the this variable i get an error saying unable to evaluate the selected expression... the setup i have two projects, javaprj (a java project) contains my code and it makes use of a class inside of jar the jar is located inside of simpleprj\lib (a simple project) the jar contains the source and the binary code javaprj makes a reference to the jar through the java build path -> libraries > add jars... button the run(using the attach testcase) - add a breakpoint to runme.java at the initutil method - debug the application - when the eclipse stops at the breakpoint step inside of u.putattributes - once inside try to inspect this Date: '2011-05-17 12:21:40' From: 'michael rennie' quickly tested this on 3.7 and it works as expected 1. import the test case and use the steps given 2. after stepping in, the source from the archive is shown [ok] 3. i can inspect this without issue [ok] i will load up my 3.6.2 test workspace and try there... Date: '2011-05-17 12:32:28' From: 'michael rennie' the same steps also work for me using version: 3.6.2 build id: m20110210-1200 angel, since the .java file source is available in the archive why are you expecting to see the .class file note: showing the class file or the java file from the archive does not affect the inspect action. Date: '2011-05-17 12:57:57' From: 'angel vera' when i tried inspecting this in the .java file it didn t worked for me i got the problem that i documented in the description i tried this on win32, i wouldn t expect that the platform makes a difference, but just in case looking through the code the problem seemed to be that in previous versions jdt org.eclipse.jdt.internal.launching.javasourcelookuputil.translate(iruntimeclasspathentry[]) would return a packagefragmentrootsourcecontainer because a root exists for that project, but in 362 a root doesn t exists so it creates a externalarchivesourcecontainer. Date: '2011-05-17 12:58:53' From: 'angel vera' i am using 362 m20110210-1200 Date: '2011-05-17 15:06:25' From: 'michael rennie' (in reply to comment #2) > the same steps also work for me using > > version: 3.6.2 > build id: m20110210-1200 > > angel, since the .java file source is available in the archive why are you > expecting to see the .class file note:showing the class file or the java file > from the archive does not affect the inspect action the critical missing step to reproduce is that you have to select this in the editor and try to inspect it. Date: '2011-05-17 16:20:46' From: 'michael rennie' debugging this i found that part of the fix for bug 297039 moved a call to runtimeclasspathentry#getpath() out of a double-nested for-loop and in doing so changed the path that would be compared was if (!root.isexternal() && root.getpath().equals(entry.getpath())) { ..} changed to if (root.isexternal() && root.getpath().equals(entrypath)) { ..} where entrypath is defined as path entrypath = new path(entry.getlocation()) i will have to change the definition of entrypath to be based on entry.getpath() and see if it affects the fix for bug 297039 Date: '2011-05-19 10:29:31' From: 'angel vera' (in reply to comment #6) > i will have to change the definition of entrypath to be based on > entry.getpath() and see if it affects the fix for bug 297039 michael, what is the status on this one did you get a chance to try out things? Date: '2011-05-19 10:47:47' From: 'michael rennie' (in reply to comment #7) > (in reply to comment #6) > > i will have to change the definition of entrypath to be based on > > entry.getpath() and see if it affects the fix for bug 297039 > > michael, > > what is the status on this one did you get a chance to try out things i did, i reverted the logic to compare the correct path elements and removed the check for if the class path entry is external or not, and it seems to be working - much more smoke testing is required and i want to add some junit tests for this scenario i ll post a patch Date: '2011-05-19 10:49:02' From: 'michael rennie' created attachment 196120 testing patch here is a patch of the code i have been playing with. Date: '2011-05-23 21:38:44' From: 'angel vera' i ran through my scenario and it seems to working ok, i am certainly concern about the risk of regression as per comment# 6 i will leave it up to you for your testing to confirm that this is the right fix and that it doesn t break other scenarios or that introduces regressions. Date: '2011-05-26 13:13:07' From: 'michael rennie' created attachment 196680 proposed fix here is a complete patch with new tests i am still on the fence about inclusion in rc3 / rc4 for fear of regression in another edge case, although smoke testing did not uncover any other issues. Date: '2011-05-26 13:15:06' From: 'michael rennie' created attachment 196682 test projects here are the test projects that must be un-zipped in the org.eclipse.jdt.debug.tests/testresources/ folder using these projects the new tests set up a scenario as described in this bug, and perform source look up, classpath entry translation and stepping / inspecting. Date: '2011-05-26 13:21:05' From: 'michael rennie' curtis, dani, markus, please review the patch Date: '2011-05-27 14:24:21' From: 'markus keller' code-wise, the proposed fix is really the same as the testing patch it looks good, and i verified that it works for internal and external jars, and that it doesn t break bug 297039 however, this problem has not been reported so far, although bug 297039 has been in since 3.5.2 angel, do you really think it s critical for 3.7, or could this wait till 3.7.1? Date: '2011-05-30 10:42:25' From: 'dani megert' the fix looks ok to me but i can t guarantee that there are no unwanted side effects given we re in rc4 and the bug is in since 3.5.2 i -1 this fix for 3.7 rc4. Date: '2011-05-30 10:45:23' From: 'michael rennie' (in reply to comment #15) > given we re in rc4 and the bug is in since 3.5.2 i -1 this fix for 3.7 > rc4 i m fine with that we can target it for 3.7.1. Date: '2011-05-30 16:59:07' From: 'curtis windatt' the fix works for me, but since we are moving this to 3.7.1 i will hold off on my +1. Date: '2011-06-29 09:50:09' From: 'michael rennie' applied patch + tests to head Date: '2011-06-29 10:36:37' From: 'michael rennie' created attachment 198834 patch for 3.7.1 Date: '2011-06-29 10:58:34' From: 'michael rennie' committed fix to 3.7.1","i found a regression from 342 to 362, similar to what bug# 297039 describes when i debug the code for my application i see that the java files is open instead of the class file and i can t inspect the content of the this variable 3. i can inspect this without issue [ok] angel, since the .java file source is available in the archive why are you expecting to see the .class file note: showing the class file or the java file from the archive does not affect the inspect action. i tried this on win32, i wouldn t expect that the platform makes a difference, but just in case looking through the code the problem seemed to be that in previous versions jdt org.eclipse.jdt.internal.launching.javasourcelookuputil.translate(iruntimeclasspathentry[]) would return a packagefragmentrootsourcecontainer because a root exists for that project, but in 362 a root doesn t exists so it creates a externalarchivesourcecontainer. i will have to change the definition of entrypath to be based on entry.getpath() and see if it affects the fix for bug 297039 i did, i reverted the logic to compare the correct path elements and removed the check for if the class path entry is external or not, and it seems to be working - much more smoke testing is required and i want to add some junit tests for this scenario i ran through my scenario and it seems to working ok, i am certainly concern about the risk of regression as per comment# 6 i will leave it up to you for your testing to confirm that this is the right fix and that it doesn t break other scenarios or that introduces regressions. however, this problem has not been reported so far, although bug 297039 has been in since 3.5.2 the fix looks ok to me but i can t guarantee that there are no unwanted side effects given we re in rc4 and the bug is in since 3.5.2 i -1 this fix for 3.7 rc4. created attachment 198834 patch for 3.7.1"
3,"""(201329) eclipse - [hotbug] runtime compatibility problem between wtp 1.5.x and 2.0.1"" Date: '2007-08-27 17:05:58' From: 'angel vera' build id: 2.0.1 steps to reproduce due to the changes in bug# 137825, projects created in wtp 1.5.x don ' t have a runtime facet attached when brought into wtp 2.0.1 in wtp 1.5.x, create a project and target it to a runtime created using the api this ' api created runtime ' is given a id and a name that are different if you import the project into wtp 2.0.1 the project will not be able to resolve the runtime, because they are now identified by their id, and not by their name as it was previously done more information Date: '2007-08-27 17:08:05' From: 'angel vera' marking this defect as a hotbug as it breaks compatibility support between 1.5 and 2.0.1 Date: '2007-08-27 17:16:53' From: 'angel vera' one idea to resolve this problem is to allow a callback to the bridge to return a different kind of id during the comparison in runtimebridgeimpl, in this way, we can support the new runtimes(id based) and the old runtimes(name based). Date: '2007-08-27 17:31:55' From: 'konstantin komissarchik' could you elaborate on what you are proposing this particular fallout was anticipated and not deemed important enough since we can ' t have it both ways, not sure what we can do any comment, tim? Date: '2007-08-27 17:56:52' From: 'angel vera' created an attachment (id=77077) proposed patch v1 how about something like this? Date: '2007-08-28 10:01:57' From: 'angel vera' created an attachment (id=77132) proposed patch v1.5 this is a better description of what i am proposing Date: '2007-08-28 10:42:29' From: 'angel vera' konstantine, tim and i talked about this defect and we wanted to get your input of the proposed changes is it possible to do something like in the runtimemanangerimpl what is the impact to the framework? Date: '2007-08-28 10:54:05' From: 'tim deboer' hi konstantin, i guess i didn ' t anticipate the fallout, or at least understand the migration problem as a result of the change in 2.0, if any server runtime uses an id that isn ' t identical to it ' s name, the project will fail migration after moving to wtp 2.0, the project will no longer be targeted to the runtime and users have to manually reset it while the manual workaround is fairly easy, fixing this regression should be too - all we have to do is allow for alternate facet runtime names under the covers, or check for a migrated name if the old one doesn ' t exist when reading the facets file the runtime bridge and/or stub both have the id from wtp 1.5 and can provide this information back to the facet framework this could be provided in whatever format makes the most sense for the facet framework, e.g. an alternate name for a runtime or a mapping from old to new names (or vice versa) angel has proposed a couple patches already, but since they touch the facet ' s framework we need your expertise on what the correct/minimal fix would be can you take a look at the proposed patches and/or suggest the best way to fix? Date: '2007-08-28 11:20:12' From: 'konstantin komissarchik' created an attachment (id=77141) proposed patch v2.0 this gives me an idea.. we already have an iruntime.getlocalizedname() api that makes the "" alternate name "" available also, rather than putting the backwards compatibility logic in the runtimemanagerimpl.getruntime() method, where it has wider scope than necessary, the logic can be placed in the code that reads the faceted project metadata file that should be fairly safe i created a patch that does this could you guys test it out with the scenario that breaks right now? Date: '2007-08-28 11:44:53' From: 'angel vera' i tested the patch and it works as expected thanks konstantine, would you be able to release it for this weeks ibuild? Date: '2007-08-28 14:39:25' From: 'konstantin komissarchik' released fix to the 2.0.1 and 3.0 streams.","due to the changes in bug# 137825, projects created in wtp 1.5.x don ' t have a runtime facet attached when brought into wtp 2.0.1 in wtp 1.5.x, create a project and target it to a runtime created using the api this ' api created runtime ' is given a id and a name that are different if you import the project into wtp 2.0.1 the project will not be able to resolve the runtime, because they are now identified by their id, and not by their name as it was previously done marking this defect as a hotbug as it breaks compatibility support between 1.5 and 2.0.1 one idea to resolve this problem is to allow a callback to the bridge to return a different kind of id during the comparison in runtimebridgeimpl, in this way, we can support the new runtimes(id based) and the old runtimes(name based). since we can ' t have it both ways, not sure what we can do as a result of the change in 2.0, if any server runtime uses an id that isn ' t identical to it ' s name, the project will fail migration after moving to wtp 2.0, the project will no longer be targeted to the runtime and users have to manually reset it while the manual workaround is fairly easy, fixing this regression should be too - all we have to do is allow for alternate facet runtime names under the covers, or check for a migrated name if the old one doesn ' t exist when reading the facets file the runtime bridge and/or stub both have the id from wtp 1.5 and can provide this information back to the facet framework we already have an iruntime.getlocalizedname() api that makes the "" alternate name "" available also, rather than putting the backwards compatibility logic in the runtimemanagerimpl.getruntime() method, where it has wider scope than necessary, the logic can be placed in the code that reads the faceted project metadata file that should be fairly safe released fix to the 2.0.1 and 3.0 streams."
4,"""(312336) eclipse - flatcomponentdeployable legacy calls creates modulefile without a workspace resources"" Date: '2010-05-10 16:59:36' From: 'angel vera' i noticed that in the members calls for flatcomponentdeployable.members there is a call that checks if component.isbinary, if such is the case the code will go on to create modulefile using a java.io.file with no references to the workspace file i am not sure why this was done this way, but our adopter product is breaking because in the case of binary ears with a web module, we are expecting to have the in workspace resources instead of the file system resource it seems that this is a change from the way that the old j2eeflexibleprojdeployable used to do it as seen in the j2eeflexibleprojdeployable.members call, which will call the getbinarymodulemembers and checks for the existance of workspaces resources, first and then moves on to external files. Date: '2010-05-11 09:37:56' From: 'angel vera' we are looking to get this fixed in 3.2, as this is a regression from 3.1 Date: '2010-05-11 19:34:29' From: 'jason peterson' rob, this was a change you had made is there a specific reason why it just returns java.io.file now? Date: '2010-05-11 19:36:57' From: 'jason peterson' the same check to determine if it is a workspace resource to return an ifile vs java.io.file could be done by clients is there some reason this can ' t be done angel we are late in the cycle and this code has been this way for a few milestones now. Date: '2010-05-12 09:01:45' From: 'angel vera' we found this out during our adopters testing, although we could do the check in our side, i am not sure what other places could be broken i vote for fixing it the jee side since it is a regression from 3.1 was there a reason for the change we should determine why was the old code not ported so that we can make a decision. Date: '2010-05-12 10:58:25' From: 'rob stryker' created attachment 168158 conditionally changes the modulefile ' s constructor this seems like a good patch but i haven ' t tested it since i don ' t have a test case let me know if this fixes your usecase. Date: '2010-05-12 11:25:52' From: 'jason peterson' angel can you please test this as soon as possible i would like to put this up for review today and get it in rc1 if possible. Date: '2010-05-12 15:05:58' From: 'angel vera' testing completed this works fine now thanks for the patch. Date: '2010-05-12 15:33:01' From: 'chuck bridgham' approved Date: '2010-05-12 15:35:59' From: 'jason peterson' * explain why you believe this is a stop-ship defect or, if it is a "" hotbug "" (requested by an adopter) please document it as such adopter ' s are expecting an ifile as a parameter to the modulefile constructor when the resource is a workspace resource and are expecting a java.io.file for external resources this issue exposes a regression issue where now only java.io.file is used regardless of whether the resource is a workspace or external resource * is there a work-around if so, why do you believe the work-around is insufficient the workaround would require adopters to know of the regression and code around it this is not a sensible workaround * how has the fix been tested is there a test case attached to the bugzilla record has a junit test been added no unit tests for this bug * give a brief technical overview who has reviewed this fix the fix is to simply call the right modulefile constructor based on whether the binary component ' s underlying resource is a workspace or external resource this has been reviewed and approved by chuck angel has tested that the patch solves the issue at hand * what is the risk associated with this fix i see little risk with this patch it will now work as it did pre wtp 3.2 Date: '2010-05-12 18:50:01' From: 'jason sholl' code checked into head for wtp 32 rc1","i noticed that in the members calls for flatcomponentdeployable.members there is a call that checks if component.isbinary, if such is the case the code will go on to create modulefile using a java.io.file with no references to the workspace file i am not sure why this was done this way, but our adopter product is breaking because in the case of binary ears with a web module, we are expecting to have the in workspace resources instead of the file system resource it seems that this is a change from the way that the old j2eeflexibleprojdeployable used to do it as seen in the j2eeflexibleprojdeployable.members call, which will call the getbinarymodulemembers and checks for the existance of workspaces resources, first and then moves on to external files. we are looking to get this fixed in 3.2, as this is a regression from 3.1 we found this out during our adopters testing, although we could do the check in our side, i am not sure what other places could be broken i vote for fixing it the jee side since it is a regression from 3.1 this seems like a good patch but i haven ' t tested it since i don ' t have a test case i would like to put this up for review today and get it in rc1 if possible. the fix is to simply call the right modulefile constructor based on whether the binary component ' s underlying resource is a workspace or external resource"
5,"""(221376) eclipse - deadlock at the facetedprojectframework probably while trying to change the runtime"" Date: '2008-03-04 14:01:45' From: 'angel vera' in an adopter product, while executing tests scenarios using 3.0m5, we found the following jvm lock which seems to be caused by two threads accessing some faceted framework code we will need a patch for based on m5 code for this defect i can describe what one of the thread is doing, but i might need some time if you need to know exactly what both threads are trying to do let me know if you know the exact details of what i was doing. Date: '2008-03-04 14:02:52' From: 'angel vera' created an attachment (id=91550) dump snippet Date: '2008-03-04 14:11:52' From: 'konstantin komissarchik' i will need the stack trace of both threads unless this can be reproduced with wtp alone. Date: '2008-03-04 15:26:53' From: 'konstantin komissarchik' looking at the stack traces, this appears to be mostly a problem in adopter code in thread-2, jsfplugin.start() is calling projectfacetsmanager.create() which needs a lock to the project ' s list it happens to be running in the context of a facetedproject.modify() operation kicked off by adopter code, which is holding a project lock you are generally discouraged from doing anything in plugin ' s start method that can block or try to acquire a lock a simple solution here might be to spin off a thread from the start method instead i am leaving this open (but reducing severity), since there is an opportunity to improve wtp code that ' s involved it looks like during the create call, facetedprojectframeworkimpl holds the lock on the projects list while calling refresh on the project it shouldn ' t be doing that. Date: '2008-03-06 11:14:29' From: 'chuck bridgham' you hit the problem exactly for us.. because the projects are still locked during change notification, any delegating facet or runtime changed operation will be locked out - causing this situation. Date: '2008-03-06 11:15:12' From: 'chuck bridgham' oops sorry hit the reassign by accident Date: '2008-03-31 19:22:13' From: 'konstantin komissarchik' modified facetedprojectframeworkimpl.create() method so that the projects list is not held while the project refresh is called it now modifies the list, releases the lock on the list and then refreshes the project this should still be thread-safe while not facilitating deadlock situations released the fix into the 3.0 m6 code stream.","in an adopter product, while executing tests scenarios using 3.0m5, we found the following jvm lock which seems to be caused by two threads accessing some faceted framework code we will need a patch for based on m5 code for this defect i will need the stack trace of both threads unless this can be reproduced with wtp alone. it happens to be running in the context of a facetedproject.modify() operation kicked off by adopter code, which is holding a project lock a simple solution here might be to spin off a thread from the start method instead because the projects are still locked during change notification, any delegating facet or runtime changed operation will be locked out - causing this situation. modified facetedprojectframeworkimpl.create() method so that the projects list is not held while the project refresh is called released the fix into the 3.0 m6 code stream."
6,"""(213005) eclipse - can ' t use a new targeted runtime in the webproject creation wizard"" Date: '2007-12-14 07:14:00' From: 'angel vera' when creating a new webproject, i created a new runtime but i was unable to see in the drop down the newly created runtime i then created a second one, i was then able to see the first one, but not the second newly created runtime 0. ensure you don ' t have any installed server (runtimes) defined 1. open the create new dynamyc web project wizard 2. enter the name for the web project 3. using the target runtime "" new "" button, create a new runtime 4. the runtime should be displayed in the combobox, but is not there Date: '2007-12-14 09:46:16' From: 'carl anderson' *** bug 213006 has been marked as a duplicate of this bug*** Date: '2008-01-03 14:58:40' From: 'konstantin komissarchik' i was unable to reproduce this (using i20071221182137) which runtime type were you using? Date: '2008-01-03 15:32:23' From: 'angel vera' i was using tomcat 5.5 Date: '2008-01-04 08:28:15' From: 'angel vera' i just tried this again today using the latest build available (20080104023442), and i am still able to recreate the problem the one thing i did noticed that i did is i skipped step 0, and instead added a step 2.1, where i just click on the drop down arrow of the target runtime (this way i ensure that there is nothing in the box), i then continue with step 3, using tomcat 5.5 Date: '2008-01-04 11:46:37' From: 'konstantin komissarchik' reproduced the problem using tomcat 5.5 investigating now. Date: '2008-01-04 17:46:53' From: 'angel vera' *** bug 214404 has been marked as a duplicate of this bug *** Date: '2008-01-04 18:10:10' From: 'konstantin komissarchik' raising severity to major since this can be a pretty confusing regression for the user to deal with whether this comes up or not depends on the implementation details of the server adapter i can reproduce with tomcat, but not with weblogic. Date: '2008-01-04 18:12:11' From: 'konstantin komissarchik' created an attachment (id=86250) patch v1 i have a patch for this issue and bug 214375 (they are interconnected) both issues appear to be fixed by the patch, but due to the size of the change, this will need further testing/review before being released. Date: '2008-01-08 14:59:36' From: 'konstantin komissarchik' fix released to the m5 code stream.","when creating a new webproject, i created a new runtime but i was unable to see in the drop down the newly created runtime i then created a second one, i was then able to see the first one, but not the second newly created runtime 4. the runtime should be displayed in the combobox, but is not there i just tried this again today using the latest build available (20080104023442), and i am still able to recreate the problem the one thing i did noticed that i did is i skipped step 0, and instead added a step 2.1, where i just click on the drop down arrow of the target runtime (this way i ensure that there is nothing in the box), i then continue with step 3, using tomcat 5.5 raising severity to major since this can be a pretty confusing regression for the user to deal with i have a patch for this issue and bug 214375 (they are interconnected) both issues appear to be fixed by the patch, but due to the size of the change, this will need further testing/review before being released."
7,"""(267006) eclipse - [patch] validation of patch root on local diff wizard"" Date: '2009-03-04 07:21:39' From: 'tomasz zarna' branch_20090126_localdiff is there any particular reason why we validate patch root provided manually in the create local diff wizard currently, only existing paths are accepted this doesn ' t allow us to ignore leading path segments which was, correct me if i ' m wrong, the main reason behind this option. Date: '2009-03-18 08:00:48' From: 'szymon brandys' since it ' s a blocker of bug 71374, my questions is when the fix will be ready. Date: '2009-03-18 13:17:31' From: 'kacper zdanowicz' so, just to clear things out, we don ' t need patch root ' s validation, because we want to be able to enter a path, which may be outside of the current workspace and the correct behaviour of patch root is described in bug 267003, right ? Date: '2009-03-19 07:13:03' From: 'szymon brandys' (in reply to comment #2) > so, just to clear things out, > > we don ' t need patch root ' s validation, because we want to be able to enter a > path, which may be outside of the current workspace > > and the correct behaviour of patch root is described in bug 267003, right > in bug 267003, i described a case when we can ' t continue using the suggested value that ' s weird i think that we should allow to continue even using a path to a location outside the workspace or paths like "" local history.. "" in such cases i would expect a warning/info in the wizard header though. Date: '2009-03-23 10:55:48' From: 'kacper zdanowicz' created an attachment (id=129605) patch_v1 patch resolving issue > in such cases i would > expect a warning/info in the wizard header though warning added if patch root is outside the workspace or is not a valid path. Date: '2009-03-30 07:30:55' From: 'szymon brandys' created an attachment (id=130227) fix v02 Date: '2009-03-30 07:45:22' From: 'szymon brandys' created an attachment (id=130229) fix v02 with changes i found more issues with your patch_v1 i fixed some of them in my latest fix i think that you should look carefully at the code and remove at least all the warnings there is another bug for refactoring raised by tomasz i hope that the fix for it will cover warnings too. Date: '2009-03-30 07:47:13' From: 'szymon brandys' released to the branch_20090126_localdiff.","branch_20090126_localdiff is there any particular reason why we validate patch root provided manually in the create local diff wizard currently, only existing paths are accepted this doesn ' t allow us to ignore leading path segments which was, correct me if i ' m wrong, the main reason behind this option. so, just to clear things out, we don ' t need patch root ' s validation, because we want to be able to enter a path, which may be outside of the current workspace i think that we should allow to continue even using a path to a location outside the workspace or paths like "" local history.. "" in such cases i would expect a warning/info in the wizard header though. warning added if patch root is outside the workspace or is not a valid path. created an attachment (id=130229) fix v02 with changes i found more issues with your patch_v1 i fixed some of them in my latest fix i think that you should look carefully at the code and remove at least all the warnings there is another bug for refactoring raised by tomasz"
8,"""(182965) eclipse - [editor] modality of "" add attachment "" dialog"" Date: '2007-04-18 09:58:00' From: 'tomasz zarna' as long as "" add attachment "" dialog is modal i can ' t get any extra information from eclipse i ' m working on (i can ' t take a screenshot, check a class name, copy-paste a piece of code when writing description) is there a reason why the dialog is modal? Date: '2007-04-18 23:30:08' From: 'robert elves' reason was to stop user from changing/submitting from editor while adding attachment editor should be ' disabled ' during attachment (bug#171135) but ui not blocked. Date: '2008-01-17 02:39:07' From: 'jacek pospychala' any chance for this now, as bug 171135 is fixed it would be easier to write comments to patch having access to ui. Date: '2008-01-17 06:25:10' From: 'tomasz zarna' created an attachment (id=87146) is it enough? Date: '2008-01-22 17:03:44' From: 'mik kersten' should we worry about the usability implications of a non-modal dialog they can pop behind the workbench and leave the ui in a confusing state notably we have decided that this is necessary for the screenshot capture wizard, but i can ' t think of another place in eclipse where a non-modal wizard dialog is used, and there are a few places where they would be useful. Date: '2008-01-22 18:12:31' From: 'eugene kuleshov' (in reply to comment #4) > ...i can ' t think of another place in eclipse where a non-modal wizard dialog is used, > and there are a few places where they would be useful search dialog in text editor is not modal Date: '2008-01-22 19:00:51' From: 'steffen pingel' the search dialog is not a wizard i often find myself wanting to lookup a class or copy and paste text while attaching a file, too, and the modal wizard dialog gets in the way of that i can see three alternatives to address that (1) go with the patch and make the dialog non-modal (2) add offline support for attachments, i.e. allow to save changes to an attachment without submitting to the repository which would make it possible to close and reopen the wizard dialog to make additional changes (3) use a different ui for submitting attachments, e.g instead of opening a dialog add a form-based tab to the task editor for entering attachment details while i my preference would be a combination of (2) and (3) changes of that sort would require significant development effort maybe we could go for (1) for now and get some mileage on the user interaction? Date: '2008-01-22 23:58:51' From: 'mik kersten' the eclipse sdk has made a deliberate decision to make wizard dialogs modal, since they require a sequence of user input so while i think that there are use cases that are better served by a non-modal wizard, we should not break from this convention unless there is overwhelming reason to do so as a user i would personally prefer that both ctrl+h and the attachment wizard were non-modal but for the average user the pain of having dialogs pop behind the main window of a solitary (i.e. full screen) application is probably too much of a usability problem so -1 from me for (1) because the problem is in the modality of the interaction, not of the shell if we get rid of the modality of the interaction (e.g. 2 & 3) we would not have this problem steffen, rob:do we have bugs scheduled for 3.0 that address that? Date: '2008-01-23 00:37:03' From: 'steffen pingel' created an attachment (id=87601) updated patch Date: '2008-01-23 00:58:50' From: 'steffen pingel' (in reply to comment #7) > but for the average user the pain of having dialogs pop behind the main window > of a solitary (i.e. full screen) application is probably too much of a usability > problem if the parent shell is correctly set to the workbench window the wizard dialog should not never get hidden behind it this is the way it works on gtk is that different on windows while i agree that it is bad to break platform conventions, there is one example of a non-modal wizard dialog though mylyn ' s attach screenshot wizard it ' s hard to make a case that there is overwhelming reason to make the attach file wizard non-modal as well i don ' t see any downside except for breaking convention though but a reasonable benefit of being able to access the workbench while attaching files most users will never notice the difference since the work flow and ui remain exactly the same with a non-modal dialog > steffen, rob: do we have bugs scheduled for 3.0 that address that i don ' t remember seeing any bugs related to that. Date: '2008-01-23 23:15:15' From: 'robert elves' (in reply to comment #7) > steffen, rob: do we have bugs scheduled for 3.0 that address that bug#211845 is related to saving attachments offline Date: '2008-01-24 01:33:55' From: 'eugene kuleshov' what happen if task or task data with opened attachment wizard will be deleted? Date: '2008-01-25 01:49:16' From: 'mik kersten' steffen: so i assume that you ' re suggesting the slightly odd middle-ground that i took with the attachment wizard, i.e. can ' t pop behind but the user can still interact with the workbench yes, this works properly on windows perhaps it would get rid of the most problematic part of the usability problem (pop-behind) and enable us to do this but it would open the need to handle the lack of modality (e.g. comment#1, comment#11). Date: '2008-01-25 02:06:50' From: 'steffen pingel' i couldn ' t resist to bring up the screenshot wizard all modality related issues apply there, too we probably have to review the ui and make sure that the editor is not closeable while the dialog is still open btw, i have been running with the patch for a short while and have already taken advantage of the non-modality of the dialog in the long run i would like to aim for a solution that does not violate the platform conventions (comment #6) and enables a richer user experience (e.g. spell checking for attachment comments) given the benefits i think it ' s an acceptable compromise to make the dialog non-modal for now we could also consider making this a sandbox feature to gather more feedback not sure if it ' s worth the overhead but something similar to swt ' s tweaklets that allow runtime tweaking of the ui might be useful for that purpose http://www.eclipse.org/platform/incubator/ui/tweaklets/index.php Date: '2008-03-02 02:49:44' From: 'steffen pingel' mik, do you have objects to applying the patch to head we can review this before 3.0 goes out. Date: '2008-03-03 00:07:41' From: 'mik kersten' could you summarize the usability problems that could arise if we went ahead with the non-modal always-on-top approach? Date: '2008-03-31 14:06:39' From: 'steffen pingel' created an attachment (id=94270) updated patch Date: '2008-05-02 03:02:50' From: 'steffen pingel' the attachment dialog is now non-modal and has been decoupled from the editor it is also possible to run the actual attaching in the background once the task is refreshed any editor that has the task open will prompt the user to refresh in case of an error the attachment wizard pops back up let ' s get some mileage on this and reconsider in case this brings up other usability problems than what is mentioned in comment 9. Date: '2008-05-02 22:00:22' From: 'mik kersten' steffen: please add add to the ui review list for 3.0 (use the testing wiki page). Date: '2008-05-05 03:39:19' From: 'jacek pospychala' guys, thanks for fixing this Date: '2008-05-05 03:48:03' From: 'steffen pingel' i should add that only the jira editor currently makes use of the new attachment wizard other connectors will be ported to the new apis in the upcoming weeks.","as long as "" add attachment "" dialog is modal i can ' t get any extra information from eclipse i ' m working on (i can ' t take a screenshot, check a class name, copy-paste a piece of code when writing description) reason was to stop user from changing/submitting from editor while adding attachment editor should be ' disabled ' during attachment (bug#171135) but ui not blocked. should we worry about the usability implications of a non-modal dialog notably we have decided that this is necessary for the screenshot capture wizard, but i can ' t think of another place in eclipse where a non-modal wizard dialog is used, and there are a few places where they would be useful. (1) go with the patch and make the dialog non-modal (2) add offline support for attachments, i.e. allow to save changes to an attachment without submitting to the repository which would make it possible to close and reopen the wizard dialog to make additional changes (3) use a different ui for submitting attachments, e.g the eclipse sdk has made a deliberate decision to make wizard dialogs modal, since they require a sequence of user input so while i think that there are use cases that are better served by a non-modal wizard, we should not break from this convention unless there is overwhelming reason to do so as a user i would personally prefer that both ctrl+h and the attachment wizard were non-modal but for the average user the pain of having dialogs pop behind the main window of a solitary (i.e. full screen) application is probably too much of a usability problem if the parent shell is correctly set to the workbench window the wizard dialog should not never get hidden behind it this is the way it works on gtk it ' s hard to make a case that there is overwhelming reason to make the attach file wizard non-modal as well i don ' t see any downside except for breaking convention though but a reasonable benefit of being able to access the workbench while attaching files most users will never notice the difference since the work flow and ui remain exactly the same steffen: so i assume that you ' re suggesting the slightly odd middle-ground that i took with the attachment wizard, i.e. can ' t pop behind but the user can still interact with the workbench btw, i have been running with the patch for a short while and have already taken advantage of the non-modality of the dialog in the long run i would like to aim for a solution that does not violate the platform conventions (comment #6) and enables a richer user experience (e.g. spell checking for attachment comments) given the benefits i think it ' s an acceptable compromise to make the dialog non-modal for now not sure if it ' s worth the overhead but something similar to swt ' s tweaklets that allow runtime tweaking of the ui might be useful for that purpose could you summarize the usability problems that could arise if we went ahead with the non-modal always-on-top approach? the attachment dialog is now non-modal and has been decoupled from the editor it is also possible to run the actual attaching in the background i should add that only the jira editor currently makes use of the new attachment wizard"
9,"""(199846) eclipse - [patch] misuse of the fuzz factor"" Date: '2007-08-14 06:41:08' From: 'tomasz zarna' build id: i20070809-1105 while looking for the cause of bug 196847, i got suspicious about a usage of the so called fuzz factor i thought that i knew what it means and what is it for even though i hadn ' t use it before however, after taking a closer look at the code i got confused for example, please, correct me if i ' m wrong, in hunkresult#calculatefuzz[1] method we are calculating the most appropriate shift value which has nothing to do with the fuzz factor looking further, in hunk#trypatch[2] , when we came across a context line ( ' ' char) we should use the fuzz factor i can see no sign of such an action there i could give you more example, but that ' s not my point i think we should take a second look at the patcher algorithm name some methods more accurately, add some javadocs or maybe even fix some things but first of all, we should add plenty of unit tests just to make sure after "" refactoring "" is done, everything still works as expected [1] compare project: org.eclipse.compare.internal.patch.hunkresult [2] compare project: org.eclipse.compare.internal.patch.hunk Date: '2007-08-14 06:48:30' From: 'szymon brandys' right while i was looking at the code, i became confused as well i agree that we have to take a good look at it. Date: '2007-08-16 04:08:14' From: 'tomasz zarna' also, it would be great if the patching could implement the algorithm described in bug 196847, comment 6. Date: '2007-09-10 10:41:37' From: 'stefan xenos' note: this bug is important for our rcp app. Date: '2007-10-01 10:29:42' From: 'tomasz zarna' created an attachment (id=79481) testcase for the bug this is a testcase showing that the fuzz factor is not working as expected, actually is not working at all i ' ve modified slightly the patchtest class, so now one can use the fuzz factor as a parameter but this is not what the patch is mainly about the major part of it are the additional tests located in "" patchdata "" subfolder they assume that the fuzz factor works and that the patches from the subfolders can be applied unfortunately, most of the will fail as the fuzz factor doesn ' t work to make the tests pass we will need to apply the patch from the next comment the idea behind the "" testpatchdatasubfolder "" method from the patchtest class is that now one can easily add a new testcase by creating 3 files a context, a patch and an expected result therefore i encourage all of you to try write a failing testcase i ' m sure that there are still some cases which haven ' t been covered by the tests i provided. Date: '2007-10-01 10:47:26' From: 'tomasz zarna' created an attachment (id=79484) patch #1 this is a working version of the patch for the fuzz factor issue as stated in the previous comment, i ' m aware that there can be still some cases which when discovered will need addressing in a next version of the patch nevertheless, i decided to show you the patch so anyone interested can comment on it i ' d be happy to hear your opinion there are some limitations in the fuzz factor mechanism i decided to introduce 1) the default maximum fuzz factor is 2 (which is a consequence of the fact that there are usually 3 lines of context "" around "" a hunk) so one one choose to calculate the fuzz factor[1] there will be up to 3 iterations when looking for the fuzz (i.e. 0, 1, 2) 2) at this moment i also decided to not match context lines inside inside dopatch[2] method as they are already checked in the trypatch[3] method in the same class [1] org.eclipse.compare.internal.patch.hunkresult#calculatefuzz(list) [2] org.eclipse.compare.internal.patch.hunk#dopatch(patchconfiguration, list, int) [3] org.eclipse.compare.internal.patch.hunk#trypatch(patchconfiguration, list, int, int) waiting for your reply... Date: '2007-10-01 12:54:55' From: 'michael valenta' i ' ve looked at the patch and i ' ll do my best to provide comments given the complexity of the algorithm, i think the most important thing is to have a good set of tests to ensure the proper behavior or, in other words, i have a hard time verifying the code via inspection here are my comments 1) in the hunkresult#calculatefuzz, it seems to scan the whole file looking for possible matches to me, this implies that it would be possible to get hunks matching out of order is this the case 2) the maximum fuzz seems to be hardcoded at 2 with the assumption that there are 3 lines of context what if there are less content lines what if there are more 3) in hunk#trypatch i must admit that i can ' t really figure out what you are doing there (e.g i don ' t get the 2+2, 3+2 and 2+3 splits you are doing) the best approach here may be to sit down with szymon and go over the algorithm with him (i.e. i don ' t have that much knowledge about the algorithm anyway and going over it with someone there would probably be faster then doing it though a bug report or instant messaging) 4) in regards to ignoring the context lines during the patch application, how is the case handle were there is an addition following the context lines wouldn ' t you need to know how many context lines to skip in order to place the addition properly or am i missing something? Date: '2007-10-05 11:31:31' From: 'tomasz zarna' (in reply to comment #6) > 1) in the hunkresult#calculatefuzz, it seems to scan the whole file looking for > possible matches to me, this implies that it would be possible to get hunks > matching out of order is this the case yes, it ' s possible in some cases do you think we should prevent the patcher from allowing such cases i do agree that it can be confusing and i don ' t mind if we won ' t allow it > 2) the maximum fuzz seems to be hardcoded at 2 with the assumption that there > are 3 lines of context what if there are less content lines what if there are > more i was afraid you will ask that question i know that hardcoding the max fuzz is not enough i would change current 2 to lines.size() which is number of lines in a file that would work, wouldn ' t it but i ' ve a different question what should happen when we have fuzz factor greater or equal to number of lines of a hunk should we ignore all of the context lines or should we match at least one what if we ' re in the middle of "" calculating fuzz "" and the fuzz goes up i would allow ignoring all context lines, but that ' s just my opinion i know that default values are 3 for context lines and 2 for maximum fuzz factor, but we could inform a user that he/she exceed the maximum value > 3) in hunk#trypatch i must admit that i can ' t really figure out what you are > doing there (e.g i don ' t get the 2+2, 3+2 and 2+3 splits you are doing) [...] well, i will throw it away my idea was to apply the fuzz factor to any context lines, not only to the ones at the end or at the beginning of a hunk but i had a discussion with szymon about that and we decided to keep the context lines in the middle as they are - they must match > 4) in regards to ignoring the context lines during the patch application, how is > the case handle were there is an addition following the context lines wouldn ' t > you need to know how many context lines to skip in order to place the addition > properly or am i missing something yep, this is how it works i do collect context lines before processing an addition/change/deletion the same thing happens with context lines following a change the only problem is that i need to recognize which context lines are preceding a hunk and which follows it if i get that information right i can than try to match the hunk ignoring some of the context lines i ' m not sure if that answer your question (as i ' m not sure if i understood your question). Date: '2007-10-05 12:48:43' From: 'michael valenta' regarding hunk ordering, i can see that there might be some cases where changing the order of hunks would find matches that wouldn ' t otherwise be found ideally, i think we should try to match in order first and only try out-of-order matches if an in-order match couldn ' t be found regarding the default maximum fuzz factor, i ' m ok with using a hardcoded value to start with but lets use a constant for it so we can easily find references to it easily as to whether we can ignore all content lines, i think that we need to be careful it really depends on the nature of the change for instance, if the patch is a straight addition, it may be dangerous to ignore even one content line, especially if one or more of the content lines are whitespace however, if the before state of the patch has many lines in it, you could probably get away with ignoring all the context lines it would be good to have a set of tests that cover some of these corner cases to ensure that the algorithm behaves as the user would expect. Date: '2007-10-12 07:10:15' From: 'tomasz zarna' created an attachment (id=80217) patch #2 second version of the patch i cleaned up the code and added back context lines validation in hunk.dopatch method. Date: '2007-10-12 07:10:47' From: 'tomasz zarna' created an attachment (id=80218) more tests for the bug Date: '2007-10-16 11:47:27' From: 'szymon brandys' i raised a bug for an issue i found in tests i will raise another one for all things that should be considered, but anyway the patch looks good people should finally play with it Date: '2007-10-17 17:25:33' From: 'tomasz zarna' both patches (the fuzz factor and tests) released to head. Date: '2007-10-31 08:14:57' From: 'szymon brandys' verified in i20071029-1800 and by a code inspection.","while looking for the cause of bug 196847, i got suspicious about a usage of the so called fuzz factor however, after taking a closer look at the code i got confused i think we should take a second look at the patcher algorithm while i was looking at the code, i became confused as well i agree that we have to take a good look at it. this is a testcase showing that the fuzz factor is not working as expected, actually is not working at all i ' ve modified slightly the patchtest class, so now one can use the fuzz factor as a parameter the major part of it are the additional tests located in "" patchdata "" subfolder the idea behind the "" testpatchdatasubfolder "" method from the patchtest class is that now one can easily add a new testcase by creating 3 files this is a working version of the patch for the fuzz factor issue 1) the default maximum fuzz factor is 2 (which is a consequence of the fact that there are usually 3 lines of context "" around "" a hunk) 2) at this moment i also decided to not match context lines inside inside dopatch[2] method as they are already checked in the trypatch[3] method in the same class 1) in the hunkresult#calculatefuzz, it seems to scan the whole file looking for possible matches to me, this implies that it would be possible to get hunks matching out of order 2) the maximum fuzz seems to be hardcoded at 2 with the assumption that there are 3 lines of context 3) in hunk#trypatch i must admit that i can ' t really figure out what you are doing there (e.g i don ' t get the 2+2, 3+2 and 2+3 splits you are doing) the best approach here may be to sit down with szymon and go over the algorithm with him (i.e. i don ' t have that much knowledge about the algorithm anyway and going over it with someone there would probably be faster then doing it though a bug report or instant messaging) 4) in regards to ignoring the context lines during the patch application, how is the case handle were there is an addition following the context lines wouldn ' t you need to know how many context lines to skip in order to place the addition properly i do agree that it can be confusing and i don ' t mind if we won ' t allow it i know that hardcoding the max fuzz is not enough i would change current 2 to lines.size() which is number of lines in a file i know that default values are 3 for context lines and 2 for maximum fuzz factor, but we could inform a user that he/she exceed the maximum value my idea was to apply the fuzz factor to any context lines, not only to the ones at the end or at the beginning of a hunk regarding hunk ordering, i can see that there might be some cases where changing the order of hunks would find matches that wouldn ' t otherwise be found regarding the default maximum fuzz factor, i ' m ok with using a hardcoded value to start with but lets use a constant for it so we can easily find references to it easily i raised a bug for an issue i found in tests"
10,"""(337212) eclipse - [server] Provide REST API for git status and diff"" Date: '2011-02-15 09:22:57' From: 'tomasz zarna' in order to fix bug 334206 and provide input to the compare editor we need to at least provide two rest operations * status which would return a file with an information on its state (tracked, staged, modified etc) for modified files the response (json object) should contain a link to the diff * diff which would return the diff resource for the given file Date: '2011-02-15 10:10:59' From: 'boris bokowski' chris, are you aware of any related work? Date: '2011-02-15 10:21:26' From: 'chris aniszczyk' there s a bug open in jgit to provide a nicer api for diff than using the low-level internals.. bug 334766 - add diffcommand to jgit api if you don t mind using low-level code in jgit, you can look at how we implemented diff in the cli code.. /org.eclipse.jgit.pgm/src/org/eclipse/jgit/pgm/diff.java for status, it s a tad trickier but you can look at how we do it when we decorate resources in the navigator.. o.e.egit.ui.internal.decorators.decoratableresourcehelper.decorateresource(...) if you need help with this, i m willing to get my hands dirty i recently setup orion development on my new macbook air Date: '2011-02-15 12:10:10' From: 'tomasz zarna' thanks for the tip chris, i came to the exact same conclusion when looking at the code today i just hope we will be able to stick to the jgit api and don t go back to using egit the decorating classes are internals anyway i will definitely ping you when i have questions. Date: '2011-02-15 12:13:07' From: 'chris aniszczyk' you shouldn t have to use the decorating classes directly, just how they use treewalk s and dircacheentry s getrawmode to get the different statuses. Date: '2011-02-15 12:22:36' From: 'szymon brandys' we need git diff working via rest api, so libing could start working on the compare editor asap so it seems like addressing bug 334766, add diffcommand to jgit api is quite important otherwise tomasz life will be more complicated ;) we had a short discussion with tomek and having git commands implemented is only one part of the problem we also need a way to add git uris to get /file responses. Date: '2011-02-15 15:25:24' From: 'tomasz zarna' (in reply to comment #2) > for status, it s a tad trickier [...] > > if you need help with this, i m willing to get my hands dirty one more question to you chris, are there any chances that a command for getting status will become part of jgit api i could file a bug for this, but don t see a point in doing so if you guys do not plan to do it in the nearest future or, let me ask it differently, does creating such a command make sense to you i could try to contribute it to jgit given i will be working on it anyway. Date: '2011-02-15 15:36:34' From: 'chris aniszczyk' feel free to create a bug for statuscommand it would probably return a collection of dircache s you can iterate over or some type of statusresult for your convenience we haven t really debated it since no one has requested it so far. Date: '2011-02-17 11:02:11' From: 'tomasz zarna' i ve just pushed[1] first part of the code which is responsible for the diff operation szymon has implemented a special decorator[2] which adds git uris to json object representing a file currently only the uri starting with /git/diff/...will produce a meaningful response libing could you tell me if the fact that the git status is not there yet is actually blocking you if this is not crucial i would like to switch to other missing parts of git rest api[3] like clone also, i would then open a separate bug for the status and close this one [1] b8e4e30e73d4955b51da335b6e8d517736c53a70 [2] org.eclipse.orion.server.git.gitwebresourcedecorator [3] more info http://wiki.eclipse.org/orion/how_tos/working_with_git Date: '2011-02-17 11:28:22' From: 'libing wang' talked to tomasz today over st so he will provide additional rest api to get the file from index the client side will use the diff and the index as input to generate a mapper in this way , we can either generate the file in the working tree or get the file content by the file rest apis. Date: '2011-02-17 11:36:30' From: 'tomasz zarna' (in reply to comment #9) > so he will provide additional rest api to get the file from index i filed bug 337463 for that leaving this one open until we provide /git/status. Date: '2011-02-24 13:37:21' From: 'boris bokowski' we re also going to want rest api for git add (on a single file, or all currently unstaged files) git reset --mixed (on a single file, or all currently staged files - the inverse of git add) git commit (passing a commit message, and a boolean for amend or not) i ve asked libing to create a wiki page with a sketch of the ui we d like to build. Date: '2011-02-25 06:56:55' From: 'tomasz zarna' (in reply to comment #11) > git add (on a single file, or all currently unstaged files) bug 338200 > git reset --mixed (...) bug 338202 > git commit (...) bug 338203 > i ve asked libing to create a wiki page with a sketch of the ui we d like to > build i think http://wiki.eclipse.org/orion/how_tos/working_with_git is the best place for it.. i can see that libing has already updated it. Date: '2011-02-28 12:42:41' From: 'tomasz zarna' i ve just released[1] a rough version of /git/status which returns status for files that * have been added * are missing -- in index, but not filesystem * have been modified * are not tracked yet here is an example of json respone {""Added"":[{""Name"":""new.txt""}],""Untracked"":[],""Missing"":[],""Modified"":[]} libing please let me know what you would like to have next [1] ba28ae8967cf4447e64cdbc14f98ec6f60d33480 Date: '2011-03-01 10:18:57' From: 'tomasz zarna' pushed rest of the code[1] the json response brings more data now, e.g. {""Removed"":[],""Added"":[],""Untracked"":[],""Changed"":[],""Missing"":[],""Modified"":[{""Location"":""http://localhost:8080/file/Q/folder/folder.txt"",""Name"":""folder/folder.txt""},{""Location"":""http://localhost:8080/file/Q/test.txt"",""Name"":""test.txt""}]} files that are added, changed and removed should be recognized as staged in the git status ui[2] while missing, modified and untracked should fall under unstaged category libing, if the response in that form doesn t suit you please let me know and open a new bug i m closing this one as fixed [1] 63a35aa9c83c0aeb75602215b39fc59566d8ddfb [2] bug 338225","in order to fix bug 334206 and provide input to the compare editor we need to at least provide two rest operations * status which would return a file with an information on its state (tracked, staged, modified etc) for modified files the response (json object) should contain a link to the diff * diff which would return the diff resource for the given file there s a bug open in jgit to provide a nicer api for diff than using the low-level internals.. bug 334766 - add diffcommand to jgit api if you don t mind using low-level code in jgit, you can look at how we implemented diff in the cli code.. /org.eclipse.jgit.pgm/src/org/eclipse/jgit/pgm/diff.java for status, it s a tad trickier but you can look at how we do it when we decorate resources in the navigator.. i just hope we will be able to stick to the jgit api and don t go back to using egit we need git diff working via rest api, so libing could start working on the compare editor asap so it seems like addressing bug 334766, add diffcommand to jgit api is quite important we had a short discussion with tomek and having git commands implemented is only one part of the problem we also need a way to add git uris to get /file responses. i ve just pushed[1] first part of the code which is responsible for the diff operation if this is not crucial i would like to switch to other missing parts of git rest api[3] like clone so he will provide additional rest api to get the file from index the client side will use the diff and the index as input to generate a mapper git add (on a single file, or all currently unstaged files) git reset --mixed (on a single file, or all currently staged files - the inverse of git add) git commit (passing a commit message, and a boolean for amend or not) i ve asked libing to create a wiki page with a sketch of the ui we d like to build. i ve just released[1] a rough version of /git/status which returns status for files that * have been added * are missing -- in index, but not filesystem * have been modified * are not tracked yet"
11,"""(224588) eclipse - [patch] provide an information how many lines does the patch change"" Date: '2008-03-28 09:19:43' From: 'tomasz zarna' inspired by martin oberhuber ' s mail about his "" lsc "" script for counting lines in a patch[1], i though that it maybe be worthwhile to embed such thing in the apply patch wizard itself imo using regexp should be enough here, especially due to the fact that we don ' t want to make any additional dependencies so, my proposal is to allow to specify a regexp rule for lines that should be count as a "" real contribution "" this is what first came to my head ^\+? (\s*\S+\s*)+$ which means "" count only lines starting with single ' + ' and a space the line must also have at least one non-whitespace character "" i think this is more/less what martin ' s script does all lines that match the above pattern would be sum up and the info would be displayed somewhere on the apply patch wizard how does it sound martin again, i think it ' s a brilliant idea martin [1] sent to eclipse.org-committers Date: '2008-03-28 09:22:45' From: 'tomasz zarna' the info could be also shown in a patch outline view (see bug 190418). Date: '2008-03-28 09:42:46' From: 'martin oberhuber' excellent idea having the line counter right in the apply patch wizard would finally give us a standard way of counting lines that everybody could use easily my script also ignores "" empty comment "" lines of the form ^\+\s+[#*] +\s+$ but that ' s really neglectible and i ' m fine with your approach of counting any non-empty added line in the patch actually, couldn ' t your regex even be simpler, say ^\+\s+\s since you don ' t need to check till the end of the line? Date: '2008-03-28 09:46:03' From: 'martin oberhuber' and actually, if the wizard counts added lines, why shouldn ' t it also count removed lines giving two separate numbers e.g 10 lines added 20 lines removed this sounds familiar to me since i ' ve seen similar numbers in rcs files before i ' d guess that the regex for removed lines could just be the same as for added lines but the + replaced by a - and, files removed entirely should contribute the entire number of lines they had before (i believe that the old contents is not recorded in the diff, is it?) Date: '2008-04-01 09:32:36' From: 'tomasz zarna' created an attachment (id=94358) patch fix that matches all lines from a patch against given regexps (one for added lines and one for removed) patterns can be changed on general > compare/patch pref page i decided to leave them blank by default, so i don ' t need to worry about different diff output formats which are out there however, you can easily set it to a value most convenient to you (i.e. ' ^\+\s+\s ' ). Date: '2008-04-01 09:32:39' From: 'tomasz zarna' created an attachment (id=94360) mylyn/context/zip Date: '2008-04-01 09:38:19' From: 'martin oberhuber' (in reply to comment #4) > i decided to leave them blank by default, so i don ' t need to worry so this means it won ' t work out of the box but then, the compare/patch feature already needs to analyze patches or it cannot apply them, right so i don ' t quite understand why the same patterns that compare/patch already uses aren ' t the default for the line counting feature. Date: '2008-04-02 11:54:35' From: 'tomasz zarna' (in reply to comment #6) > so this means it won ' t work out of the box but then, the compare/patch feature > already needs to analyze patches or it cannot apply them, right so i don ' t > quite understand why the same patterns that compare/patch already uses aren ' t > the default for the line counting feature i guess you ' re right martin, but this will make the patch a little bit more complicated as the current patching mechanism is not very helpful in counting added/removed lines i ' ll just need some extra time to do this. Date: '2008-04-21 09:11:06' From: 'tomasz zarna' created an attachment (id=96838) patch 2 Date: '2008-04-21 09:11:09' From: 'tomasz zarna' created an attachment (id=96839) mylyn/context/zip Date: '2008-04-21 09:29:15' From: 'tomasz zarna' the latest patch ensures, that when no regular expressions is provided, the patcher will use internal patterns to distinguish which lines have been added or deleted however, this will work only for patches in unified and context diff output format as reported in bug 227742, it appears that standard patch format is no longer supported (or it has never been) moreover, i logged bug 228000 to make sure we add some automated tests to cover this newly added feature. Date: '2008-04-22 05:47:53' From: 'tomasz zarna' created an attachment (id=96993) patch 3 previous patch with some minor adjustments. Date: '2008-04-22 06:29:21' From: 'tomasz zarna' the latest patch applied to cvs head martin, would you like to try it out and let me know what do you think feel free to open a new bug if there is something i missed. Date: '2008-04-23 21:00:43' From: 'martin oberhuber' i tested this with i20080422-0800, on the attached patch from bug 227572 attachment 97084 your dialog counts 207 added and 29 removed lines, but my script only counts 151 added lines it looks like you are also counting empty lines, which doesn ' t seem overly useful to me. Date: '2008-04-24 04:44:46' From: 'tomasz zarna' created an attachment (id=97398) the preference page the "" internal "" mechanism of counting added/removed lines is very simple, it sums up all lines with ' + ' and ' - ' if you want to use your own patterns/script please take a look at the general > compare/patch pref page i ' ve added there two fields where you can customize the way this simple mechanism works. Date: '2008-04-24 07:09:41' From: 'martin oberhuber' it ' s awsome that this is customizeable, but when i remember right, one reason for putting this enhancement into eclipse sdk was such that there is a "" common standard "" by which the projects count their lines in a patch i think that this "" common standard "" should be as good as possible by default on the other hand, having some magic like removing empty lines from the count going on in the background is perhaps a problem.. would it be possible to keep your current count ( "" 211 added / 53 removed lines "" ) but add an additional count without empty lines e.g note that i ' m only talking about empty lines here, e.g. regex "" ^\\s*$ "" i agree that we cannot count empty comments here by default, because comment styles differ by language actually, it might be a good idea to have one additional kind of regex pattern in the preferences, which acts as a filter -- suggested tooltip behind // added lines: ^+ removed lines: ^- filter: ^[+-]\s*$ //filter for lines to not count, e.g. empty lines providing an output such as "" patch contains 207 added and 29 removed lines (151 / 27 filtered) "" Date: '2008-04-24 08:46:47' From: 'tomasz zarna' martin, i see your point when you ' re saying that the "" common standard "" should be as good as possible, however i would rather not to filter any lines from a patch when parsing here are the approaches so far 1) use only given filters, by default no counting will be made this is how the patch from comment 4 worked rejected 2) by default count lines using the simple patterns, which are currently used when parsing a patch (ie "" + "" and "" - "" ), this can be modified in the pref page patch in comment 13 in head 3) by default count lines using more sophisticated patterns like excluding empty lines and again, this can be modified in the pref page if i understood you correctly this is what you meant in comment 15 my main concern here is what if i would like to know total number of lines added in the patch (the filter idea looks to be an answer here but it ' s a pref value, it ' s not embedded in the parser itself, right?) 4) by default count lines using both simple and sophisticated patterns at the same time the output would be something like this "" patch contains x added and y removed lines + z added lines which are empty "" again, the user could provide his own patterns.. which makes the whole mechanism overblown and not as intuitive as i would like it to be regarding the filter idea it sounds good to me, but i think we should move the discussion about it to a separate bug would you mind opening one btw, thanks for your feedback martin. Date: '2008-04-30 08:53:01' From: 'tomasz zarna' verified in i20080429-0100 martin are you willing to open new bugs to address your concerns? Date: '2008-05-02 19:08:09' From: 'martin oberhuber' fyi, following regex suppresses lines in the patch from counting, which are empty or only contain non-wordchars (i.e. lines which only contain an } or only contain a * as continuation of an empty javadoc comment added: ^\+[^+]+[a-zA-Z0-9_!?""|@~`$%()+;,.:=+-] Removed:   ^-[^-]+[a-zA-Z0-9_!?""|@~`$%()+;,.:=+-]","inspired by martin oberhuber ' s mail about his "" lsc "" script for counting lines in a patch[1], i though that it maybe be worthwhile to embed such thing in the apply patch wizard itself so, my proposal is to allow to specify a regexp rule for lines that should be count as a "" real contribution "" ^\+? (\s*\S+\s*)+$ all lines that match the above pattern would be sum up and the info would be displayed somewhere on the apply patch wizard my script also ignores "" empty comment "" lines of the form ^\+\s+[#*] +\s+$ but that ' s really neglectible and i ' m fine with your approach of counting any non-empty added line in the patch and actually, if the wizard counts added lines, why shouldn ' t it also count removed lines i decided to leave them blank by default, so i don ' t need to worry about different diff output formats which are out there so i don ' t quite understand why the same patterns that compare/patch already uses aren ' t the default for the line counting feature. i guess you ' re right martin, but this will make the patch a little bit more complicated as the current patching mechanism is not very helpful in counting added/removed lines the latest patch ensures, that when no regular expressions is provided, the patcher will use internal patterns to distinguish which lines have been added or deleted however, this will work only for patches in unified and context diff output format it looks like you are also counting empty lines, which doesn ' t seem overly useful to me. it ' s awsome that this is customizeable, but when i remember right, one reason for putting this enhancement into eclipse sdk was such that there is a "" common standard "" by which the projects count their lines in a patch on the other hand, having some magic like removing empty lines from the count going on in the background is perhaps a problem.. actually, it might be a good idea to have one additional kind of regex pattern in the preferences, which acts as a filter -- suggested tooltip behind // filter: ^[+-]\s*$ //filter for lines to not count, e.g. empty lines martin, i see your point when you ' re saying that the "" common standard "" should be as good as possible, however i would rather not to filter any lines from a patch when parsing here are the approaches so far 1) use only given filters, by default no counting will be made 2) by default count lines using the simple patterns, which are currently used when parsing a patch (ie "" + "" and "" - "" ), this can be modified in the pref page 3) by default count lines using more sophisticated patterns like excluding empty lines fyi, following regex suppresses lines in the patch from counting, which are empty or only contain non-wordchars (i.e. lines which only contain an } or only contain a * as continuation of an empty javadoc comment added: ^\+[^+]+[a-zA-Z0-9_!?""|@~`$%()+;,.:=+-]"
12,"""(207003) eclipse - [patch] wrong fuzz used after calculating the fuzz"" Date: '2007-10-21 08:46:46' From: 'tomasz zarna' created an attachment (id=80836) failing test case having bug 199846 released we can now use the fuzz factor currently, after calculating the fuzz factor has been done, the result will be used when applying the patch the problem is that the result can represent a bigger value than we actually need for some hunks this in combination with shifting can result in invalid hunks being applied in order to fix the issue, we should consider remembering the fuzz factor for each individual hunk (e.g. as a field in hunkresult class) i hope the attached test case illustrates the problem better than my description. Date: '2007-12-04 10:19:19' From: 'szymon brandys' the idea with the fuzz factor for each hunk is the way it is one of our priorities now. Date: '2007-12-06 13:39:20' From: 'tomasz zarna' created an attachment (id=84655) patch patch that changes matching strategy so now a fuzz factor is set and used individually for each hunk moreover, the fuzz factor entered in the patch preview wizard is now treated as a maximum fuzz factor for applying a patch (calculating the fuzz for each hunk) ps i ' ve also smuggled some polished comments. Date: '2007-12-06 13:39:26' From: 'tomasz zarna' created an attachment (id=84656) mylyn/context/zip Date: '2007-12-07 08:47:20' From: 'tomasz zarna' created an attachment (id=84727) "" can ' t find the fuzz "" test case test case showing that by default the guess button only tries to find the fuzz factor less or equal to the maximum_fuzz_factor (2) the fuzz required by the patch to be applied is 3. Date: '2007-12-07 16:34:46' From: 'tomasz zarna' the patch and both test cases released to head. Date: '2007-12-07 16:37:17' From: 'tomasz zarna' *** bug 211750 has been marked as a duplicate of this bug *** Date: '2007-12-11 11:18:33' From: 'tomasz zarna' verification based on the related tests results - all compare tests pass.","having bug 199846 released we can now use the fuzz factor the problem is that the result can represent a bigger value than we actually need for some hunks this in combination with shifting can result in invalid hunks being applied in order to fix the issue, we should consider remembering the fuzz factor for each individual hunk (e.g. as a field in hunkresult class) the idea with the fuzz factor for each hunk is the way patch that changes matching strategy so now a fuzz factor is set and used individually for each hunk moreover, the fuzz factor entered in the patch preview wizard is now treated as a maximum fuzz factor for applying a patch (calculating the fuzz for each hunk) test case showing that by default the guess button only tries to find the fuzz factor less or equal to the maximum_fuzz_factor (2) the fuzz required by the patch to be applied is 3."
13,"""(408506) eclipse - PlatformObject.getAdapter(Class) can return null for valid adapter due to race condition in AdapterFactoryProxy"" Date: '2013-05-20 12:58:19' From: 'brian vosburgh' we (dali) adapt the platform interface iproject to the dali interface projectresourcelocator this dali interface and its sole implementation, simpleprojectresourcelocator, are in the plug-in o.e.jpt.common.core the iadapterfactory that implements this adaptation is in the same plug-in and plugin.xml defining the corresponding extension to the o.e.core.runtime.adapters extension point is also in the same plug-in the problem intermittently, during start-up, a call to iproject.getadapter(projectresourcelocator.class) will return null with the first call but not null with subsequent calls the adapter factory is implemented in such a way that it will never return null so, apparently, the adapter factory is not invoked by the platform adapter manager this seems to be a bug, as the plug-in must have been loaded for the class projectresourcelocator to be resolved unfortunately, in a test workspace where this happens with every start-up, it never happens when executing under the debugger (even with no breakpoints whatsoever) is this expected behavior (i.e. that even though a plug-in is loaded, its adapter factories are not necessarily loaded) if not, can anyone offer any hints as to how we can investigate, sans the debugger, why the platform adapter manager does not invoke the appropriate adapter factory? Date: '2013-05-21 11:00:49' From: 'john arthorne' this is not expected behaviour to me it sounds like some kind of race condition where the bundle is not yet active at the time the adapter request comes in, although i don t see how that is possible if you are referencing a class from the plugin providing the adapter before-hand if suspending in debugger alters the timing, the only debugging technique i can think of is stdout messages in plugin startup, factory instantiation, and adapter lookup to start with. Date: '2013-05-24 12:11:47' From: 'neil hauge' brian and i have been looking at this issue, and after some println debugging were able to identify the cause of the race condition the root of this issue is in adapterfactoryproxy and its use of the factoryloaded flag the summary is that factoryloaded can be set to true and accessed by another thread as true before the actual factory has been assigned in the proxy this results in null being returned for an adapter factory that could be successfully loaded by has not yet been loaded details during workbench start-up, depending on the what the ui context is for a given workbench session, multiple dali jpa projects may end up being built concurrently in this situation, multiple threads end up making a call to iproject.getadatper(...) around the same time to retrieve a particular adapter that is needed to build a jpa project what ends up happening in the case where this fails (which is 50-75% of the time depending on the number and size of projects in the workspace) is - a call is made to iproject.getadatper(...) on thread a - the adapterfactoryproxy in question has already been pre-built, but the internal factory has not yet been loaded (it is lazily loaded) - adapterfactoryproxy.getadapter(...) calls loadfactory(...) to load the real adapterfactory, as factoryloaded is set to false - factoryloaded flag is set to true in loadfactory(...) before the factory instance var has been assigned - thread b has also called iproject.getadatper(...), which has gone to the proxy, where the factoryloaded check in getadapter(...) returns true but the factory itself has not yet been assigned and therefore not actually loaded - as a result, thread b s call to getadapter(...) returns a factory proxy that has a null internal factory, which results in a return value of null from adaptermanager.getadapter(...) proposed solution: i have attached a patch that solves the issue by changing when the factoryloaded flag is set to true the intended behavior of this flag should stay the same and avoid the race condition by setting the factoryloaded flag in a finally block since the factoryloaded flag is double-checked, it should prevent any redundant loading of the proxy s factory , given that the loadfactory(...) method is synchronized other notes the adapterfactoryproxy.loadfactory(...) method is synchronized, but the adapterfactoryproxy.getadapter(...) method is not, so we cannot rely on the synchronized loadfactory(...) method to prevent a race condition in relation to the factoryloaded flag. Date: '2013-05-24 12:12:43' From: 'neil hauge' created attachment 231487 proposed patch Date: '2013-05-27 10:25:59' From: 'john arthorne' great find! Date: '2013-07-16 11:10:55' From: 'john arthorne' reviewing this now neil to get the formalities out of the way, can you state here that your contribution complies with the coo http://www.eclipse.org/legal/coo.php Date: '2013-07-16 11:51:40' From: 'neil hauge' (in reply to comment #5) > reviewing this now neil to get the formalities out of the way, can you > state here that your contribution complies with the coo > > http://www.eclipse.org/legal/coo.php i confirm that the contribution complies with the coo in fact, i just now submitted my cla for eclipse. Date: '2013-07-17 11:19:32' From: 'john arthorne' released to master yesterday http://git.eclipse.org/c/equinox/rt.equinox.bundles.git/commit/?id=003ae109666066cce1aa56c25b39b6edc162926a Date: '2013-07-17 12:17:09' From: 'john arthorne' also released in kepler maintenance branch http://git.eclipse.org/c/equinox/rt.equinox.bundles.git/commit/?h=r3_9_maintenance&id=0dcfc65cad9dbe82f62eea6820b52e2967ab6e1d","intermittently, during start-up, a call to iproject.getadapter(projectresourcelocator.class) will return null with the first call but not null with subsequent calls the adapter factory is implemented in such a way that it will never return null so, apparently, the adapter factory is not invoked by the platform adapter manager if not, can anyone offer any hints as to how we can investigate, sans the debugger, why the platform adapter manager does not invoke the appropriate adapter factory? it sounds like some kind of race condition where the bundle is not yet active at the time the adapter request comes in, although i don t see how that is possible if you are referencing a class from the plugin providing the adapter before-hand if suspending in debugger alters the timing, the only debugging technique i can think of is stdout messages in plugin startup, factory instantiation, and adapter lookup to start with. the root of this issue is in adapterfactoryproxy and its use of the factoryloaded flag the summary is that factoryloaded can be set to true and accessed by another thread as true before the actual factory has been assigned in the proxy this results in null being returned for an adapter factory that could be successfully loaded by has not yet been loaded proposed solution: i have attached a patch that solves the issue by changing when the factoryloaded flag is set to true the intended behavior of this flag should stay the same and avoid the race condition by setting the factoryloaded flag in a finally block the adapterfactoryproxy.loadfactory(...) method is synchronized, but the adapterfactoryproxy.getadapter(...) method is not, so we cannot rely on the synchronized loadfactory(...) method to prevent a race condition in relation to the factoryloaded flag."
14,"""(279721) eclipse - mysqlcatalogdatabase.refresh() does not"" Date: '2009-06-09 20:20:13' From: 'brian vosburgh' when i call mysqlcatalogdatabase.refresh(), the single schema held by the database is not refreshed the refresh event is sent to the appropriate listeners but when a listener comes back to the database to get the new schemas, they are stale notes the mysqlcatalogdatabase flags ' schemasloaded ' and ' catalogsloaded ' seem to be unused - they are never set to boolean.true the flag ' schemasloaded ' is set to boolean.false in refresh(), but the schemas are still loaded.... Date: '2009-06-10 11:26:10' From: 'brian fitzpatrick' ok i ' ll take a look at this Date: '2009-08-27 18:27:29' From: 'brian fitzpatrick' created an attachment (id=145871) possible patch this should fix the setting of the flags accordingly.. if you have a chance to test, that would be great works fine here, but i can ' t quite repro the issue you have either. Date: '2009-09-02 11:29:57' From: 'brian fitzpatrick' bumping to 1.7.2 brian v - if you get a chance to test it, we ' ll try and get it into an early build of 1.7.2 or whatever we ' re doing for helios Date: '2010-05-18 11:26:15' From: 'brian fitzpatrick' once again, this is going to have to get pushed to "" future "" because we just don ' t have the manpower sorry. Date: '2012-05-18 13:15:04' From: 'pierre queinnec' hi guys, i committed the fix, with an added modification on super.refresh(). this works fine here and refreshes correctly (i tested on sp and udf modifications) brian (v.) could you comment further if that's not the correct fix you were expecting many thanks. see http://git.eclipse.org/c/datatools/org.eclipse.datatools.enablement.mysql.git/commit/?id=026b00d06ac8ba593abef046f3bbcb91fe712fd6","when i call mysqlcatalogdatabase.refresh(), the single schema held by the database is not refreshed the refresh event is sent to the appropriate listeners but when a listener comes back to the database to get the new schemas, they are stale the mysqlcatalogdatabase flags ' schemasloaded ' and ' catalogsloaded ' seem to be unused - they are never set to boolean.true the flag ' schemasloaded ' is set to boolean.false in refresh(), but the schemas are still loaded.... this should fix the setting of the flags accordingly.. if you have a chance to test, that would be great brian v - if you get a chance to test it, we ' ll try and get it into an early build of 1.7.2 or whatever we ' re doing for helios once again, this is going to have to get pushed to "" future "" because we just don ' t have the manpower hi guys, i committed the fix, with an added modification on super.refresh(). this works fine here and refreshes correctly (i tested on sp and udf modifications)"
15,"""(241557) eclipse - postgresql sequences not supported"" Date: '2008-07-21 11:40:38' From: 'brian vosburgh' when i create a sequence on my postgresql database then query for it via org.eclipse.datatools.modelbase.sql.schema.schema#getsequences() only an empty collection is returned. Date: '2008-07-21 12:33:17' From: 'brian fitzpatrick' setting to future hopefully we can get some help with the postgresql support Date: '2011-08-07 13:47:39' From: 'pierre queinnec' hi guys, the following patch hopefully makes dtp support postgresql sequences. let me know if it looks good or not if it fits, i'll come up with other patches for better postgres support. thanks! Date: '2011-08-07 13:48:14' From: 'pierre queinnec' created attachment 201049 [details] pg sequences support pg sequences support Date: '2011-10-05 03:48:02' From: 'pierre queinnec' created attachment 204568 [details] patch in egit default format patch exported without checking git format in egit. Date: '2011-10-06 15:55:33' From: 'brian payton' it's odd, but the patch file itself doesn't have any indication inside it as to which projects the patch changes apply this seems like an egit bug to me (when creating a patch file with cvs, the patch file includes ""#p <plugin name>"" records.) i was able to apply the patch, but i had to figure out which changes apply to which plugins, and apply the patch twice. it would be helpful for future patches to create the patch for one plugin at a time, and indicate which plugin it applies to (perhaps as part of the patch name). Date: '2011-10-06 16:07:26' From: 'brian payton' another odd thing created a local branch ""bug359861"" for these changes, based on my local master branch when i applied the changes for the patch, the file updates went into the bug branch, but new files that i had to do an ""add"" for went into my local master branch that seems like another egit bug to me. i'll keep my fingers crossed that everything will flow through ok when i merge the bug branch into my local master branch and then push everything to the remote repository. Date: '2011-10-06 16:12:54' From: 'brian payton' well, i might be wrong about the add acting differently from other updates one way or another, the changes got into my local master. Date: '2011-10-06 16:59:40' From: 'brian payton' here are the git commit links for the changes for this bug (also includes changes for 359861.) http://git.eclipse.org/c/datatools/org.eclipse.datatools.enablement.postgresql.git/commit/?id=65b7da3697e2d4805f006fd8337c2ac913b819d9 http://git.eclipse.org/c/datatools/org.eclipse.datatools.enablement.postgresql.git/commit/?id=117eaa9b47f1d3983b578f7d4ee3feb64605dfe7","when i create a sequence on my postgresql database then query for it via org.eclipse.datatools.modelbase.sql.schema.schema#getsequences() only an empty collection is returned. if it fits, i'll come up with other patches for better postgres support. thanks! created attachment 201049 [details] pg sequences support created attachment 204568 [details] patch in egit default format patch exported without checking git format in egit. it's odd, but the patch file itself doesn't have any indication inside it as to which projects the patch changes apply this seems like an egit bug to me (when creating a patch file with cvs, the patch file includes ""#p <plugin name>"" records.) i was able to apply the patch, but i had to figure out which changes apply to which plugins, and apply the patch twice. it would be helpful for future patches to create the patch for one plugin at a time, and indicate which plugin it applies to (perhaps as part of the patch name). when i applied the changes for the patch, the file updates went into the bug branch, but new files that i had to do an ""add"" for went into my local master branch i'll keep my fingers crossed that everything will flow through ok when i merge the bug branch into my local master branch and then push everything to the remote repository. one way or another, the changes got into my local master."
16,"""(410528) eclipse - [CommonNavigator] ProjectExplorer should use its viewer s label provider to build its content description"" Date: '2013-06-11 15:22:14' From: 'brian vosburgh' currently, projectexplorer.updatetitle() sets the part s content description (which is displayed at the top of the view s tree whenever the user uses the go into context command to change the tree s root) by first attempting to adapt the viewer s input to iworkbenchadapter and using that adapter to build a label the resulting label is used for the content description if this is not successful, the content description is simply set to the result of calling tostring() on the input it seems like the appropriate way to build the content description would be to use the already available label provider especially since it seems the purpose of iworkbenchadapter is to be used by a universal label provider, not directly by the viewer. Date: '2013-06-11 15:42:53' From: 'brian vosburgh' pushed a patch to gerrit https://git.eclipse.org/r/13758 i hope i know what i m doing... please let me know if i ve screwed it up. Date: '2013-06-21 14:58:41' From: 'paul webster' francis, the only question i have is should it do the iworkbenchadapter first and then switch to the label provider if that doesn t work pw Date: '2013-06-21 15:56:25' From: 'francis upton iv' (in reply to comment #2) > francis, the only question i have is should it do the iworkbenchadapter > first and then switch to the label provider if that doesn t work i think trying the cn label provider first is better, that gives better local control, so i like the way brian did that i think i reviewed and released it (but it won t show the committer as me, any way to fix that, or should i go something different in gerrit) http://git.eclipse.org/c/platform/eclipse.platform.ui.git/commit/?id=d5f4e3d2d6eabbfa9bf71d25c3b3f41366d1ef6d brian, can you verify this is correct in the next nightly or i build and then mark this bug report as verified? Date: '2013-06-21 16:02:12' From: 'paul webster' (in reply to comment #3) > i think i reviewed and released it (but it won t show the committer as me, > any way to fix that, or should i go something different in gerrit) no, that s the way it works if we auto-rebase it, gerrit becomes the committer, but the efoundation is fine with that as they still have the gerrit review record thanks, paul Date: '2013-07-02 15:47:26' From: 'brian vosburgh' verified with i20130625-0800 thanks!","currently, projectexplorer.updatetitle() sets the part s content description (which is displayed at the top of the view s tree whenever the user uses the go into context command to change the tree s root) by first attempting to adapt the viewer s input to iworkbenchadapter and using that adapter to build a label the resulting label is used for the content description if this is not successful, the content description is simply set to the result of calling tostring() on the input it seems like the appropriate way to build the content description would be to use the already available label provider especially since it seems the purpose of iworkbenchadapter is to be used by a universal label provider, not directly by the viewer. francis, the only question i have is should it do the iworkbenchadapter first and then switch to the label provider if that doesn t work i think trying the cn label provider first is better, that gives better local control, so i like the way brian did that brian, can you verify this is correct in the next nightly or i build and then mark this bug report as verified? if we auto-rebase it, gerrit becomes the committer, but the efoundation is fine with that as they still have the gerrit review record verified with i20130625-0800"
17,"""(274556) eclipse - regression: illegalstateexception thrown when annotation contains a corrupt array of other annotations"" Date: '2009-04-30 13:27:52' From: 'brian vosburgh' created an attachment (id=133972) example stacktrace previous to m6 dali was a bit flaky when it encountered "" corrupt "" arrays of nested annotations example @joincolumns({@joincolumn(name= "" foo "" ), 42, @joincolumn(name= "" bar "" )}) sometimes dali would seemingly ignore some of the sibling legitimate annotations sometimes it wouldn ' t (i.e. the legitimate nested annotations would only sometimes show up in the jpa details view) when the user edited one of the nested annotations (via the jpa details view), various of the other nested annotations would be simply wiped out of the source recent changes to the code for handling nested annotations has caused dali to throw an exception in this situation an example stacktrace is attached. Date: '2009-04-30 13:32:48' From: 'brian vosburgh' created attachment 133974 [details] proposed patch this patch attempts to fix both the current exception and the previous flakiness any "" bogus "" element in an array of nested annotations will be treated as an empty nested annotations the jpa details view will display the appropriate defaults etc if the user use the jpa details view to edit the corresponding entry, the "" bogus "" element will be replaced with a legal nested annotation with the user edits applied. Date: '2009-05-18 19:42:04' From: 'neil hauge' fixed by the fix for bug 274692.","previous to m6 dali was a bit flaky when it encountered "" corrupt "" arrays of nested annotations @joincolumns({@joincolumn(name= "" foo "" ), 42, @joincolumn(name= "" bar "" )}) sometimes dali would seemingly ignore some of the sibling legitimate annotations sometimes it wouldn ' t (i.e. the legitimate nested annotations would only sometimes show up in the jpa details view) recent changes to the code for handling nested annotations has caused dali to throw an exception in this situation this patch attempts to fix both the current exception and the previous flakiness any "" bogus "" element in an array of nested annotations will be treated as an empty nested annotations"
18,"""(260502) eclipse - adaptermanager.computeclassorder(class) implementation does not match iadaptermanager javadoc"" Date: '2009-01-09 00:28:54' From: 'brian vosburgh' here is the javadoc for iadaptermanager.computeclassorder(class) returns the class search order for a given class the search order from a class with the definition class x extends y implements a, b is as follows - the target ' s class x - x ' s superclasses in order to object - a breadth-first traversal of the target class ' s interfaces in the order returned by getinterfaces (in the example, a and its superinterfaces then b and its superinterfaces) this comment is not perfectly clear in particular, it does not complete the example by explicitly listing the exact order the example classes and interfaces are returned i came up with a slightly richer example interface a extends m, n interface b extends o class y implements c, d class x extends y implements a, b [the declarations for interfaces c, d, m, n, and o are trivial.] the order of classes and interfaces returned by adaptermanager.computeclassorder(x) is class x interface a interface b interface m interface n interface o class y interface c interface d class java.lang.object this conflicts with the javadoc the class x is the first thing returned, but it is *not* followed by "" x ' s superclasses in order to object "" it is followed by a breadth-first list of x ' s interface hierarchy "" , *then* followed by x ' s superclass y, which is then followed by a breadth-first list of y ' s interface hierarchy and so on, up to java.lang.object also, the javadoc has what reads to me as a contradiction a breadth-first traversal of the target class ' s interfaces in the order returned by getinterfaces vs in the example, a and its superinterfaces then b and its superinterfaces what actually happens *does* feel like a "" breadth-first "" search but that would not be accurately described as "" a and its superinterfaces then b and its superinterfaces "" but maybe i ' m reading it wrong... it might be worth discussing which is the "" preferred "" behavior the behavior described by the javadoc or the behavior implemented in adaptermanager in some ways having all the classes first, followed by the interfaces might make more sense than the current implementation... but, then you have the whole "" backward-compatibility "" thing to worry about.... Date: '2009-01-09 10:58:43' From: 'john arthorne' you are right on both counts the implementation doesn ' t match the spec, and there is a contradiction in the spec itself now the question is what do we do about it - for the contradiction, i think we should stick with the breadth-first search, and delete the parenthetic comment about the example ( "" a and its superinterfaces then b and its superinterfaces "" ) - for the spec not matching the behaviour, my instinct is to "" fix "" the spec to match the implementation, to avoid the risk of breaking clients this would be a very subtle change that could affect clients in unpredictable ways on the other hand if there are really compelling reasons to change the implementation to match the spec, i ' d be curious to hear them i did some research and found that the implementation did match the spec until febuary 20, 2004, when i change the implementation at that time the spec wasn ' t part of the api the spec was later added to the api (iadaptermanager#computeclassorder) without checking that the implementation still matched i ' m going to do some more archeology to see if i can figure out why i changed the lookup order. Date: '2009-01-09 11:51:01' From: 'brian vosburgh' it would be interesting to know what triggered the change in behavior i guess the question is whether superclasses take precedence over interfaces defined lower in the hierarchy, i.e. does the implementation take precedence over the specification i can see arguments for either way but i guess i would probably come down on the side of giving specification precedence so, i guess you argue further that all the interfaces could precede all the classes argh...why did i even ask anyway, i don ' t have any use cases at the moment to argue one way or the other it ' s just that my curiosity got the better of me, after years of wondering, "" just how does the platform resolve which adapter to return Date: '2009-01-12 12:02:41' From: 'john arthorne' it looks like this change was made inadvertently during a large batch of changes to add support for the adapters extension point (bug 32498) i think since this change was introduced accidentally, and this is a clear violation of a long-standing specification, i ' m leaning towards fixing the implementation i noticed the spec also doesn ' t mention the interfaces of the target class ' superclasses i think the corrected spec should read * < ul > * < li > the target ' s class x * < li > x ' s superclasses in order to < code > object < /code > * < li > a breadth-first traversal of the target class ' s interfaces in the * order returned by < code > getinterfaces < /code > (in the example, x and its * superinterfaces then y and its superinterfaces) < /li > * < /ul > note that the comment changed to "" x and its superinterfaces then y.. "" as opposed to "" a and its superinterfaces then b.. thus this clarifies how the interfaces of superclasses are considered, while fixing the contradiction in the specification of interface search order. Date: '2009-01-12 12:03:42' From: 'john arthorne' created an attachment (id=122293) fix v01 Date: '2009-01-12 12:11:27' From: 'john arthorne' created an attachment (id=122297) test case this is a test case using your richer example Date: '2009-01-13 10:47:18' From: 'john arthorne' fix and tests released to head. Date: '2009-01-13 11:57:25' From: 'brian vosburgh' sounds reasonable one tiny nit-pick though the last entry in the bullet list now reads a breadth-first traversal of each class ' s interfaces in the order returned by < code > getinterfaces < /code > (in the example, x and its superinterfaces then y and its superinterfaces) < /li > it might be more accurate to say a breadth-first traversal of each class ' s interfaces in the order returned by < code > getinterfaces < /code > (in the example, x ' s superinterfaces then y ' s superinterfaces) since x and y are not actually included in the "" traversal "" thanks. Date: '2009-01-13 13:05:18' From: 'john arthorne' good point, i have released this clarification to head thanks again.","the search order from a class with the definition class x extends y implements a, b is as follows x - x ' s superclasses in order to object - a breadth-first traversal of the target class ' s interfaces in the order returned by getinterfaces (in the example, a and its superinterfaces then b and its superinterfaces) this comment is not perfectly clear in particular, it does not complete the example by explicitly listing the exact order the example classes and interfaces are returned also, the javadoc has what reads to me as a contradiction but that would not be accurately described as "" a and its superinterfaces then b and its superinterfaces "" in some ways having all the classes first, followed by the interfaces might make more sense than the current implementation... - for the contradiction, i think we should stick with the breadth-first search, and delete the parenthetic comment about the example ( "" a and its superinterfaces then b and its superinterfaces "" ) - for the spec not matching the behaviour, my instinct is to "" fix "" the spec to match the implementation, to avoid the risk of breaking clients the spec was later added to the api (iadaptermanager#computeclassorder) without checking that the implementation still matched i guess the question is whether superclasses take precedence over interfaces defined lower in the hierarchy, i.e. does the implementation take precedence over the specification it looks like this change was made inadvertently during a large batch of changes to add support for the adapters extension point (bug 32498) i think since this change was introduced accidentally, and this is a clear violation of a long-standing specification, i ' m leaning towards fixing the implementation"
19,"""(111414) eclipse - open type dialog: ' fully qualify duplicates ' does not work as expected"" Date: '2005-10-04 04:50:14' From: 'dani megert' i20050928-1300 the menu ' fully qualify duplicates ' in the open type dialog does not affect the qualification (which is always on for duplicates) but actually appends the container info. Date: '2005-10-05 05:35:01' From: 'martin aeschlimann' i agree that the names are quite confusing ' fully qualified ' normally means including package here it means including container info suggestion ' show container for duplicates ' this conflicts with the ' show container info ' which i would call, ' show status line ' dirk, why is the first option only for duplicates why would you want it there, but not for the rest could the option be removed? Date: '2005-10-10 16:48:58' From: 'dirk baeumer' the feature works as follows - if fully qualify duplicates is unchecked two types with the same name are qualified until they "" name "" is unique - if fully qualify duplicates is checked two types with the same name are are alqays qualified with the full container path so the feature works as expected (dani, if you disagree please provide a test case) however, i can ' t come up with a better name which is short the option is there to not always qualify the names this would make reading the names even harder. Date: '2005-10-11 05:11:24' From: 'dani megert' > so the feature works as expected (dani, if you disagree please provide a test > case) i was interpreting ' fully qualify ' as the package qualification only and hence expected that ' fully qualify duplicates ' would affect the package qualification for duplicates which it doesn ' t now that the function has been explained it boils down to the naming of the menu entries though ' full path ' is not saying much it ' s not conflicting with known terms and it is also used in the search view i also like martin ' s suggestion to rename the other item ' show status line ' this would make it clear and would even allow to remove the separator, making the menu smaller and nicer. Date: '2005-10-11 09:01:26' From: 'dirk baeumer' fixed by changing the names and reordering the menu. Date: '2005-11-01 05:59:08' From: 'benno baumgartner' verified using i20051031-2000 dirk can you set it to verified i can ' t. Date: '2005-11-01 06:14:31' From: 'dirk baeumer' setting to verified.","i20050928-1300 the menu ' fully qualify duplicates ' in the open type dialog does not affect the qualification (which is always on for duplicates) but actually appends the container info. i agree that the names are quite confusing ' fully qualified ' normally means including package here it means including container info suggestion ' show container for duplicates ' this conflicts with the ' show container info ' which i would call, ' show status line ' dirk, why is the first option only for duplicates the feature works as follows - if fully qualify duplicates is unchecked two types with the same name are qualified until they "" name "" is unique - if fully qualify duplicates is checked two types with the same name are are alqays qualified with the full container path i was interpreting ' fully qualify ' as the package qualification only and hence expected that ' fully qualify duplicates ' would affect the package qualification for duplicates which it doesn ' t i also like martin ' s suggestion to rename the other item ' show status line ' this would make it clear and would even allow to remove the separator, making the menu smaller and nicer. fixed by changing the names and reordering the menu. setting to verified."
20,"""(123466) eclipse - [viewers] strange dots in table item labels"" Date: '2006-01-11 12:06:51' From: 'dani megert' i20060110-1026 i can no longer click some elements in the packages view and suddenly the label gets corrupted into"" org.ec.."" test case 1. start attached workspace 2. select project ' foo ' in the package explorer 3. select ' org.eclipse.jface.text ' in the packages view 3. expand ' foo ' in the package explorer 4. select ' src ' == > strange label "" org.ec.. this works with i200605-0800 plus jdt ' s build input for i20060110-1026 Date: '2006-01-11 12:14:38' From: 'dani megert' created an attachment (id=32846) test workspace Date: '2006-01-13 08:41:12' From: 'kim horne' this used to happen back in the 3.0 days (bug 56593) when we explicitly set the font on a particular item... Date: '2006-01-13 09:14:44' From: 'boris bokowski' moving to swt since this looks like a regression at the swt level i did not change anything related to labels recently. Date: '2006-01-13 09:19:50' From: 'dani megert' boris, i saw that a new labledecorator got added with i20060110-1026 i don ' t know the details about it but thought it might be related. Date: '2006-01-13 09:44:33' From: 'boris bokowski' tod, could it be that this was caused by the patch from bug 121623? Date: '2006-01-13 10:08:27' From: 'tod creasey' no i wouldn ' t think so - bug 121623 is just a way of passing context but it doesn ' t change how decoration is done Date: '2006-01-24 06:19:32' From: 'dani megert' any update on this one? Date: '2006-01-31 05:45:19' From: 'dani megert' ping. Date: '2006-01-31 13:54:04' From: 'beatriz iaderoza' would you be able to send me a screenshot of the bug i opened your workspace with the latest built (20060118-1600) and i don ' t get the strange label problem you do thanks. Date: '2006-02-01 04:11:08' From: 'dani megert' > would you be able to send me a screenshot of the bug i opened your workspace > with the latest built (20060118-1600) sure, but as far as i know the latest build is i20060131-1200 here my steps again 1. download eclipse sdk build i20060131-1200 for windowsxp 2. extract the attached workspace to c: 3. start eclipse using -data c:\tmp == > picture 1 4. execute step 2 to 4 from comment 0 == > picture 2 Date: '2006-02-01 04:11:48' From: 'dani megert' created an attachment (id=33926) picture 1 Date: '2006-02-01 04:12:14' From: 'dani megert' created an attachment (id=33927) picture 2 Date: '2006-02-01 15:00:54' From: 'beatriz iaderoza' thanks for the screenshots you were right, the labels are appearing strange it seems to be modifying the name that was last selected before clicking on another view note:Also tested with Version: 3.1.1, Build id: M20050929-0840 and the bug is not present. Date: '2006-02-02 02:27:34' From: 'dani megert' > Note: Also tested with Version: 3.1.1, Build id: M20050929-0840 and the bug is not present. mmh, i never said it didn ' t work there, did i i first saw the bug in i20060110-1026, as indicated in comment 0 once the dots appear i often can ' t select the top item any longer. Date: '2006-02-02 09:16:35' From: 'beatriz iaderoza' no you did not, we usually add comments to the bug to save time for the person that is fixing it. Date: '2006-02-03 10:47:46' From: 'markus keller' *** bug 124850 has been marked as a duplicate of this bug *** Date: '2006-02-03 12:03:54' From: 'markus keller' we already had something like that in bug 54057, which has probably been solved by the fix for bug 57426 could it be that the support for background images has a similarly adverse effect as the support for fonts had? Date: '2006-02-03 13:13:03' From: 'steve northover' yes, there have been many changes since 3.1.x. Date: '2006-02-15 00:23:46' From: 'steve northover' i have a handle on this one it was caused by the fix for bug 117700. Date: '2006-02-15 22:48:48' From: 'steve northover' actually, it turned out to be caused by the fix for bug 119207. Date: '2006-02-15 22:53:42' From: 'steve northover' fixed > 20060215 vi, we should consider this for m5. Date: '2006-02-16 11:32:09' From: 'veronika irvine' *** bug 127838 has been marked as a duplicate of this bug *** Date: '2006-02-20 11:09:32' From: 'dani megert' verified in 3.2 m5 (i20060217-1115).","i20060110-1026 i can no longer click some elements in the packages view and suddenly the label gets corrupted into"" org.ec.."" this works with i200605-0800 plus jdt ' s build input for i20060110-1026 this used to happen back in the 3.0 days (bug 56593) when we explicitly set the font on a particular item... moving to swt since this looks like a regression at the swt level boris, i saw that a new labledecorator got added with i20060110-1026 would you be able to send me a screenshot of the bug it seems to be modifying the name that was last selected before clicking on another view actually, it turned out to be caused by the fix for bug 119207. verified in 3.2 m5 (i20060217-1115)."
21,"""(219570) eclipse - [sync view] "" link with editor "" for synchronize view"" Date: '2008-02-20 05:16:48' From: 'dani megert' i20080219-1124 due to low bandwidth i often start my update or commit work by clicking on several files in the synchronize view this way other files load and comparison starts while i review the changes of the first file now, my problem is that when i switch to another compare editor, the file is not automatically selected in the synchronize view there are two feature i ' d like to see add the synchronize view as ' show in ' target 2 add the commonly known ' link with editor ' tool bar button and/or view menu item Date: '2008-02-20 09:10:11' From: 'tomasz zarna' (in reply to comment #0) > i20080219-1124 > > due to low bandwidth i often start my update or commit work by clicking on > several files in the synchronize view this way other files load and comparison > starts while i review the changes of the first file > > now, my problem is that when i switch to another compare editor, the file is not > automatically selected in the synchronize view if i ' ve understood you correctly after you switch to another compare editor the several files you clicked on in the sync view are still selected would you like to loose the selection > there are two feature i ' d like to see > 1. add the synchronize view as ' show in ' target > 2. add the commonly known ' link with editor ' tool bar button and/or view menu > item would you like them to have in both compare and non-compare editors? Date: '2008-02-20 09:20:16' From: 'dani megert' > if i ' ve understood you correctly after you switch to another compare editor the > several files you clicked on in the sync view are still selected would you > like to loose the selection yes, exactly as it works in all other views that allow linking i don ' t have > 1 selected as i clicked each of them to open the compare editor and hence only the last one was selected > would you like them to have in both compare and non-compare editors i ' m happy if it works with the compare editor but normally back-linking works for all editor parts. Date: '2009-07-21 03:58:45' From: 'szymon brandys' *** bug 284083 has been marked as a duplicate of this bug *** Date: '2009-08-11 05:26:56' From: 'corneliud dirmeier' due to style-guidelines 7.21 and 13.3 both features should be implemented. Date: '2009-10-01 07:27:13' From: 'tomasz zarna' created an attachment (id=148515) fix v01 patch that adds linking when sync ' ed using workspace model (i guess with models turned off it will work as well) it ' s a working copy, so do not apply it ' s still missing couple of things * ishowintarget is not implemented yet * linking doesn ' t work for editors that do not adapt to ifile.class * only ifile or istorageeditorinput based elements are selected in the sync tree when linking, won ' t work for java workspace sync for instance Date: '2009-10-01 07:27:19' From: 'tomasz zarna' created an attachment (id=148516) mylyn/context/zip Date: '2009-10-01 10:13:00' From: 'tomasz zarna' do you think that making the "" link with editor "" action enabled only for non-model or workspace model synchronizations is acceptable for other types i would disable the action (for now) and file a separate bug to address it this would make the fix, in it ' s current shape, available pretty soon. Date: '2009-10-01 10:18:49' From: 'dani megert' > do you think that making the "" link with editor "" action enabled only for > non-model or workspace model synchronizations is acceptable for me yes, and since it ' s limited scope i would probably not even add a toolbar button but simply add it to the view menu. Date: '2009-10-01 10:30:41' From: 'tomasz zarna' sounds good to me and put it back on the toolbar with the other bug as soon as linking starts to work for all synchronizations (i.e. including models)? Date: '2009-10-01 10:53:21' From: 'tomasz zarna' created an attachment (id=148537) fix v02 sync view as "" show in "" target available in synchronize perspective. Date: '2009-10-01 12:04:33' From: 'dani megert' (in reply to comment #9) > sounds good to me and put it back on the toolbar with the other bug as soon as > linking starts to work for all synchronizations (i.e. including models) yes, though i could also live without that button i doubt people are going to toggle this frequently. Date: '2009-10-02 02:08:46' From: 'corneliud dirmeier' (in reply to comment #11) > (in reply to comment #9) > > sounds good to me and put it back on the toolbar with the other bug as soon as > > linking starts to work for all synchronizations (i.e. including models) > yes, though i could also live without that button i doubt people are going to > toggle this frequently in other views like package-explorer i use this button frequently so a button in view-toolbar would be useful for first iteration a menu entry is admissible. Date: '2009-10-02 02:16:11' From: 'dani megert' > in other views like package-explorer i use this button frequently yes me too, but i guess i won ' t toggle it often in the sync view, e.g. i also never disable it in the history view anyway, i also don ' t care if it ' s there by default just make sure to put it into an action set so, that i can remove it. Date: '2009-10-02 04:36:39' From: 'dani megert' > i also don ' t care if it ' s there by default just make sure to put it into an > action set so, that i can remove it forget this action sets are only for the main toolbar. Date: '2009-10-02 11:34:46' From: 'tomasz zarna' created an attachment (id=148657) fix v03 this is an updated version of the patch that imo is ready to be committed however, it ' s still missing bunch of things (see bug 291212, bug 291213, bug 291214, bug 291215) so if you think any of these is a no-go for this patch to be applied please let me know. Date: '2009-10-02 12:31:13' From: 'markus keller' i have not tried the patch, but when i glanced though it, i didn ' t see any command id being used for the togglelinkingaction iworkbenchcommandconstants.navigate_toggle_link_with_editor should be used as actiondefinitionid in the package explorer, we handle activation in packageexploreractiongroup.setglobalactionhandlers(iactionbars). Date: '2009-10-05 03:47:29' From: 'tomasz zarna' *** bug 249919 has been marked as a duplicate of this bug *** Date: '2009-10-05 04:32:05' From: 'tomasz zarna' created an attachment (id=148740) fix v04 added iworkbenchcommandconstants.navigate_toggle_link_with_editor as actiondefinitionid for togglelinkingaction. Date: '2009-10-05 06:26:44' From: 'dani megert' > so if you think any of these is a no-go for this patch to > be applied please let me know for me it ' s useless given the current limitations as 1. my main use case is to link from compare editor to view and not the other way around (not working due to bug 291213) 2. i use the old non-model based sync (bug 291215) Date: '2009-10-05 07:18:08' From: 'tomasz zarna' all right, at least i now know which bugs i should fix first thanks for the comment. Date: '2009-10-16 06:14:12' From: 'tomasz zarna' created an attachment (id=149732) fix v05 final version of the patch to be committed simultaneously with fixes for bug 291215, bug 291214 and bug 291213. Date: '2009-10-16 06:52:20' From: 'tomasz zarna' applied to head, available in builds > n20091015-2000 bug 291213 no longer blocks this one. Date: '2009-10-28 04:40:26' From: 'dani megert' verified in i20091027-0100 works great remaining issue the view menu action has not mnemonic (bug 293542 ).","this way other files load and comparison starts while i review the changes of the first file now, my problem is that when i switch to another compare editor, the file is not automatically selected in the synchronize view add the synchronize view as ' show in ' target 2 add the commonly known ' link with editor ' tool bar button and/or view menu item if i ' ve understood you correctly after you switch to another compare editor the several files you clicked on in the sync view are still selected patch that adds linking when sync ' ed using workspace model (i guess with models turned off it will work as well) it ' s still missing couple of things for me yes, and since it ' s limited scope i would probably not even add a toolbar button but simply add it to the view menu. and put it back on the toolbar with the other bug as soon as linking starts to work for all synchronizations (i.e. including models)? so a button in view-toolbar would be useful yes me too, but i guess i won ' t toggle it often in the sync view, e.g. i also never disable it in the history view added iworkbenchcommandconstants.navigate_toggle_link_with_editor as actiondefinitionid for togglelinkingaction. final version of the patch to be committed simultaneously with fixes for bug 291215, bug 291214 and bug 291213."
22,"""(220730) eclipse - no way to get rid of api tooling errors"" Date: '2008-02-28 07:06:47' From: 'dani megert' i have o.e.ui.console as source in my workspace when i updated from head i got an api error on the project and in the problems view (a default api profile has not been set for the current workspace) neither cleaning and rebuilding nor replacing with an earlier version of the project makes the error go away i then tried to close and reopen - no luck please don ' t introduce yet another problem kind that doesn ' t go away on clean clean should do what it says clean. Date: '2008-02-28 09:11:08' From: 'darin wright' it ' s possible the error does go away on clean - but probably comes back as soon as you build this is to alert users that are using api tooling that they need to set up a baseline, else the tooling will not do binary compatible checks we should probably do this a different way. Date: '2008-02-28 09:23:22' From: 'dani megert' > but probably comes back as soon as you build note that it stayed even after having replaced the project with another version which was not yet converted. Date: '2008-02-28 09:39:51' From: 'darin wright' interesting - we have a listener that looks for this (i.e. changing project nature to no longer have api tooling) we know that it only works if api tooling was somehow invoked before the replace happened so if you did this immediately after a workspace re-start, the code would not be invoked (as the listener would not be registered). Date: '2008-02-28 09:49:54' From: 'dani megert' i never started the tooling myself i did this 1. update from head == > error 2. team > replace with other verion == > error still here Date: '2008-02-29 13:53:04' From: 'darin wright' for this one, i think we should start by marking the error a warning (i.e. no baseline set up) this way, users can load projects from cvs and still use them without errors (and without using api tooling binary compatibility analysis) i thought it would be nice to have one workspace "" error "" , but i don ' t think that markers on the workspace root will ever appear in the problems view perhaps we could also make this problem have a configurable severity that default to warning note re cleaning problems - our builder does clean its problems on clean, but if you remove the builder, it cannot clean its problems we do clean problems if your remove the builder and api tooling is "" loaded "" , but is possible to start a workspace with problems and replace from head without ever invoking our builder/tooling i don ' t see a way to fix this. Date: '2008-02-29 20:11:28' From: 'olivier thomann' released for 3.4m6 darin, please verify. Date: '2008-03-17 14:44:15' From: 'michael rennie' verified.","i have o.e.ui.console as source in my workspace when i updated from head i got an api error on the project and in the problems view (a default api profile has not been set for the current workspace) neither cleaning and rebuilding nor replacing with an earlier version of the project makes the error go away i then tried to close and reopen - no luck it ' s possible the error does go away on clean - but probably comes back as soon as you build this is to alert users that are using api tooling that they need to set up a baseline, else the tooling will not do binary compatible checks interesting - we have a listener that looks for this (i.e. changing project nature to no longer have api tooling) so if you did this immediately after a workspace re-start, the code would not be invoked (as the listener would not be registered). for this one, i think we should start by marking the error a warning (i.e. no baseline set up) this way, users can load projects from cvs and still use them without errors (and without using api tooling binary compatibility analysis) we do clean problems if your remove the builder and api tooling is "" loaded "" , but is possible to start a workspace with problems and replace from head without ever invoking our builder/tooling"
23,"""(306736) eclipse - [workbench] contributed sourceprovider can cause troubles on start"" Date: '2010-03-22 12:06:53' From: 'dani megert' i20100316-0859 in workbench.init() we read the source providers of the ' org.eclipse.ui.services ' extension point and there all extensions are immediately loaded (createexecutableextension) no matter whether the contributing bundle is already started unfortunately this happens before the workbench itself is correctly initialized (workbench colors in this particular case) this can cause troubles for upstream bundles that expect the workbench colors and/or fonts to be present when they get loaded it would be good if the workbench could initialize as much as possible before calling code that starts other bundles we should either - protect the code to not load those extensions we do similar things e.g. when loading the handler service (see org.eclipse.ui.internal.handlers.handlerproxy.isoktoload() the hard part here is to make sure that the extension which aren ' t loaded still work somehow, e.g. by adding a proxy - initialize default services after colors and fonts (this might be the simplest fix but would need extensive testing). Date: '2010-03-22 12:27:06' From: 'dani megert' created attachment 162690 patch to make the bug appear this patch allows to reproduce the problem 1. load ' org.eclipse.jdt.ui ' from cvs with tag=v20100316-0800 2. start a target workspace == > boom! Date: '2010-03-22 12:31:08' From: 'dani megert' re comment 1 (test case) after step 1 the attached patch needs to be loaded before starting the target workbench (sorry forgot that step). Date: '2010-04-27 12:24:53' From: 'paul webster' i could move the actual instantiation to the same place as the early startup extensions by that time, the workbench is initialized but we haven ' t made the windows themselves visible pw Date: '2010-05-07 14:28:47' From: 'paul webster' created attachment 167525 move source providers to later during initialization v01 the source providers can be initialized after almost all of the workbench initialization as long as they are done before the advisor tries to restore any open windows pw Date: '2010-05-07 15:18:22' From: 'paul webster' (in reply to comment #1) > created an attachment (id=162690) [details] > patch to make the bug appear > > this patch allows to reproduce the problem > 1. load ' org.eclipse.jdt.ui ' from cvs with tag=v20100316-0800 > 2. start a target workspace > == > boom the problem was obvious so i didn ' t try running your example until now .. but i don ' t think that was the patch you wanted to provide pw Date: '2010-05-07 15:24:26' From: 'paul webster' created attachment 167546 jdt.ui example that causes early startup Date: '2010-05-07 15:40:54' From: 'boris bokowski' +1 from me for rc1. Date: '2010-05-07 15:46:56' From: 'remy suen' (in reply to comment #7) > +1 from me for rc1 looks good to me too. Date: '2010-05-07 15:48:57' From: 'paul webster' released > 20100507 pw Date: '2010-05-08 02:57:15' From: 'dani megert' > i don ' t think that was the patch you wanted to provide oops ;-) Date: '2010-05-21 10:09:20' From: 'paul webster' in i20100520-1744 pw Date: '2010-11-10 05:24:07' From: 'dani megert' note this fix caused a major issue, see bug 316701.","in workbench.init() we read the source providers of the ' org.eclipse.ui.services ' extension point and there all extensions are immediately loaded (createexecutableextension) no matter whether the contributing bundle is already started unfortunately this happens before the workbench itself is correctly initialized (workbench colors in this particular case) this can cause troubles for upstream bundles that expect the workbench colors and/or fonts to be present when they get loaded it would be good if the workbench could initialize as much as possible before calling code that starts other bundles we should either - protect the code to not load those extensions - initialize default services after colors and fonts (this might be the simplest fix but would need extensive testing). this patch allows to reproduce the problem i could move the actual instantiation to the same place as the early startup extensions released > 20100507 pw this fix caused a major issue, see bug 316701."
24,"""(290273) eclipse - r3_5_maintenance branch in inconsistent state"" Date: '2009-09-23 10:49:07' From: 'dani megert' as of now r3_5_maintenance branch in inconsistent state the ' r3_5_maintenance ' branch and what ' s in the jdtapt.map is currently broken as it contains additional changes (e.g. binaryfileoutputstream rev. 1.14 and the build notes also look wrong) which are not meant to go into 3.5.2 the branch currently looks very weird it looks like it got created off head also, i ' d rather not do that version increase dance. Date: '2009-09-23 11:31:10' From: 'walter harley' i ' ve rolled back build_notes and binaryfileoutputstream comparing the unbranched plugins against the release date of 3.5.0 i didn ' t find anything else that needed to be rolled back did you find anything else we need to do at least a bit of a version dance to ensure that a rebuild will correctly replace the old plugins considering apt.core, for instance, on 8/17 i inadvertently increased the manifest version in 3.5.1 to x.y.300 when it should have stayed at .200, so we need to bump it to .301 to be safe, and that implies .400 for the 3.6 branch in order to keep it ahead of 3.5.x i will also roll back all the manifest changes except for version number, to be safe however, i won ' t commit that change nor release any of this until we ' ve agreed on what needs to be done dani, let me know what you think. Date: '2009-09-23 11:44:59' From: 'dani megert' > i ' ve rolled back build_notes and binaryfileoutputstream comparing the > unbranched plugins against the release date of 3.5.0 i didn ' t find anything > else that needed to be rolled back did you find anything else i didn ' t check all apt bundles and tests i can do if you want one thing which also looks broken are the build notes > considering apt.core, for instance, on 8/17 > i inadvertently increased the manifest version in 3.5.1 to x.y.300 when it > should have stayed at .200, so we need to bump it to .301 to be safe no, that ' s not true, probably because that change never went into the branch the version in 3.5.1 is 3.3.201 which is correct and which it should keep in r3_5_maintenance in head it should be 3.3.300 as it was until yesterday. Date: '2009-09-25 09:59:28' From: 'olivier thomann' i ' ll take care of this. Date: '2009-09-25 10:59:58' From: 'olivier thomann' i believe the 3.5 maintenance stream is consistent again i retagged all apt projects for next 3.5 maintenance build. Date: '2009-09-25 11:17:42' From: 'olivier thomann' i cannot revert the version change inside the head stream for org.eclipse.jdt.apt.core as one i-build occurred since the version has been changed so if i move to "" x.x.300 "" again i would end up with a lower version number. Date: '2009-09-25 11:40:51' From: 'walter harley' thanks, olivier. Date: '2009-09-28 11:48:31' From: 'dani megert' > i cannot revert the version change inside the head stream for > org.eclipse.jdt.apt.core as one i-build occurred since the version has been > changed grrr yes unfortunately the jdtapt.map file was changed after the tuesday i-build and then the wrong numbers were used in the rebuild ok, let ' s live with that i verified head and r3_5_maintenance looks good i ' d only replace bug 290273 with bug 287323 in the build notes. Date: '2009-09-28 11:59:32' From: 'olivier thomann' done. Date: '2009-09-28 18:47:46' From: 'walter harley' (in reply to comment #7) > grrr yes - i apologize again for the mess the underlying cause here is that when we released 3.5, i did not branch all the plug-ins, because i didn ' t know whether we would need to make changes to all of them for 3.5.1 following some advice from john a., i opted to only branch when a change was actually necessary unfortunately i didn ' t do a good job of remembering that nor of communicating it to anyone else so later, when changes were made, there was confusion about whether the branch had been made personally i think the lesson is that the apt plug-ins are small enough that in the future we should simply branch preemptively, or at least branch all the apt plug-ins the first time any one of them needs to be modified. Date: '2009-09-29 02:17:29' From: 'dani megert' > yes - i apologize again for the mess the underlying cause here is that when > we released 3.5, i did not branch all the plug-ins, because i didn ' t know > whether we would need to make changes to all of them for 3.5.1 correct only branch when needed > so later, when changes were made, there was > confusion about whether the branch had been made i assume it happened because you either started to use your daily dev workspace as maintenance workspace or you started to setup a new workspace and first checked out the apt projects from head when starting to work on a maintenance branch you have two choices - replace all head plug-ins with the version ( ' r3_5 ' in this case) - delete all head plug-ins except the one you want to branch basically the main point is to make sure that nothing is from head that ' s the important part and if you forget that then you ' d probably also forget to branch them ;-) > personally i think the > lesson is that the apt plug-ins are small enough that in the future we should > simply branch preemptively, nope the sdk has the rule to branch when needed i don ' t want to add special rules here.","r3_5_maintenance branch in inconsistent state the ' r3_5_maintenance ' branch and what ' s in the jdtapt.map is currently broken as it contains additional changes (e.g. binaryfileoutputstream rev. 1.14 and the build notes also look wrong) i ' ve rolled back build_notes and binaryfileoutputstream comparing the unbranched plugins against the release date of 3.5.0 i didn ' t find anything else that needed to be rolled back we need to do at least a bit of a version dance to ensure that a rebuild will correctly replace the old plugins i will also roll back all the manifest changes except for version number, to be safe however, i won ' t commit that change nor release any of this until we ' ve agreed on what needs to be done i cannot revert the version change inside the head stream for org.eclipse.jdt.apt.core as one i-build occurred since the version has been changed the underlying cause here is that when we released 3.5, i did not branch all the plug-ins, because i didn ' t know whether we would need to make changes to all of them for 3.5.1 following some advice from john a., i opted to only branch when a change was actually necessary"
25,"""(495584) mozilla - search suggestions passes wrong previous result to form history"" Date: '2009-05-29 20:32:54' From: 'justin dolske' mattn noticed a problem with the wip patch from bug 469443 applied when typing in the search box, sometimes search-suggestion entries would be displayed above the divider (where entries for previous matching searches are) the problem here is that nssearchsuggestions.js is passing the wrong previousresult to form history instead of it being the previous form history search result, it ' s the suggestautocompleteresult result (which contains the union of the form-history and search-suggest entries) so, when form history refines its results as you time, it can actually add *more* entries as data leaks from the suggestions result into form history result, and it thus looks like the divider is being drawn in the wrong place this bug wasn ' t visible before 469443, because nsformfillcontroller startsearch tries to qi the provided result to a nsiautocompletesimpleresult the search-suggestion result is only implements nsiautocompletresult (no "" simple "" ), so the qi fails, historyresult nee previousresult becomes null, and thus satchel was doing a new search every time eg 1) type "" b "" in the search field 2) form history finds 1 entry ( "" blah "" ), search-suggestions finds "" baaa "" , "" bloop "" , "" bzzz "" , the autocompete menu shows these in order with a divider between "" blah "" and "" baaa "" 3) type an "" l "" in the search field ( "" bl "" ) 4) starthistorysearch() ' s previous result contains [ "" blah "" , "" baaa "" , "" bloop "" , "" bzzz "" ], satchel filters this down to [ "" blah "" , "" bloop "" ] to match the new "" bl "" search string 5) nssearchsuggestions ' s onreadystate() change is called with updated search suggestions, builds up a new list of results, but sees that the form history result now has *two* entries. Date: '2009-05-29 20:37:31' From: 'justin dolske' created attachment 380567 patch v.1 (wip) this fixes the problem, but isn ' t quite correct.. if you type "" a < backspace > b "" , satchel trying to use the results from the "" a "" search for the "" b "" search, and so nothing is found i suspect nssearchsuggestions needs to throw away the old form history result when the search string changes like this, but i ' m not entirely sure it ' s responsible for doing so, maybe satchel should be smarter about throwing away a previous result when the previous result ' s search string doesn ' t have a common prefix [that seems to be handled somewhere else for normal form field entries, oddly enough.] Date: '2009-06-14 18:55:25' From: 'justin dolske' created attachment 383211 patch v.2 ah so, there ' s a ._formhistoryresult in the suggestautocompleteresult wrapper (used to combine form history with search suggestions), and also a ._ formhistoryresult in suggestautocomplete (the service itself, used to hold onto a form history result until a search suggestion is available) the simple fix it to just discard the service ' s form history result copy when startsearch() is called with a null previous result otherwise it ' s trying to use a old form history result that no longer applies for the search string. Date: '2009-06-19 12:07:34' From: 'gavin sharp' comment on attachment 383211 patch v.2 perhaps we should rename one of them to _fhresult just to reduce confusion? Date: '2009-06-19 13:17:56' From: 'justin dolske' (in reply to comment #3) > (from update of attachment 383211 [details]) > perhaps we should rename one of them to _fhresult just to reduce confusion good point i renamed the one in the wrapper to _formhistresult fhresult seemed maybe a bit too short. Date: '2009-06-19 13:20:52' From: 'justin dolske' pushed http://hg.mozilla.org/mozilla-central/rev/097598383614","when typing in the search box, sometimes search-suggestion entries would be displayed above the divider (where entries for previous matching searches are) the problem here is that nssearchsuggestions.js is passing the wrong previousresult to form history instead of it being the previous form history search result, it ' s the suggestautocompleteresult result (which contains the union of the form-history and search-suggest entries) so, when form history refines its results as you time, it can actually add *more* entries as data leaks from the suggestions result into form history result, and it thus looks like the divider is being drawn in the wrong place the search-suggestion result is only implements nsiautocompletresult (no "" simple "" ), so the qi fails, historyresult nee previousresult becomes null, and thus satchel was doing a new search every time 5) nssearchsuggestions ' s onreadystate() change is called with updated search suggestions, builds up a new list of results, but sees that the form history result now has *two* entries. created attachment 380567 patch v.1 (wip) this fixes the problem, but isn ' t quite correct.. if you type "" a < backspace > b "" , satchel trying to use the results from the "" a "" search for the "" b "" search, and so nothing is found i suspect nssearchsuggestions needs to throw away the old form history result when the search string changes like this, but i ' m not entirely sure it ' s responsible for doing so, maybe satchel should be smarter about throwing away a previous result when the previous result ' s search string doesn ' t have a common prefix so, there ' s a ._formhistoryresult in the suggestautocompleteresult wrapper (used to combine form history with search suggestions), and also a ._ formhistoryresult in suggestautocomplete (the service itself, used to hold onto a form history result until a search suggestion is available) the simple fix it to just discard the service ' s form history result copy when startsearch() is called with a null previous result"
26,"""(510627) mozilla - windows ce hanging on some ssl sites"" Date: '2009-08-14 17:29:39' From: 'justin dolske' we ' ve found a number of bugs where the tegra device locks up hard (ie, mouse pointer frozen, kernel debugger can ' t connect to it) after visiting a ssl site not every ssl site does this, however. Date: '2009-08-14 17:31:07' From: 'justin dolske' *** bug 506722 has been marked as a duplicate of this bug *** Date: '2009-08-14 17:31:20' From: 'justin dolske' *** bug 508478 has been marked as a duplicate of this bug *** Date: '2009-08-14 17:36:06' From: 'justin dolske' *** bug 502230 has been marked as a duplicate of this bug *** Date: '2009-08-14 17:37:28' From: 'justin dolske' *** bug 504970 has been marked as a duplicate of this bug *** Date: '2009-08-14 17:45:19' From: 'justin dolske' created attachment 394606 debugging info so far (from email) i ' ve previously sent some info out via email regarding this, appending here for posterity i took a spin through existing hang bugs, and verified that the workaround mentioned at the end of these email seems to make all the sites work fine so, it ' s most likely a common root cause, so i ' ve duped them all to this bug. Date: '2009-08-16 23:41:33' From: 'justin dolske' *** bug 510419 has been marked as a duplicate of this bug *** Date: '2009-08-17 17:52:36' From: 'justin dolske' kalle noticed that the kernel ' s kitl thread has a priority level of 131, and our thread was setting a priority level of 116 (0 is the highest priority) this ends up being the reason that the kernel debugger wasn ' t working.. if i change the cesetprioritylevel() call to use 132 instead of 116 (so it ' s 1 priority level lower than the kitl thread), i can still reproduce the hang but now i can use the kernel debugger to poke at the device yay -- progress [i ' m not having any luck getting symbols or breakpoints working, though this is partially a result of almost always breaking into some point in the kernel (for which i don ' t have symbols), but symbols for my mozilla build also seem to be missing the debugger seems to be very finicky, so i ' ll try again with a full debug build, maybe that will help.] looking at the system process/thread info is revealing, though the high-priority (132) process thread normally has a very low cpu user-time total (ie, it doesn ' t actually do much), and the main firefox thread (where we actually do almost everything) accumulates cpu user-time as it ' s used but in the hang conditions, the high-priority thread accumulates cpu rapidly while all the other threads ' counters stay frozen so, this very much looks like one thread is spinning on the cpu and starving everything else there seems to be a potential loop between nsssliolayerpoll() and nssslthread requestpoll() -- the last line of requestpoll() is actually calling nsssliolayerpoll() again, so it ' s possible the code is relying on something else being scheduled in between. Date: '2009-08-17 17:56:26' From: 'justin dolske' kaie, are you familiar with this code lots of history in this bug, but the last paragraph of comment 7 seems to be the key it certainly looks suspicious, but perhaps i ' m missing something. Date: '2009-08-17 18:07:07' From: 'justin dolske' created attachment 394972 patch v.1 (remove cesetthreadpriority) Date: '2009-08-17 18:11:29' From: 'vladimir vukicevic' comment on attachment 394972 patch v.1 (remove cesetthreadpriority) get rid of the #include < windows.h > at the top of the file as well it got added for this, iirc. Date: '2009-08-18 17:59:50' From: 'kai engert' ssl thread is used to decouple mozilla ' s single-threaded network engine and the ssl read/write calls (which may sometimes blocked with an ui prompt) the "" request.. "" functions are called by the main/network thread to make decisions what i/o requests are ok to be sent to the decoupled ssl thread a pollable event is used by ssl thread to wake up the network thread when some previously requested i/o is ready to be fetched important question on your platform, did ssl thread succeed to create a "" pollable event "" in other words, is nsssliolayerhelpers msharedpollableevent null or non-null on platforms where we fail to get a pollable event we need to live with a busy loop while waiting for i/o to complete but we use sleep calls to reduce that effect see want_sleep_and_wakeup_on_any_socket_activity you said > the last line of requestpoll() is actually > calling nsssliolayerpoll() again yes, but only in some limited scenarios you should see that in most scenarios the poll call is not reached but function requestpoll will "" return early "" question 2 can you test in your busy loop, does requestpoll call poll (often)? Date: '2009-08-20 15:23:16' From: 'justin dolske' pushed patch v.1 http://hg.mozilla.org/mozilla-central/rev/30a01dc450d7 (leaving open for the moment) Date: '2009-08-20 17:40:36' From: 'justin dolske' pushed to 192 http://hg.mozilla.org/releases/mozilla-1.9.2/rev/3b20798e3368 Date: '2009-08-28 10:57:52' From: 'marcia knous' Using Mozilla/5.0 (Windows; U; WindowsCE 6.0; en-US; rv:1.9.2a2pre) gecko/20090827 namoroka/3.6a2pre as well as yesterday ' s build, i visited a bunch of various ssl sites and encountered no issues. Date: '2009-08-28 13:25:02' From: 'justin dolske' i think we can just call this fixed comment 11 indicates the busy-poll can be normal, so due to the high-priority we were assigning that thread nothing else would be able to run (including the network stack, most likely) good enough for me.","we ' ve found a number of bugs where the tegra device locks up hard (ie, mouse pointer frozen, kernel debugger can ' t connect to it) after visiting a ssl site not every ssl site does this, however. i took a spin through existing hang bugs, and verified that the workaround mentioned at the end of these email seems to make all the sites work fine the debugger seems to be very finicky, so i ' ll try again with a full debug build, maybe that will help.] looking at the system process/thread info is revealing, though so, this very much looks like one thread is spinning on the cpu and starving everything else there seems to be a potential loop between nsssliolayerpoll() and nssslthread ssl thread is used to decouple mozilla ' s single-threaded network engine and the ssl read/write calls (which may sometimes blocked with an ui prompt) a pollable event is used by ssl thread to wake up the network thread when some previously requested i/o is ready to be fetched on platforms where we fail to get a pollable event we need to live with a busy loop while waiting for i/o to complete but we use sleep calls to reduce that effect you should see that in most scenarios the poll call is not reached but function requestpoll will "" return early "" comment 11 indicates the busy-poll can be normal, so due to the high-priority we were assigning that thread nothing else would be able to run (including the network stack, most likely)"
27,"""(677005) mozilla - Automated blocklist update blew away blocklist.xml"" Date: '2011-08-05 20:48:26' From: 'justin dolske' was browsing the hg pushlog, and happened to check what got pushed.. http://hg.mozilla.org/mozilla-central/rev/6845d4b46d7a oops looks like it accidentally the whole file indeed, it s a 0-byte file in my tree [note that, at the moment, mxr s index is like a week stale, so if you check on mxr it looks like the file is still ok] probably also need either a test in the script to make sure it s a legit looking update, and/or a test in the tree to blow up if the update s bad? Date: '2011-08-05 20:50:29' From: 'dave townsend' i m guessing the automatic update coincided with some amo downtime or something since amo s data looks fine right now can we trigger the update now to get things right in the tree again then figure out a way to avoid it in the future i could have sworn we used to have a check to ensure the blocklist.xml downloaded was larger than a certain size before landing. Date: '2011-08-05 21:14:32' From: 'justin wood' the next automatic update will occur in just a few hours (early saturday), that said i am bumping severity also for ref, suite/ s update was fine (but i know it ran at a much different time than fx s update) http://hg.mozilla.org/comm-central/rev/c15ed4c2c86d Date: '2011-08-07 06:22:01' From: 'chris cooper' (in reply to justin wood (:callek) from comment #2) > the next automatic update will occur in just a few hours (early saturday), > that said i am bumping severity now that we have an empty blocklist in hg, the script is actually failing on that since it doesn t look like valid xml someone should grab and land a new, valid version of the blocklist by hand for m-c also, the script has been trying to update the blocklist for 1.9.2 for a few weeks now, but since that tree is marked as approval required, the script is failing if we want to take a blocklist update there, we ll need someone to land the update by hand there too. Date: '2011-08-07 08:55:15' From: 'justin wood' (in reply to chris cooper [:coop] - away until aug 19 from comment #3) > (in reply to justin wood ( callek) from comment #2) > > the next automatic update will occur in just a few hours (early saturday), > > that said i am bumping severity > > now that we have an empty blocklist in hg, the script is actually failing on > that since it doesn t look like valid xml > > someone should grab and land a new, valid version of the blocklist by hand > for m-c easier path forward imo, is for someone [releng perhaps] to backout the code change from this botched landing, land with dontbuild and then releng to manually kick a new blocklist update for m-c right after that will ensure that everything lands correctly > also, the script has been trying to update the blocklist for 1.9.2 for a few > weeks now, but since that tree is marked as approval required, the script is > failing if we want to take a blocklist update there, we ll need someone to > land the update by hand there too i thought we had a=blocklist-update in the script [at least the version seamonkey currently uses has that.] if it was removed somehow, i d suggest adding it back in, fwiw. Date: '2011-08-07 10:05:27' From: 'dave townsend' i ve backed out the bad blocklist update http://hg.mozilla.org/mozilla-central/rev/c9441d911d58 Date: '2011-08-07 20:19:05' From: 'chris cooper' (in reply to justin wood (:callek) from comment #4) > i thought we had a=blocklist-update in the script [at least the version > seamonkey currently uses has that.] if it was removed somehow, i d suggest > adding it back in, fwiw we turned that switch off to prevent this kind of thing on 1.9.2, our mainline stable branch at the time going forward, the plan is to only do blocklist updates automatically on m-c where no approval is required, and let changes get cut over to aurora/beta/release with everything else for sufficient baking. Date: '2011-08-07 20:46:40' From: 'dave townsend' (in reply to chris cooper [:coop] - away until aug 19 from comment #6) > (in reply to justin wood (:callek) from comment #4) > > i thought we had a=blocklist-update in the script [at least the version > > seamonkey currently uses has that.] if it was removed somehow, i d suggest > > adding it back in, fwiw > > we turned that switch off to prevent this kind of thing on 1.9.2, our > mainline stable branch at the time > > going forward, the plan is to only do blocklist updates automatically on m-c > where no approval is required, and let changes get cut over to > aurora/beta/release with everything else for sufficient baking so basically the plan is to ship releases with a blocklist that is 3 months out of date where was this discussed, i must have missed it. Date: '2011-08-08 06:35:13' From: 'chris cooper' (in reply to dave townsend (:mossop) from comment #7) > so basically the plan is to ship releases with a blocklist that is 3 months > out of date where was this discussed, i must have missed it no, but if the blocklist gets updated after it leaves m-c, it will be a manual process, where manual could mean releng triggers the update provided we have blocklist updates enabled on that branch i don t believe we ve had the discussion about how late in the release game we would take a blocklist update. Date: '2011-10-03 09:16:08' From: 'chris cooper' created attachment 564212 heck for 0-byte blocklists this handles the proximate problem of accidentally importing an empty file as a blocklist i ll mail release-drivers to start a discussion about how late in the process we would accept an automated update (aurora beta?) as noted before, we could have this blocklist update builder available on those branches for releng to trigger, i.e. it won t necessary fall to someone to update the blocklist by hand, although the script would make that trivial. Date: '2011-10-03 09:48:57' From: 'armen zambrano g.' comment on attachment 564212 check for 0-byte blocklists -s checks for existence and size greater than 0 *stamp* Date: '2011-10-04 10:32:11' From: 'chris cooper' comment on attachment 564212 check for 0-byte blocklists https://hg.mozilla.org/build/tools/rev/2b070a401d6d Date: '2011-12-02 12:56:08' From: 'chris cooper' (in reply to chris cooper [:coop] from comment #9) > i ll mail release-drivers to start a discussion about how late in the > process we would accept an automated update (aurora beta?) as noted > before, we could have this blocklist update builder available on those > branches for releng to trigger, i.e it won t necessary fall to someone to > update the blocklist by hand, although the script would make that trivial conversation started with release-drivers about this if we decide to start auto-updating aurora, we ll file a new bug for that.","was browsing the hg pushlog, and happened to check what got pushed.. looks like it accidentally the whole file indeed, it s a 0-byte file in my tree [note that, at the moment, mxr s index is like a week stale, so if you check on mxr it looks like the file is still ok] probably also need either a test in the script to make sure it s a legit looking update, and/or a test in the tree to blow up if the update s bad? can we trigger the update now to get things right in the tree again then figure out a way to avoid it in the future the next automatic update will occur in just a few hours (early saturday), that said i am bumping severity also for ref, suite/ s update was fine (but i know it ran at a much different time than fx s update) http://hg.mozilla.org/comm-central/rev/c15ed4c2c86d if we want to take a blocklist update there, we ll need someone to land the update by hand there too. i thought we had a=blocklist-update in the script [at least the version seamonkey currently uses has that.] if it was removed somehow, i d suggest adding it back in, fwiw. we turned that switch off to prevent this kind of thing on 1.9.2, our mainline stable branch at the time no, but if the blocklist gets updated after it leaves m-c, it will be a manual process, where manual could mean releng triggers the update provided we have blocklist updates enabled on that branch this handles the proximate problem of accidentally importing an empty file as a blocklist as noted before, we could have this blocklist update builder available on those branches for releng to trigger, i.e. it won t necessary fall to someone to update the blocklist by hand, although the script would make that trivial."
28,"""(507037) mozilla - hang on windows ce in gfxfontfamily::findfontforstyle"" Date: '2009-07-28 16:02:24' From: 'justin dolske' when opening the content pane in tools - > options, the browser will reliably hang on windows ce not sure if this is due to a recent ff change, or the new windows ce build i just installed amazingly, the debugger is able to attach and break on the process, and seems to indicate we ' re spinning in the "" for (print8 i = baseweight i += direction) "" loop i ' ll do a little more debugging to confirm that ' s what is happening. Date: '2009-07-28 16:54:41' From: 'justin dolske' yes, confirmed, we ' re spinning in that loop "" i "" starts a 4, goes down to 1, up to 9, down to 1, etc etc. Date: '2009-07-28 17:33:07' From: 'justin dolske' in the call to findweightsforstyle() at the top, it has mfaces.length() == 1, and sets matchessomething on the second j-loop through ( "" weight for entry i=0 is 0 (italic 1) "" ) so this sets exactly one entry, weightlist[0] , but the loop we ' re stuck in only looks at weightlist[1] thru weightlist[9] i ' m not familiar with this code, so i ' m not sure if the bug is that we should be matching more things, or if the loop should be checking weightlist[0]. Date: '2009-07-29 19:24:20' From: 'vladimir vukicevic' created attachment 391515 fix the font that ' s causing this had a somewhat bogus os2 font table weight -- "" 6 "" instead of "" 600 "" this patch tries to be generous and handle 1..9 as valid weights (converting them to 100 .. 900), but i can also just as easily not do that and ignore the os2 table if something in the valid range isn ' t found. Date: '2009-07-30 01:17:45' From: 'john daggett' comment on attachment 391515 fix bad craziness.. looks fine. Date: '2009-08-13 17:27:59' From: 'tony chung' tried this a two dozen times, no hang prefs window opens Verified fix on Mozilla/5.0 (Windows; U; WindowsCE 6.0; en-US; rv:1.9.2a2pre) Gecko/20090811 Firefox/3.6a2pre","when opening the content pane in tools - > options, the browser will reliably hang on windows ce amazingly, the debugger is able to attach and break on the process, and seems to indicate we ' re spinning in the "" for (print8 i = baseweight i += direction) "" loop yes, confirmed, we ' re spinning in that loop 1) "" ) so this sets exactly one entry, weightlist[0] , but the loop we ' re stuck in only looks at weightlist[1] thru weightlist[9] created attachment 391515 fix the font that ' s causing this had a somewhat bogus os2 font table weight -- "" 6 "" instead of "" 600 "" this patch tries to be generous and handle 1..9 as valid weights (converting them to 100 .. 900), but i can also just as easily not do that and ignore the os2 table if something in the valid range isn ' t found."
29,"""(500047) mozilla - sumo should not be loading images from personal hosting servers"" Date: '2009-06-23 14:22:27' From: 'justin dolske' at least on http://support.mozilla.com/en-us/kb/how+to+contribute, there are a number of images being loaded from external sites eg: http://ilias.ca/sumo/foxkehmail.png http://zzxc.net/1x1.png these really, really shouldn ' t be on an external site. Date: '2009-06-23 14:26:05' From: 'cwwmozilla' this is caused by and probably a dupe of https://bugzilla.mozilla.org/show_bug.cgi?id=493276 .. fixing that would be awesome failing that somewhere internal that we can host images without having to file it bugs every time would also work as a workaround. Date: '2009-06-23 14:29:59' From: 'justin dolske' not really in the absence of a fix for 493276, content should reside on some other moco server. Date: '2009-06-23 15:02:14' From: 'chris ilias' a while back, i remember zzxc mentioning using videos.m.o as a workaround for this is that preferred over using our own domains? Date: '2009-06-23 15:04:15' From: 'laura thomson :laura' the preferred solution is to fix bug 493276 reed offered to put those images somewhere on our infrastructure until that happens. Date: '2009-07-22 15:03:25' From: 'reed loden' what ' s the current status of this bug? Date: '2009-07-22 16:37:29' From: 'laura thomson :laura' it ' s scheduled for 1.3 (along with bug 493276) reed, can you work with chris re comment #4? Date: '2009-07-28 08:32:47' From: 'chris ilias' reed, right now it looks like bug 493276 is fixed as a result of a sumo 1.2.1 bug (bug 485665) it looks fixed on support-stage anyway if sumo 1.2.1 pushes this week, we should be able to move the images to support.mozilla.com, and close this bug this week as well. Date: '2009-07-28 10:05:03' From: 'reed loden' (in reply to comment #7) > reed, right now it looks like bug 493276 is fixed as a result of a sumo 1.2.1 > bug (bug 485665) it looks fixed on support-stage anyway if sumo 1.2.1 pushes > this week, we should be able to move the images to support.mozilla.com, and > close this bug this week as well sounds good let me know if i can help. Date: '2009-07-30 21:06:07' From: 'chris ilias' bug 493276 is fixed on prod i can take care of locating the links to remote images and hosting them on support.mozilla.com. Date: '2009-07-30 21:58:00' From: 'chris ilias' english pages are done. Date: '2009-07-31 16:11:07' From: 'chris ilias' all remote images in articles are now hosted on support.mozilla.com zzxc, there ' s some stuff (not images) on https://support.mozilla.com/en-us/kb/support%20firefox%20day and https://support.mozilla.com/en-us/kb/live%20chat%20troubleshooting%20guide that are hosted on zzxc.net. Date: '2009-07-31 16:43:07' From: 'justin dolske' i think this needs to stay open until all the personal server stuff is removed but thanks for getting the images moved that second link is sending usernames and email addresses to a cgi script on zzxc.net Date: '2009-07-31 16:45:55' From: 'justin dolske' as an unrelated note, it would be good if the video on that first link didn ' t restart itself after the user pauses it, and loop infinitely Date: '2009-07-31 16:52:07' From: 'chris ilias' reassigning to matthew for the zzxc.net stuff. Date: '2009-07-31 16:56:48' From: 'cwwmozilla' (in reply to comment #12) yeah, that was bad but we didn ' t have much choice at the time (i can ' t access files on production -- sigh) and we decided to get it up very last minute so we needed a way that didn ' t touch the codebase otherwise i ' d basically be constantly pinging it to check how many user signups we had and to send out reminder emails i ' ll take that down now that sfd is over ditto the video.. we had issues with streaming so zzxc hacked something together on his server to constantly refresh the iframe it ' s not a good solution but the video tag is really not at a good enough state for streaming we found out somewhat late. Date: '2009-07-31 19:21:56' From: 'matthew middleton' the files being loaded on live+chat+troubleshooting+guide are for a screencast i added before we had screencast support i ' ll transfer this screencast to sumo, now that we have support for it everything on support+firefox+day was put up at the last minute for the event, so hosting on an external server was the only option we had (the video loops endlessly due to a javascript hack i made to prevent the live video stream from cutting out) Date: '2009-08-01 10:59:10' From: 'mike connor' guys, i really want to stress that i know your goals were solid and well-intentioned., but this type of thing is simply not appropriate we simply cannot send user data from production websites to personal servers just because it ' s faster/more convenient to do it that way it looks _extremely_ bad on the surface, and even knowing the details i ' m really uncomfortable that we did things that way (to an unknowing observer, between the script and the 1x1 image, this sure would have looked like some guy named zzxc hacked sumo and is tracking users and harvesting their user data that ' s pretty much what happened anyway, except you happen to work for us...) as i guess a postmortem question what do you guys need from it/webdev so we never ever go down this path again ability to directly touch things in production is almost certainly not going to happen, everything is in version control for a reason now, the ability to push reviewed changes to svn and request a push to production by it seems entirely viable, if laura concurs... Date: '2009-08-01 11:16:37' From: 'matthew zeier' i agree with what mike said - we (it) do a lot of last minute work and would have been able to handle this one too. Date: '2009-08-01 13:12:35' From: 'matthew middleton' i removed the content being loaded from my server on the "" support firefox day "" and "" live chat troubleshooting guide "" pages the live chat screencast is now hosted directly on sumo, and the sfd static video is now embedded directly without the live stream hack i also fixed one remaining translation of "" how to contribute "" that was referencing my server http://support.mozilla.com/cs/kb/jak+pispt?bl=n the 1x1.png image was already moved on-site for the en-us "" how to contribute "" page, so it ' s no longer being retrieved from my server we use this transparent image to create a fixed-pixel layout using tikiwiki markup, so that we can avoid manual html the registration script that was hosted on my server was collecting usernames of community members who were interested in attending support firefox day we made a last minute decision to use a script on an external server when we realized that the tikiwiki tracker feature was not working i removed the < form > that was sending data here from the "" support firefox day "" page, and we should definitely make every effort to avoid sending any data offsite in the future the only remaining off-site content i can find is the embedded mibbit on "" support firefox day "" , so i ' m marking this bug as fixed. Date: '2009-08-03 03:22:18' From: 'cwwmozilla' (in reply to comment #17) in my ideal world, i ' d hope for 1) a solid live open video streaming solution we thought it ' d be good to showcase the open technology and do the first real well-advertised open video streaming event with screencasts that video was non-responsive for many of our users and needed constant refreshing was discovered about 30 minutes before the event (as far as 1 hour before the event, the page was just loading off videos.mozilla.org) this was mostly my fault for not doing more testing on poorer connections but now that we know it ' s a problem, how do we address it (and who addresses it) for the next event 2) some way to implement one-off features that need data we can access in this case, a sign-up system that wasn ' t going to be used on any other page 3) it support during live events i hadn ' t realized how hard it was to put together a live event without someone else handling the servers and technology and monitoring the event i ' ll notify it in advance of an event next time and so when things go wrong (like mibbit going down or the video acting up) i can stay focused on content. Date: '2009-08-03 06:00:23' From: 'laura thomson :laura' (in reply to comment #20) > (in reply to comment #17) > > in my ideal world, i ' d hope for > > 1) a solid live open video streaming solution we thought it ' d be good to > showcase the open technology and do the first real well-advertised open video > streaming event with screencasts that video was non-responsive for many of > our users and needed constant refreshing was discovered about 30 minutes before > the event (as far as 1 hour before the event, the page was just loading off > videos.mozilla.org) this was mostly my fault for not doing more testing on > poorer connections but now that we know it ' s a problem, how do we address it > (and who addresses it) for the next event > > 2) some way to implement one-off features that need data we can access in > this case, a sign-up system that wasn ' t going to be used on any other page > > 3) it support during live events i hadn ' t realized how hard it was to put > together a live event without someone else handling the servers and technology > and monitoring the event i ' ll notify it in advance of an event next time and > so when things go wrong (like mibbit going down or the video acting up) i can > stay focused on content all of these are achievable when planned in advance i ' m not clear on what happened here you ' re saying it was faster to serve this from a personal server than from video.mozilla.org i ' m also not clear when this became apparent we should work with it to load test a solution for this, file a bug as soon as you know we have a requirement, include the deadline of when it has to be done then it can be appropriately scheduled for the release beforehand as you know we do a general release about every 3 weeks, but we do do special mini pushes for things that have a shorter deadline (e.g. kampyle) 3 sounds like a good idea when planning the next sfd (or whatever) it would be good to come up with a list of requirements and circulate it to webdev and it for feedback and planning resources the further in advance you can do this the better. Date: '2009-08-03 07:47:18' From: 'cwwmozilla' we found out that users kept having their video stall the fix is to refresh the page but that knocked them out of the chat on the same page and they ' d have to do it manually so we had to build an iframe that refreshed itself every minute or so and host that and work out the kinks in less than 45 minutes the video was still served from video.mozilla.org. Date: '2009-08-20 14:32:09' From: 'tom ellins' i cant see any offsite content left on the pages specified verified","at least on http://support.mozilla.com/en-us/kb/how+to+contribute, there are a number of images being loaded from external sites these really, really shouldn ' t be on an external site. this is caused by and probably a dupe of https://bugzilla.mozilla.org/show_bug.cgi?id=493276 .. reed offered to put those images somewhere on our infrastructure until that happens. if sumo 1.2.1 pushes this week, we should be able to move the images to support.mozilla.com, and close this bug this week as well. i can take care of locating the links to remote images and hosting them on support.mozilla.com. all remote images in articles are now hosted on support.mozilla.com everything on support+firefox+day was put up at the last minute for the event, so hosting on an external server was the only option we had we simply cannot send user data from production websites to personal servers just because it ' s faster/more convenient to do it that way now, the ability to push reviewed changes to svn and request a push to production by it seems entirely viable, if laura concurs... i removed the content being loaded from my server on the "" support firefox day "" and "" live chat troubleshooting guide "" pages the live chat screencast is now hosted directly on sumo, and the sfd static video is now embedded directly without the live stream hack i removed the < form > that was sending data here from the "" support firefox day "" page, and we should definitely make every effort to avoid sending any data offsite in the future 1) a solid live open video streaming solution 2) some way to implement one-off features that need data we can access so we had to build an iframe that refreshed itself every minute or so"
30,"""(516825) mozilla - detect-flash.js should not warn windows ce users with flash lite"" Date: '2009-09-15 16:07:32' From: 'justin dolske' similar issue as bug 516167.. the version of flash that ' s shipping on the pre-release tegras is reported as "" shockwave flash 9.0 r83 "" , but according to vlad that ' s actually a lie (probably for web compat) -- it ' s actually flash lite we may just want to disable the flash check entirely for windowsce user agents ideally we ' d actually check against the latest known safe version, but given the opacity of the mobile market i would be surprised if it is (1) difficult to determine what versions are safe and (2) nearly impossible for users to get updates. Date: '2009-10-13 19:10:08' From: 'justin dolske' it also shouldn ' t warn about nvidia ' s quicktime plugin, which isn ' t really quicktime (it ' s actually just a shim to launch the media in an external player) shows up with name "" nv plugin ( quicktime 7.5.4 ) "" [sic, extra spaces] and description "" nvidia mm plugin "" and version 7.5.4.1. Date: '2009-10-27 14:27:46' From: 'justin dolske' i think this actually needs to be a p1 blocker -- mobinnova is already doing device trials with alpha2, and we ' ve already caught flack for having users seeing 404 start pages and the session-restore oops-we-crashed page having users update to beta 1 and getting a scary warning to update their not-upgradable plugin is a problem. Date: '2009-11-02 13:14:49' From: 'justin dolske' any progress here? Date: '2009-11-02 13:30:51' From: 'michael morgan' we may consider pulling the warning overall in lieu of improved visibility to the plugin checker will take a look at how much work this is and may opt to just pull it altogether. Date: '2009-11-02 13:53:34' From: 'justin dolske' yeah, pulling the checker entirely for windows ce would be fine (until such time that users can do something about it) i assume we ' d just display some kind of polite error message if they go to the plugin check page manually. Date: '2009-11-02 14:11:38' From: 'michael morgan' if they go to the plugin check page it ' s less invasive and it ' d show a "" research "" link what ' s the url in question if it ' s just a local copy that we ' re using for wince it ' s actually very easy to remove this check are we talking abouthttp://www.mozilla.com/en-us/firefox/3.6a2/whatsnew/ when this was set up, nothing else pointed to it -- still the case? Date: '2009-11-02 14:25:09' From: 'justin dolske' http://www.mozilla.com/en-us/plugincheck/ is the page i ' m talking about just to be clear the p1 part of this bug is to not pester wince users from the whatsnew page, by whatever means, since we ' ll be shipping on a wince device and it ' ll confuse users i ' m less concerned about someone manually going to http://www.mozilla.com/en-us/plugincheck, but we should fix that too. Date: '2009-11-02 14:26:56' From: 'justin dolske' (wince builds will be produced as part of the normal releng process, so they ' ll get the same whatsnew url as everyone else.) Date: '2009-11-11 20:03:53' From: 'justin dolske' ping again we ' ve delivered windows ce beta 2 builds to our partner, so it ' s critical this be fixed asap specifically, see comment 7. Date: '2009-11-11 20:20:21' From: 'michael morgan' what ' s the ua string for wince Date: '2009-11-11 20:36:16' From: 'michael morgan' created attachment 411882 v1, ignoring wince simple way to bypass. Date: '2009-11-11 20:37:34' From: 'michael morgan' created attachment 411883 v2, now with 2 & ' s Date: '2009-11-11 20:52:15' From: 'michael morgan' 41 < dolske > looks good, just wondering if it ' s live on staging to test checked into trunk on r55968 so we can test. Date: '2009-11-11 20:55:59' From: 'michael morgan' http://www-trunk.stage.mozilla.com/en-us/firefox/3.5.5/whatsnew/ works, so pushing to prod. Date: '2009-11-11 21:10:13' From: 'justin dolske' thanks filed bug 516825 for the separate issue of http://www.mozilla.com/en-us/plugincheck/ Date: '2009-11-11 21:19:04' From: 'michael morgan' bug 528135 covers that issue, mis-paste. Date: '2009-11-11 21:22:57' From: 'justin dolske' *sigh* Date: '2009-12-01 06:53:13' From: 'gavin sharp' (marking beta3-fixed to get this off the unresolved blocker queries) Date: '2009-12-15 10:14:05' From: 'stephen donner' dolske/marcia can one of you verify thanks! Date: '2009-12-15 10:36:35' From: 'marcia knous' i will test this during our b5 testing cycle which will happen either today or tomorrow. Date: '2010-01-05 23:57:19' From: 'stephen donner' (in reply to comment #20) > i will test this during our b5 testing cycle which will happen either today or > tomorrow marcia -- still able to verify this thanks!","the version of flash that ' s shipping on the pre-release tegras is reported as "" shockwave flash 9.0 r83 "" , but according to vlad that ' s actually a lie (probably for web compat) -- it ' s actually flash lite we may just want to disable the flash check entirely for windowsce user agents ideally we ' d actually check against the latest known safe version, but given the opacity of the mobile market i would be surprised if it is (1) difficult to determine what versions are safe and (2) nearly impossible for users to get updates. it also shouldn ' t warn about nvidia ' s quicktime plugin, which isn ' t really quicktime (it ' s actually just a shim to launch the media in an external player) having users update to beta 1 and getting a scary warning to update their not-upgradable plugin is a problem. we may consider pulling the warning overall in lieu of improved visibility to the plugin checker i assume we ' d just display some kind of polite error message if they go to the plugin check page manually. the p1 part of this bug is to not pester wince users from the whatsnew page, by whatever means, since we ' ll be shipping on a wince device and it ' ll confuse users we ' ve delivered windows ce beta 2 builds to our partner, so it ' s critical this be fixed asap"
31,"""(432014) mozilla - 2008050209 trunk nightlies build not getting updates"" Date: '2008-05-03 09:02:57' From: 'gavin sharp' there have been at least two updates since, but help- > check for updates doesn ' t find anything likely related to bug 431866, but comments there imply that this should be fixed i ' m not sure which of the two 2008050209 builds i ' m using is there any way to fix this by changing snippets or something i ' ll just update manually for now Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.5; en-US; rv:1.9pre) Gecko/2008050209 Minefield/3.0pre Date: '2008-05-03 09:27:46' From: 'ryan a. c.' seems to affect windows as well Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US; rv:1.9pre) Gecko/2008050206 Minefield/3.0pre and a report here: http://forums.mozillazine.org/viewtopic.php?p=3359720#3359720 probably a different bug than bug 431866, might be all updates broken. Date: '2008-05-03 10:17:06' From: 'j.m. hardin' linux updates are mia as well Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9pre) Gecko/2008050204 Minefield/3.0pre ID:2008050204 Date: '2008-05-03 12:38:14' From: 'justin dolske' -- > blocker. Date: '2008-05-03 15:16:15' From: 'mike beltzner' apparently this is related to the underlying issue of bug 431270. Date: '2008-05-03 15:34:42' From: 'mike beltzner' also, this will might just resolve itself when the 20080504 nightlies are available right now the updates being served are corrupted because there were two builds with the same buildid. Date: '2008-05-03 15:37:43' From: 'john o duinn' marked as p1 also reopened bug#431866 while we investigate if these are really related or not. Date: '2008-05-03 15:38:09' From: 'gavin sharp' (in reply to comment #5) > also, this will might just resolve itself when the 20080504 nightlies are > available right now the updates being served are corrupted because there were > two builds with the same buildid that was bug 431866 (mentioned in comment 0), and was supposedly resolved yesterday there ' s been a full nightly since, and and clobber after that (that didn ' t have the same build id) this bug is also affecting more than just mac, which is what bug 431866 was about i don ' t think they ' re related. Date: '2008-05-04 08:09:37' From: 'mike beltzner' well, it ' s 11am est and i haven ' t gotten my 20080504 nightly, so looks like gavin ' s right, and this is a different issue. Date: '2008-05-04 10:42:36' From: 'justin dolske' who owns this and is working on it we ' re losing significant test coverage from nightly users with rc1 coming up very fast. Date: '2008-05-04 11:19:49' From: 'daniel veditz' my build is pinging what looks like the correct uri https://aus2.mozilla.org/update/3/firefox/3.0pre/2008050209/darwin_universal-gcc3/en-us/nightly/darwin%209.2.2/default/default/update.xml?force=1 returned snippets are empty ditto for my windows 2008050206 nightly (different, but correct-looking, aus uri) the 200805030x snippets are also empty don ' t see how a blocker can be assigned to nobody, - > joduinn to pick the right member of his team. Date: '2008-05-04 14:01:42' From: 'dave townsend' as further info, i just checked for updates for a build from about a week ago and it found and installed the 0502 nightly. Date: '2008-05-04 14:33:58' From: 'nick thomas' looking .... Date: '2008-05-04 15:05:26' From: 'nick thomas' fixed now, details to follow shortly. Date: '2008-05-04 15:29:34' From: 'nick thomas' details the tb 1.5.0.14eol nightly build for 20080503 wasn ' t published to the ftp server (it ' s pushing bits to the new staging setup, and that was down for a bit) the nightly update system was then barfing when it couldn ' t find that complete mar, which blocks partial updates (and forwarding the update information) across the board the snippets causing the problem where removed to resolve the immediate problem nightly updates for the fx & tb 1.5.0.x builds have been disabled to prevent it recurring. Date: '2008-05-04 15:54:38' From: 'joe sabash' Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9pre) Gecko/2008050403 Thunderbird/3.0a1pre ID:2008050403 full update available and worked fine.","there have been at least two updates since, but help- > check for updates doesn ' t find anything likely related to bug 431866, but comments there imply that this should be fixed seems to affect windows as well linux updates are mia as well apparently this is related to the underlying issue of bug 431270. also, this will might just resolve itself when the 20080504 nightlies are available right now the updates being served are corrupted because there were two builds with the same buildid. this bug is also affecting more than just mac, which is what bug 431866 was about fixed now, details to follow shortly. the tb 1.5.0.14eol nightly build for 20080503 wasn ' t published to the ftp server (it ' s pushing bits to the new staging setup, and that was down for a bit) the nightly update system was then barfing when it couldn ' t find that complete mar, which blocks partial updates (and forwarding the update information) across the board the snippets causing the problem where removed to resolve the immediate problem nightly updates for the fx & tb 1.5.0.x builds have been disabled to prevent it recurring."
32,"""(389437) mozilla - crashes [@ nssamplewordbreaker::nextword] when using alt+arrow in text fields"" Date: '2007-07-24 11:55:53' From: 'gavin sharp' created attachment 273632 stack i ' ve recently been experiencing crashes when using alt+arrow to move the cursor around word-by-word in text boxes i ' ve noticed this most recently in the gmail compose window, although i ' m pretty sure i ' ve seen it in "" normal "" textareas/inputs as well i don ' t have a consistent set of steps to reproduce the issue, although i think it may be related to moving from one line to the next all i have is a stack from a mac opt build, i ' ll see if i can get one from a debug build with a line number. Date: '2007-07-30 18:33:54' From: 'gavin sharp' *** bug 390229 has been marked as a duplicate of this bug *** Date: '2007-07-30 18:37:41' From: 'benjamin smedberg' http://crash-stats.mozilla.com/report/list?range_unit=weeks & branch=1.9 & range_value=2 & signature=nssamplewordbreaker%3a%3anextword(unsigned+short+const+*%2cunsigned+int%2cunsigned+int%29 regression appears to have happened around 7/13 Date: '2007-08-06 07:10:54' From: 'timeless' xul!nssamplewordbreaker::nextword+0xb [e:\builds\tinderbox\fx-trunk\winnt_5.2_depend\mozilla\intl\lwbrk\src\nssamplewordbreaker.cpp @ 166] xul!clusteriterator::clusteriterator+0x10d [e:\builds\tinderbox\fx-trunk\winnt_5.2_depend\mozilla\layout\generic\nstextframethebes.cpp @ 4762] xul!nstextframe::peekoffsetword+0x5a [e:\builds\tinderbox\fx-trunk\winnt_5.2_depend\mozilla\layout\generic\nstextframethebes.cpp @ 4781] xul!nsiframe::peekoffset+0x3e6 [e:\builds\tinderbox\fx-trunk\winnt_5.2_depend\mozilla\layout\generic\nsframe.cpp @ 4839] xul!nsframeselection::movecaret+0x255 [e:\builds\tinderbox\fx-trunk\winnt_5.2_depend\mozilla\layout\generic\nsselection.cpp @ 1350] xul!nsframeselection::wordmove+0x18 [e:\builds\tinderbox\fx-trunk\winnt_5.2_depend\mozilla\layout\generic\nsselection.cpp @ 2765] Date: '2007-08-08 09:17:14' From: 'steve england' gavin, do the steps in bug 391356 crash for you (that bug looks like a dup of this one) Date: '2007-08-08 09:30:32' From: 'gavin sharp' (in reply to comment #4) > gavin, do the steps in bug 391356 crash for you (that bug looks like a dup of > this one) i can ' t seem to reproduce using those steps, but that bug does look like a dupe. Date: '2007-08-08 09:31:35' From: 'gavin sharp' oh, and i ' m testing mac - could be a platform difference that make your steps only work on windows, i guess. Date: '2007-08-08 10:12:19' From: 'adam guthrie' *** bug 391356 has been marked as a duplicate of this bug *** Date: '2007-08-08 14:44:13' From: 'daniel holbert' (in reply to comment #6) > oh, and i ' m testing mac - could be a platform difference that make your steps > only work on windows, i guess not windows-specific -- i get a crash from following those steps under linux, at least. Date: '2007-08-08 15:37:53' From: 'daniel holbert' related issue we ' re don ' t correctly handle a trailing space character in gmail ' s compose box steps to show this 1. open up a gmail compose window 2. type "" a "" (no quotes, but with a single trailing space) 3. press return key 4. press left-arrow key ** notice that the cursor is immediately after "" a "" , hiding the fact that there ' s a space there 5. press "" b "" ** notice that the space has reappeared, between "" a "" and "" b "" 6. press backspace to delete the ' a ' ** notice that the space is hidden again 7. press backspace to delete the invisible space ** notice that cursor doesn ' t move as invisible space is deleted conclusion the space is there, sort of, but we ' re not showing it side note 1: not only are we not showing it, but the arrow keys don ' t seem to respect the space pressing left-arrow and right-arrow keys will skip right over the invisible space, as if it weren ' t there (as opposed to the backspace key, which does actually delete the invisible space without moving the cursor, as shown in the above steps) side note 2: - when coming at the invisible space from the left side, via pressing right-arrow, it ' s impossible to reach a position *immediately after* the invisible space - similarly, when coming at the invisible space from the following line, via pressing left-arrow, it ' s impossible to reach the position *immediately before* the invisible space (you can demonstrate this by navigating with the arrow keys, and then typing some text to see where you are with respect to the invisible space.) Date: '2007-08-26 16:13:28' From: 'martijn wargers' created attachment 278339 testcase i get this crash when double-clicking the first word in the sentence of this testcase i get indeed a regression range between 2007-07-12 and 2007-07-13. Date: '2007-09-05 17:22:35' From: 'robert o callahan' created attachment 279826 fix the wordbreaker should be able to handle being passed apos==alength simon, who should sr this? Date: '2007-09-06 12:25:16' From: 'simon montagu' comment on attachment 279826 fix r+moa=me, and intl policy is that you don ' t need sr if you have moa Date: '2007-09-06 14:31:20' From: 'robert o callahan' comment on attachment 279826 fix need approval from m8 drivers right now Date: '2007-09-10 16:03:42' From: 'robert o callahan' checked in","i ' ve recently been experiencing crashes when using alt+arrow to move the cursor around word-by-word in text boxes i ' ve noticed this most recently in the gmail compose window, although i ' m pretty sure i ' ve seen it in "" normal "" textareas/inputs as well not windows-specific -- i get a crash from following those steps under linux, at least. the space is there, sort of, but we ' re not showing it side note 1: not only are we not showing it, but the arrow keys don ' t seem to respect the space side note 2: - when coming at the invisible space from the left side, via pressing right-arrow, it ' s impossible to reach a position *immediately after* the invisible space i get this crash when double-clicking the first word in the sentence of this testcase"
33,"""(457642) mozilla - users with editbugs privs cannot edit a duplicate anymore if it points to a bug you cannot see"" Date: '2008-09-29 00:35:33' From: 'gavin sharp' i ' m trying to cc myself on bug 457543 it ' s a public bug, but it ' s marked as a duplicate of a security sensitive bug when i submit the form, i get the "" duplicate warning "" page that asks me to confirm whether or not the reporter should be added to the other bug ' s cc list i ' m not doing anything but ccing myself, so it shouldn ' t be prompting me. Date: '2008-09-29 09:10:50' From: 'frdric buclin' this is a pretty severe regression i didn ' t investigate yet which bug regressed this if you belong to the group the public bug is pointing to, you can ignore the message and cc yourself or do any other change *but* if you don ' t belong to that group (which is my case in the example given in comment 0) and you have editbugs privs, you are no longer allowed to edit the public bug *at all* i just tried cc ' ing myself to bug 457543, and b.m.o didn ' t let me do this i can reproduce the bug upstream so this is not due to a local customization investigating! Date: '2008-09-29 10:01:02' From: 'frdric buclin' created attachment 340945 patch, v1 the problem was that $self- > check($dup_id) was called in all cases, even if the dupe was already here i changed set_dup_id() to only validate the bug id, and do nothing if the dupe id matches $self- > dup_id i also removed the 2nd argument ' dup_id ' passed to check(), which has no meaning for this method. Date: '2008-09-29 16:32:13' From: 'max kanat-alexander' comment on attachment 340945 patch, v1 > index bugzilla/bug.pm > - my $dupe_of_bug = $self- > check($dupe_of, ' dup_id ' ) > + my $dupe_of_bug = $self- > check($dupe_of) that argument does have meaning--it makes the error message clearer > @@ -1807,12 +1807,17 @@ sub _clear_dup_id { $_[0]- > {dup_id} = un > sub set_dup_id { > my ($self, $dup_id) = @_ > my $old = $self- > dup_id || 0 > + # we call new() rather than check() to avoid group restriction > + # checks if the user cannot see the dupe but the dupe was already > + # set, that ' s fine > + my $dupe_of = new bugzilla::bug($dup_id) > + return if $old == $dupe_of- > id this sort of thing should be in the checker, not in set. Date: '2008-09-29 16:50:34' From: 'frdric buclin' (in reply to comment #3) > this sort of thing should be in the checker, not in set i don ' t see why this code was already in set_dup_id() all i did was to move $dupe_of before return you still have to return at this point in set_dup_id(), so the code cannot go into _check_dup_id(). Date: '2008-09-29 17:11:18' From: 'max kanat-alexander' well, first off, new() doesn ' t do any trimming, so spaces will confuse it, in which case your code would die (in fact, any invalid $dupe_of would now cause the setter to die.) also, it ' s really just more logical to have it in the checker, since we shouldn ' t be doing any checks if the dupe_of hasn ' t changed. Date: '2008-09-30 09:26:40' From: 'frdric buclin' created attachment 341114 patch, v2 to avoid creating the same bug object three times in a row, i altered check() a bit to accept either a bug id or a bug object if you pass an id, its behavior is unchanged if you pass an object, it doesn ' t try to recreate it and only do visibility checks on it also, if the 2nd argument ' dupe_id ' is passed, now check() behaves the same way as ' dependson ' and ' blocks ' , i.e it returns before doing visibility checks, so that we have a chance to test the bug existence separately from visibility checks while still complaining if the bug doesn ' t exist and finally, _check_dup_id() returns early if it detects that the dupe is unchanged i tested it and it ' s working fine. Date: '2008-10-15 07:13:45' From: 'max kanat-alexander' comment on attachment 341114 patch, v2 okay, i have an idea instead of letting check take a bug object, let ' s create a new bugzilla bug method called $bug- > check_is_visible(), which just does the can_see_bug code at the end of check() then we can re-use that method inside of the dup_id checker. Date: '2008-10-15 18:24:08' From: 'frdric buclin' created attachment 343337 patch, v3 implement $bug- > check_is_visible. Date: '2008-10-16 03:31:51' From: 'max kanat-alexander' comment on attachment 343337 patch, v3 okay, this looks great but why did you remove the "" || 0 "" at the bottom of the patch, there won ' t that cause undef warnings? Date: '2008-10-16 04:15:48' From: 'frdric buclin' (in reply to comment #9) > okay, this looks great but why did you remove the "" || 0 "" at the bottom of the > patch, there won ' t that cause undef warnings i removed || 0 because if you come that far in the code, this means the dupe id exists and is valid so it can never be undefined if it ' s undefined at this point, this means set_dup() didn ' t do its job correctly as it should throw an error that the bug id is missing. Date: '2008-10-16 05:01:24' From: 'frdric buclin' pff, my patch doesn ' t apply cleanly on 3.2 here is the checkin for tip tip checking in bugzilla/bug.pm /cvsroot/mozilla/webtools/bugzilla/bugzilla/bug.pm,v < -- bug.pm new revision: 1.265 previous revision: 1.264 done Date: '2008-10-16 05:22:42' From: 'frdric buclin' created attachment 343386 patch for 3.2, v1 here is the backport for 3.2rc1 the idea is exactly the same, except validatebugid doesn ' t return a bug object so i have to pass the bug id to check_is_visible() instead of having it as a method. Date: '2008-10-16 06:00:43' From: 'max kanat-alexander' comment on attachment 343386 patch for 3.2, v1 sure, looks great. Date: '2008-10-16 06:06:24' From: 'frdric buclin' 3.2rc1 checking in bugzilla/bug.pm /cvsroot/mozilla/webtools/bugzilla/bugzilla/bug.pm,v < -- bug.pm new revision: 1.241.2.15 previous revision: 1.241.2.14 done Date: '2011-12-03 08:07:10' From: 'frdric buclin' created attachment 578840 [details] selenium script committing to: bzr+ssh://lpsolit%40gmail.com@bzr.mozilla.org/bugzilla/qa/4.2/ added t/test_dependencies.t committed revision 219. committing to: bzr+ssh://lpsolit%40gmail.com@bzr.mozilla.org/bugzilla/qa/4.0/ added t/test_dependencies.t committed revision 206.","i ' m trying to cc myself on bug 457543 it ' s a public bug, but it ' s marked as a duplicate of a security sensitive bug i ' m not doing anything but ccing myself, so it shouldn ' t be prompting me. if you belong to the group the public bug is pointing to, you can ignore the message and cc yourself or do any other change *but* if you don ' t belong to that group (which is my case in the example given in comment 0) and you have editbugs privs, you are no longer allowed to edit the public bug *at all* the problem was that $self- > check($dup_id) was called in all cases, even if the dupe was already here to avoid creating the same bug object three times in a row, i altered check() a bit to accept either a bug id or a bug object and finally, _check_dup_id() returns early if it detects that the dupe is unchanged the idea is exactly the same, except validatebugid doesn ' t return a bug object"
34,"""(341981) mozilla - sporadic "" engine has no properties "" error on startup"" Date: '2006-06-18 22:42:29' From: 'gavin sharp' i ' m not sure the exact situations in which this happens, i think it has to do with using multiple builds with the same profile, but i ' ve hit it three times in the past day what ends up happening is that the _buildsortedenginelist pre-allocates an array of a certain size, then fills the engine in order from the storage file if not all slots are full, then this._engines contains undefined items and iterating through the engine list later in the startup process fails, giving a "" engine has no properties "" error and a blank search dropdown i guess this could have happened when i ran a build including the "" use storage "" patch, which created the db, and then used an older build that didn ' t include that patch to install an engine when the newer build starts up, a new engine exists that doesn ' t have an entry in the db, which leaves the blank slot in the array to fix this, we should make sure that the resultant array from _buildsortedenginelist doesn ' t contain any undefined items. Date: '2006-06-19 11:19:26' From: 'joey minta' the patch in bug #340331 has a fix for this. Date: '2006-06-20 01:53:40' From: 'gavin sharp' *** bug 342122 has been marked as a duplicate of this bug *** Date: '2006-06-20 02:32:39' From: 'ria klaassen' Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9a1) Gecko/20060619 Minefield/3.0a1 under unknown circumstances firefox becomes location-sensitive only a search in google works, although all plugins are present, also in the app directory error: uncaught exception[exception.."" ' [javascript error: "" engine has no properties "" {file: ""file:///C:/Docume~1/Ria/Bureau~1/trunk/firefox/components/nsSearchService.js"" line: 2118}]' when calling method [nsibrowsersearchservice::getvisibleengines] "" nsresult: "" 0x80570021 (ns_error_xpc_javascript_error_with_details) "" location: ""JS frame :: chrome://browser/content/search/search.xml :: rebuildPopup :: line 256""  data: yes] when i copy the application to another place, suddenly the gray text and the plugins are working again. Date: '2006-06-20 02:43:32' From: 'gavin sharp' if the search component doesn ' t successfully load the first time you run a build after unzipping it (like when you remove the plugins folder), subsequent startups may also fail because firefox won ' t try to reload the search component again by moving the program folder, you ' re changing the last-modified date of the .autoreg file, which tells firefox to try reloading the component at the next startup. Date: '2006-06-20 13:37:44' From: 'phil ringnalda' *** bug 342168 has been marked as a duplicate of this bug *** Date: '2006-06-20 13:43:21' From: 'simon bnzli' created attachment 226388 respect the fact that _engines is no array Date: '2006-06-20 13:46:36' From: 'simon bnzli' as i see it, this is a regression from bug 335101 which initializes the _sortedengines array always with length 1 - which causes an undefined engine if there are none. Date: '2006-06-20 13:53:14' From: 'gavin sharp' comment on attachment 226388 respect the fact that _engines is no array i don ' t see how this helps, the array will still have holes if one of the earlier engines in the db sort order no longer exists i prefer the patch in bug 340331 (just filter the array once we ' ve gone through all db entries). Date: '2006-06-20 14:11:04' From: 'simon bnzli' even if it doesn ' t fix the general case, that bit of code is still wrong and should be fixed (_engines is an object and no array) would you prefer a new bug to check this fix in, should i mention the issue over at bug 340331 or will you reconsider fixing it here? Date: '2006-06-20 14:27:44' From: 'peter van der woude' this should be gone before beta1 Date: '2006-06-20 15:13:00' From: 'gavin sharp' comment on attachment 226388 respect the fact that _engines is no array ah, you ' re right, sorry yes, we should take both this fix and the filter fix from bug 341986. Date: '2006-06-23 14:19:45' From: 'darin fisher' comment on attachment 226388 respect the fact that _engines is no array a=darin on behalf of drivers (please land this on the mozilla_1_8_branch and add the fixed1.8.1 keyword to this bug) Date: '2006-06-24 06:54:19' From: 'gavin sharp' checked in on the branch and trunk i ' ll leave this open until bug 335102 lands because the problem isn ' t entirely fixed until then i can ' t mark it as depending on bug 335102, though, because bugzilla sucks (i wish bug 251556 was fixed) mozilla/browser/components/search/nssearchservice.js 1.1.2.37 mozilla/browser/components/search/nssearchservice.js 1.43 Date: '2006-06-24 10:46:10' From: 'ria klaassen' i still see the problem that the menus are too large (too many items) - delete searchplugins everywhere (remove folders) - start firefox, double-click a word on a page, watch the context-menu Date: '2006-06-24 12:50:59' From: 'gavin sharp' (in reply to comment #14) > i still see the problem that the menus are too large (too many items) can you file another bug on that it ' s a separate issue - the context menu code should check for a null currentengine it ' s pretty unlikely to affect any "" normal "" user, though Date: '2006-06-24 13:47:15' From: 'ria klaassen' (in reply to comment #15) > filed bug 342643 for this. Date: '2006-07-05 13:24:34' From: 'darin fisher' adding fixed1.8.1 flag since this patch has been landed on the mozilla_1_8_branch per comment #13 i realize that we want bug 335102 to be fixed as well, but that one looks iffy for beta1. Date: '2006-07-05 16:15:37' From: 'gavin sharp' i think we should take the one line fix from that patch to fix this issue this bug sucks, and the fix is easy, so we shouldn ' t wait for bug 335102 to land to fix this. Date: '2006-07-05 16:25:06' From: 'joey minta' created attachment 228216 filter fix splitting the .filter fix out of my renaming patch, since renaming has been retargeted for beta2. Date: '2006-07-05 16:29:42' From: 'gavin sharp' comment on attachment 228216 filter fix > + // filter out any nulls for engines that may have been removed > + this._sortedengines = this._sortedengines.filter(function(a) { return a}) i ' d kinda prefer "" !!a "" to make it clear it ' s the boolean value that matters put this right above the "" // array for the remaining engines, alphabetically sorted "" comment, too, since this isn ' t related to the alphaengines stuff. Date: '2006-07-05 16:42:43' From: 'joey minta' checking in browser/components/search/nssearchservice.js /cvsroot/mozilla/browser/components/search/nssearchservice.js,v < -- nssearchservice.js new revision: 1.49 previous revision: 1.48 done Date: '2006-07-05 16:43:36' From: 'joey minta' comment on attachment 228216 filter fix requesting approval for low-risk high-reward fix, intentionally split off to be acceptable for beta1. Date: '2006-07-05 19:45:47' From: 'gavin sharp' mozilla/browser/components/search/nssearchservice.js 1.1.2.42","what ends up happening is that the _buildsortedenginelist pre-allocates an array of a certain size, then fills the engine in order from the storage file if not all slots are full, then this._engines contains undefined items and iterating through the engine list later in the startup process fails, giving a "" engine has no properties "" error and a blank search dropdown when the newer build starts up, a new engine exists that doesn ' t have an entry in the db, which leaves the blank slot in the array the patch in bug #340331 has a fix for this. if the search component doesn ' t successfully load the first time you run a build after unzipping it (like when you remove the plugins folder), subsequent startups may also fail because firefox won ' t try to reload the search component again by moving the program folder, you ' re changing the last-modified date of the .autoreg file, which tells firefox to try reloading the component at the next startup. i ' ll leave this open until bug 335102 lands because the problem isn ' t entirely fixed until then i realize that we want bug 335102 to be fixed as well, but that one looks iffy for beta1. i think we should take the one line fix from that patch to fix this issue put this right above the "" // array for the remaining engines, alphabetically sorted "" comment, too, since this isn ' t related to the alphaengines stuff. comment on attachment 228216 filter fix requesting approval for low-risk high-reward fix, intentionally split off to be acceptable for beta1."
35,"""(330482) mozilla - create additional cnames for start.mozilla.com"" Date: '2006-03-14 10:39:31' From: 'gavin sharp' to fix bug 327208, additional cnames need to be added to start.mozilla.com i will attach a list of what needs to be added not sure who needs to sign off on this. Date: '2006-03-14 10:41:24' From: 'gavin sharp' created attachment 215036 cnames to be added these correspond to all the locales that exist in 1.0.x, obtained from http://lxr.mozilla.org/l10n-aviarybranch/source/browser/locales/ it does not include ko-kr and ja-jp, which already have cnames "" be "" is a 1.5.0.x locale that does not already have a cname, so i ' ve included it. Date: '2006-03-14 10:46:36' From: 'gavin sharp' comment on attachment 215036 cnames to be added sorry, this list has duplicates will attach the correct file in a bit. Date: '2006-03-14 10:48:39' From: 'dave miller' this needs coordination from marketing first as they need to verify that the correct destination domains exist at yahoo/google first. Date: '2006-03-14 10:54:37' From: 'gavin sharp' created attachment 215037 correct zonefile Date: '2006-03-14 10:59:44' From: 'gavin sharp' we need to ensure that a vhost for ja-jp.start.mozilla.com is correctly configured at ja-jp.mozilla.search.yahoo.com. Date: '2006-03-14 18:17:33' From: 'mike schroepfer' john/chris - we are blocked on your confirmation that these are the right addresses for the start pages for 1.0.8 Date: '2006-03-14 19:30:06' From: 'gavin sharp' the main issue, as i understand it, is that we need to ensure that yahoo is set up to handle ja-jpm.start.mozilla.com pointing to ja-jp.mozilla.search.yahoo.com dave miller mentioned that there were problems related to that in the past all other domains (pointing to google) should be ok that being said, i ' m not sure whether that should really hold back this change - if we make these changes, and bug 327208 ' s patch is checked in, default homepages for all 1.0.x builds, with the possible exception of ja-jpm (pending a config change to yahoo ' s server), should work they would be identical to the start pages for the 1.5.0.x builds things can then be tested and we can see where we are at. Date: '2006-03-15 05:42:42' From: 'mike shaver' why don ' t we just point ja-jpm.start.mozilla.com at virtual-redirect.mozilla.org, and then redirect from there to ja-jp.start.mozilla.com, which is correctly configured and working already at yahoo today this is what we ' re already doing with ja-jp-mac.start.mozilla.com (the 1.5 name for ja-jpm), and it seems to be working fine. Date: '2006-03-15 09:40:46' From: 'gavin sharp' ah, i hadn ' t considered that - but you ' re right, that would work i take it this bug can now be moved back to server ops so these changes can be made? Date: '2006-03-15 12:28:18' From: 'mike schroepfer' why in the world would we do a http redirect do we know for sure the server can take the load have we measured the additional latency induced by sending every japan request across the pacific ocean why not push the zone file (or edit a local hosts file) and test out whether it works fine? Date: '2006-03-15 12:29:40' From: 'mike schroepfer' also - why not checkin bug 327208 once we get those in we can respin and test out whole system. Date: '2006-03-15 12:53:21' From: 'mike schroepfer' assigning to justin to implement zone file. Date: '2006-03-15 13:12:43' From: 'mike schroepfer' ok - didn ' t fully grok the history here - so sorry for jumping on this just had a in-person discussion with justin, cbeard, lilly, and with gavin over irc here ' s the scoop 1) we need to push this zone file except for ja-jpm this is to make sure that the local.start.mozilla.com works for all 1.0.8 users since many of the locales have different code from 1.0.x and 1.5.0.x and thus those dns records don ' t exist justin will drive this in 2) sounds like for ja-jpm y japan is not setup in their vhosts - so we will do the same redirect hack as done in 1.5 for the mac this is just for japan mac users justin will make sure this redirect is setup 3) in parallel it might not be a bad idea for john to work with y to setup their vhosts for the mac so we don ' t force the extra latency on japan users lilly to take this thanks all schrep Date: '2006-03-15 13:20:27' From: 'justin fitzhugh' depends on the original and temporary hack/bug which was done (318021) we need to get the yahoo vhosts setup correctly (for ja-jp-mac and ja-jpm) so we can move both of these off virtual-redirect and to cnames in parallel - jlilly will talk to yahoo (in reply to comment #10) > why in the world would we do a http redirect do we know for sure the server > can take the load have we measured the additional latency induced by sending > every japan request across the pacific ocean > > why not push the zone file (or edit a local hosts file) and test out whether it > works fine Date: '2006-03-15 14:38:12' From: 'rafael ebron' http://ja-jp-mac.start.mozilla.com is supported by yahoo in vhost as of 12/14/05 working on http://ja-jpm.start.mozilla.com to get supported. Date: '2006-03-15 14:58:21' From: 'rafael ebron' eta: 3/22 for http://ja-jpm.start.mozilla.com on the yahoo side. Date: '2006-03-15 17:04:19' From: 'justin fitzhugh' ok, all the zone updates are done and tested, ja-jp-mac is no longer a redirect but rather a cname and the ja-jpm redirect is in and working i ' ll keep 318021 open until 3/22 when i ' ll test that the ja-jpm vhost is in and working - then migrate ja-jpm to a cname. Date: '2006-03-15 17:04:52' From: 'justin fitzhugh' ok, all the zone updates are done and tested, ja-jp-mac is no longer a redirect but rather a cname and the ja-jpm redirect is in and working i ' ll keep 318021 open until 3/22 when i ' ll test that the ja-jpm vhost is in and working - then migrate ja-jpm to a cname.","to fix bug 327208, additional cnames need to be added to start.mozilla.com these correspond to all the locales that exist in 1.0.x, obtained from http://lxr.mozilla.org/l10n-aviarybranch/source/browser/locales/ it does not include ko-kr and ja-jp, which already have cnames this needs coordination from marketing first as they need to verify that the correct destination domains exist at yahoo/google first. the main issue, as i understand it, is that we need to ensure that yahoo is set up to handle ja-jpm.start.mozilla.com pointing to ja-jp.mozilla.search.yahoo.com dave miller mentioned that there were problems related to that in the past why don ' t we just point ja-jpm.start.mozilla.com at virtual-redirect.mozilla.org, and then redirect from there to ja-jp.start.mozilla.com, which is correctly configured and working already at yahoo today this is what we ' re already doing with ja-jp-mac.start.mozilla.com (the 1.5 name for ja-jpm), and it seems to be working fine. why not push the zone file (or edit a local hosts file) and test out whether it works fine? 1) we need to push this zone file except for ja-jpm japan is not setup in their vhosts - so we will do the same redirect hack as done in 1.5 for the mac justin will make sure this redirect is setup 3) in parallel it might not be a bad idea for john to work with y ok, all the zone updates are done and tested, ja-jp-mac is no longer a redirect but rather a cname and the ja-jpm redirect is in and working"
36,"""(477435) mozilla - zoomtoelement sometimes doesn ' t work"" Date: '2009-02-07 17:28:18' From: 'gavin sharp' str 1) load cnn.com 2) double tap on the paragraph of text under the image on the top left expected: zooms to fit paragraph on screen actual pans to the top left edge of the paragraph, but no zoom Date: '2009-02-07 19:59:06' From: 'gavin sharp' created attachment 361111 patch this bug was happening because we ' re calling zoomtopage from the drawinterval after the zoomtoelement (which also explains why it was intermittent - if you wait until the page load is done, everything is fine) the fix is to move the _maybezoomtopage=false to zoomlevel setter, and make it unconditional this makes sure that zoomtoelement calls aren ' t clobbered by zoomtopages triggered from the load timer i also don ' t see any reason that it needs to be dependent on _clippedpagedrawing, since _clippedpagedrawing might be false if you ' ve panned during the pageload, and we want to avoid clobbering the zoomlevel either way other minor functional changes -remove setting of _maybezoomtopage in prepareforpanning, since i don ' t understand its purpose (if _maybezoomtopage is false there, i don ' t see any reason for it to revert to true) -removed math.max() calls for visiblebounds in viewporthandler (those values can ' t be negative, since they come from the intersection of a rect with the viewportrect) -removed "" heuristic to throttle zoomtopage during page load "" from _redrawrect, because i also don ' t understand its purpose -changed r2 used in _redrawrect to avoid having to calculate effectivecanvasdimensions (rect is already properly sized, just need to clip it correctly) i ' m not quite sure about the two removals of _maybezoomtopage setting - it may be that i ' m misunderstanding the design with this patch, we ' ll zoomtopage the first time the _drawinterval fires, and then again on endload was it intended that we zoomtopage more often than that (e.g. each time _drawinterval fires)? Date: '2009-02-08 14:48:32' From: 'taras glek' comment on attachment 361111 patch zoomtopage is meant to be called for the duration of page loading this helps avoiding having the page load in one zoom level and then jump to another once it finishes loading current design does not support zooming during page load as that zoom setting will be lost as soon as the page loads(even with your hack) i think a better way would be to add a flag like _manuallyzoomed that turns off zoomtopaging during pageload. Date: '2009-02-08 14:56:00' From: 'taras glek' > the fix is to move the _maybezoomtopage=false to zoomlevel setter, and make it > unconditional this makes sure that zoomtoelement calls aren ' t clobbered by > zoomtopages triggered from the load timer i also don ' t see any reason that it > needs to be dependent on _clippedpagedrawing, since _clippedpagedrawing might > be false if you ' ve panned during the pageload, and we want to avoid clobbering > the zoomlevel either way actually prepare forpanning ensures maybezoomtopage is on when clippedpagedrawing is off i know the amount of states is hard to deal with eventually we ' ll make all drawing incremental which will help reduce state explosion > > other minor functional changes > -remove setting of _maybezoomtopage in prepareforpanning, since i don ' t > understand its purpose (if _maybezoomtopage is false there, i don ' t see any > reason for it to revert to true) yeah and then page bounds wouldn ' t get updates during pageload which breaks panning > -removed math.max() calls for visiblebounds in viewporthandler (those values > can ' t be negative, since they come from the intersection of a rect with the > viewportrect) that is valid, the code is leftover > -removed "" heuristic to throttle zoomtopage during page load "" from _redrawrect, > because i also don ' t understand its purpose that ' s not a good reason to remove things before we zoomtopaged every 2 seconds, now we zoomtopage whenever something is drawn to the right of what ' s currently visible > -changed r2 used in _redrawrect to avoid having to calculate > effectivecanvasdimensions (rect is already properly sized, just need to clip it > correctly) that ' s probably correct > > i ' m not quite sure about the two removals of _maybezoomtopage setting - it may > be that i ' m misunderstanding the design with this patch, we ' ll zoomtopage the > first time the _drawinterval fires, and then again on endload was it intended > that we zoomtopage more often than that (e.g. each time _drawinterval fires) yes. Date: '2009-02-09 03:58:56' From: 'gavin sharp' comment on attachment 361111 patch (in reply to comment #3) > that ' s not a good reason to remove things obviously not, but that ' s why i asked for review do you want to take this bug i ' m not really clear on what bugs this patch causes (panning while loading?), so i ' m not sure the best way to fix it. Date: '2009-02-09 04:25:13' From: 'gavin sharp' (in reply to comment #2) > current design does not support zooming during page load as that zoom setting > will be lost as soon as the page loads(even with your hack) yeah, that ' s this bug i think making my patch check _maybezoomtopage before the final _endload zoomtopage call would fix that i could also make it continue calling zoomtopage during pageload, assuming the user hasn ' t zoomed in during that time. Date: '2009-02-09 04:37:29' From: 'gavin sharp' (in reply to comment #3) > actually prepareforpanning ensures maybezoomtopage is on when > clippedpagedrawing is off we only set maybezoomtopage to false if (_clippedpagedrawing), in zoomtopage so as far as i can tell _maybezoomtopage would still be true in that case. Date: '2009-02-09 12:48:08' From: 'gavin sharp' created attachment 361326 simpler patch looking at this again, i think i misdiagnosed the original problem.. zooming while loading *is* in fact busted, but the reason i was actually seeing this is that once loaded, addtodrawq still calls resizeandpaint, and that can trigger a sizetopage if _maybezoomtopage is still true so while we probably do need to fix the zooming-while-loading case, this simpler patch fixes the bug i ' m seeing on cnn. Date: '2009-02-09 17:43:27' From: 'taras glek' created attachment 361437 fix i think this fixes the bug. Date: '2009-02-09 17:49:32' From: 'taras glek' http://hg.mozilla.org/mobile-browser/rev/8cf5f1148dda Date: '2009-08-27 09:38:11' From: 'joel maher' verified with beta3","1) load cnn.com 2) double tap on the paragraph of text under the image on the top left expected: zooms to fit paragraph on screen actual pans to the top left edge of the paragraph, but no zoom this bug was happening because we ' re calling zoomtopage from the drawinterval after the zoomtoelement (which also explains why it was intermittent - if you wait until the page load is done, everything is fine) the fix is to move the _maybezoomtopage=false to zoomlevel setter, and make it unconditional current design does not support zooming during page load as that zoom setting will be lost as soon as the page loads(even with your hack) i think a better way would be to add a flag like _manuallyzoomed that turns off zoomtopaging during pageload. we only set maybezoomtopage to false if (_clippedpagedrawing), in zoomtopage zooming while loading *is* in fact busted, but the reason i was actually seeing this is that once loaded, addtodrawq still calls resizeandpaint, and that can trigger a sizetopage if _maybezoomtopage is still true so while we probably do need to fix the zooming-while-loading case, this simpler patch fixes the bug i ' m seeing on cnn. created attachment 361437 fix i think this fixes the bug."
37,"""(654126) mozilla - Segmentation fault [@ js_BooleanIntToString ]. js_BooleanIntToString (methodjit, x86_64)"" Date: '2011-05-02 09:02:19' From: 'jonathan protzenko' created attachment 529489 full backtrace so i started noticing something suspicious when my debug statement told me that i had a = true, b = true and c = true, and also c = a && !b moving debug statements around now give me a reliable crash disabling the methodjit makes the problem go away here s a full backtrace i ll try to reproduce this with a debug build (this a symbol + opt build) and post the results, probably tomorrow (cest) protzenk@sauternes: ~/c/comm-central $ hg log | head -n1 changeset: e30e000dd47c protzenk@sauternes: ~/c/c/mozilla $ hg log | head -n1 changeset: 79157d41d7bc this is triggered by chrome code using let-bindings in a thunderbird extension this is the function that exhibited the funny boolean behavior https://github.com/protz/gmail-conversation-view/blob/master/modules/monkeypatch.js#l164 that s pretty much all i can tell Date: '2011-05-02 09:22:47' From: 'jonathan protzenko' created attachment 529491 backtrace on a debug build Date: '2011-05-02 09:23:11' From: 'jonathan protzenko' created attachment 529492 thunderbird log (one assert failing near the end) Date: '2011-05-03 14:46:21' From: 'jonathan protzenko' created attachment 529840 valgrind log Date: '2011-05-05 08:20:49' From: 'jonathan protzenko' program received signal sigint, interrupt 0x00007f22a0808dd8 in scanobject (this=<value optimized out>) at /home/jonathan/sources/comm-central/mozilla/js/src/jsgcmark.cpp 537 537 if (obj->isnewborn()) (gdb) bt full #0 0x00007f22a0808dd8 in scanobject (this=<value optimized out>) at /home/jonathan/sources/comm-central/mozilla/js/src/jsgcmark.cpp 537 clasp = 0x50c #1 js::gcmarker::drainmarkstack (this=<value optimized out>) at /home/jonathan/sources/comm-central/mozilla/js/src/jsgcmark.cpp 711 no locals cannot access memory at address 0x7fff02b60c58 i m also getting errors in the gc, but this time with methodjit disabled, don t know if this is related... Date: '2011-05-06 01:26:07' From: 'jonathan protzenko' created attachment 530568 another backtrace, might be useful Date: '2011-05-06 09:05:36' From: 'bill mccloskey' thanks unfortunately, i m not really seeing anything useful pop out of these stack traces i think we ll have to reproduce this to know what s going on could you give more detailed steps to reproduce i m guessing i ll have to install thunderbird along with the gmail-conversation-view extension which version of the extension should i use and is there any consistent way to trigger the crash? Date: '2011-05-07 01:25:09' From: 'jonathan protzenko' created attachment 530816 a build of thunderbird conversations to play with ok, here s the (pretty involved, sorry) debug procedure - on x86_64, build thunderbird 3.4 (comm-central + mozilla-central) the bug still seems to be there in recent revisions, but to be on the safe side, i d recommend using the set of revisions which are known to fail - run thunderbird, install thunderbird conversations from tools > addons restart thunderbird - you are prompted with the setup assistant click apply changes - you re now facing your inbox click on a collapsed thread and, using the keyboard and the right arrow / left arrow keys, repeatedly expand / collapse that thread proceed that way, possibly moving to other threads with the keyboard, until you segfault - you can tell that things have gone awry if the thread is collapsed and the message that is expanded in the conversation is the first one, not the last one as it should be please let me know if you manage to reproduce this.. if you can t reproduce, i might be able to open a gdbserver on my machine and let you poke around at things. Date: '2011-05-11 14:45:59' From: 'jonathan protzenko' https://crash-stats.mozilla.com/report/index/8a04f11c-bd8b-4540-934d-aef6d2110511 also crashed on thunderbird 3.3a4 which is built on top of mozilla-aurora. Date: '2011-05-17 11:28:51' From: 'leho kraav' indeed, i seem to be running into random crashes lately as well my only correlation is that i have upgraded 10.5.8 -> 10.6.7 protz gave me the url to this bug and it seems my last crash report has the same signature https://crash-stats.mozilla.com/report/index/bp-c7601a74-7753-4a5d-8636-a47b42110517 comments tab should have links to my other crashes as well miramar 3.3a3 behaved rock stable on leopard it is also behaving very stable on 32-bit linux laptop i m running. Date: '2011-05-17 12:07:20' From: 'jonathan protzenko' https://crash-stats.mozilla.com/report/index/5050b202-fb38-483c-82f8-2c1c42110517 https://crash-stats.mozilla.com/report/index/d663d862-c036-492f-88f1-e4de92110517 https://crash-stats.mozilla.com/report/index/578e06e0-1fdc-40b9-9b79-3de8c2110517 all of these crashed within 10 seconds of thunderbird startup. Date: '2011-05-18 23:09:10' From: 'leho kraav' is something you re doing in gcv manifesting this issue or would a completely clean miramar also crash with it? Date: '2011-05-19 12:14:30' From: 'jonathan protzenko' created attachment 533747 fix the issue so mrbkap found the bug all the extensive details are in bug 658351, and here s a patch that should fix it i think we should do a more thorough review of mailnews code for this class of errors, but i m afraid we don t have automated analysis tools for that. Date: '2011-05-19 12:27:07' From: 'jonathan protzenko' created attachment 533754 conformance with the style guide Date: '2011-05-19 12:44:39' From: 'jonathan protzenko' http://hg.mozilla.org/comm-central/rev/184b63b572e1 Date: '2011-05-19 12:52:30' From: 'jonathan protzenko' comment on attachment 533754 conformance with the style guide we should definitely land this on 3.3 as it s crashing miramar pretty badly. Date: '2011-05-26 06:05:35' From: 'jonathan protzenko' http://hg.mozilla.org/releases/comm-miramar/rev/60fad03d78a5","created attachment 529489 full backtrace moving debug statements around now give me a reliable crash here s a full backtrace cannot access memory at address 0x7fff02b60c58 i m also getting errors in the gc, but this time with methodjit disabled, don t know if this is related... a build of thunderbird conversations to play with ok, here s the (pretty involved, sorry) debug procedure also crashed on thunderbird 3.3a4 which is built on top of mozilla-aurora. all of these crashed within 10 seconds of thunderbird startup. all the extensive details are in bug 658351, and here s a patch that should fix it i think we should do a more thorough review of mailnews code for this class of errors, but i m afraid we don t have automated analysis tools for that."
38,"""(681873) mozilla - Add basic Telemetry support to Thunderbird"" Date: '2011-08-24 23:07:45' From: 'jonathan protzenko' created attachment 555657 toolkit patch v1 this patch adds three news fields to telemetry.h, fixes a couple comments, and makes the error code more meaningful in one case - indexing rate when performing an initial indexing of the messages, how many messages per second we re able to index, in conformance with our cpu hogging ratio - gloda database size one probe on startup, that tells how large the database is - time to 2nd gloda query for conversations conversations is an officially supported addon for thunderbird, and a lot of time is spent querying gloda, and we d like to figure out how long people wait on average there s two subsequent queries, and this aims at measuring how long the two take to complete (there s still templating and rendering time, but these are more easily actionable without getting large field data) these are the most urgent things to measure, as these are likely to improve significantly once my small queue of patches to gloda lands. Date: '2011-08-24 23:08:18' From: 'jonathan protzenko' created attachment 555658 thunderbird patch v1 Date: '2011-08-24 23:10:51' From: 'jonathan protzenko' squib, i m ccing you on the bug so that you can see how easy it actually is to add telemetry probes what we could do for a start is - count how many times per hour people use detach, or delete, - probe the size of their screens, - and much more however, the probes above raise bigger privacy concerns than mere sqlite timings i m pretty sure they will warrant a privacy review i m unsure about the three i m adding here, so i thought we could spin off a separate bug to add more thunderbird-specific telemetry probes. Date: '2011-08-25 12:04:49' From: 'andrew sutherland' comment on attachment 555657 toolkit patch v1 i suspect taras needs to review this i may have misled you when i said i reviewed some telemetry probes for storage, i reviewed those for the storage module also, i m worried my suggestion to #ifdef these might also be wrong, but i don t know how the server works enough to know what is right. Date: '2011-08-25 12:15:20' From: 'andrew sutherland' comment on attachment 555658 thunderbird patch v1 this looks fine, although there may be some ambiguity between whether we are just indexing messages really slowly or are working some other type of jobs it might be worth adding another flag that is _messageindexingjobactive that gets set when we create a worker for message indexing, so that you only report worker batches where any messages were indexed since the lowest possible value is 1, rather than 0, will the 0-sample points get discarded maybe you should use a unit of messages per 10secs in order to get more detail at the low end so pathological cases stick out more. Date: '2011-08-25 14:00:26' From: 'taras glek' comment on attachment 555657 toolkit patch v1 >- if (ns_failed(rv)) >- return ns_error_failure >+ ns_ensure_success(rv, rv) good catch, but please change this to return rv >- * this file lists telemetry histograms collected by firefox the format is >+ * this file lists telemetry histograms collected by firefox and other programs >+ * the format is this file lists telemetry histograms collected by mozilla other programs is pretty vague r+ with above return + wording chage Date: '2011-08-25 14:25:05' From: 'jonathan protzenko' (in reply to andrew sutherland (:asuth) from comment #4) > comment on attachment 555658 > thunderbird patch v1 > > this looks fine, although there may be some ambiguity between whether we are > just indexing messages really slowly or are working some other type of jobs > it might be worth adding another flag that is _messageindexingjobactive > that gets set when we create a worker for message indexing, so that you only > report worker batches where any messages were indexed > > since the lowest possible value is 1, rather than 0, will the 0-sample > points get discarded maybe you should use a unit of messages per 10secs > in order to get more detail at the low end so pathological cases stick out > more so the only worker that bumps the _indexedmessagecount is the folder-message-indexer, and there s an if that says if we didn t index any message, don t add a probe i guess that answers the concern. Date: '2011-09-09 05:02:31' From: 'jonathan protzenko' http://hg.mozilla.org/integration/mozilla-inbound/rev/1af35a19b87e for the first patch only, since the second one is for comm-central Date: '2011-09-09 22:50:11' From: 'justin wood' (in reply to jonathan protzenko [:protz] from comment #7) > http://hg.mozilla.org/integration/mozilla-inbound/rev/1af35a19b87e for the > first patch only, since the second one is for comm-central landed on m-c Date: '2011-09-10 04:46:51' From: 'jonathan protzenko' http://hg.mozilla.org/comm-central/rev/d7fd7d9740f8 for the thunderbird part","this patch adds three news fields to telemetry.h, fixes a couple comments, and makes the error code more meaningful in one case - indexing rate - gloda database size - time to 2nd gloda query for conversations comment on attachment 555658 thunderbird patch v1 this looks fine, although there may be some ambiguity between whether we are just indexing messages really slowly or are working some other type of jobs it might be worth adding another flag that is _messageindexingjobactive that gets set when we create a worker for message indexing, so that you only report worker batches where any messages were indexed maybe you should use a unit of messages per 10secs in order to get more detail at the low end so pathological cases stick out more. so the only worker that bumps the _indexedmessagecount is the folder-message-indexer, and there s an if that says if we didn t index any message, don t add a probe http://hg.mozilla.org/integration/mozilla-inbound/rev/1af35a19b87e"
39,"""(645552) mozilla - Thunderbird s tabmail does not honor onbeforeunload event handlers"" Date: '2011-03-27 14:13:18' From: 'jonathan protzenko' str - open a gmail content tab, - compose a new message, - type some text in the message body, - close the tab in firefox, this fires the are you sure you want to navigate away from this page? dialog in thunderbird, this closes the tab right away i believe thunderbird needs to do something regarding beforeunload event handlers, and possibly give them a chance to run before actually closing the tab. Date: '2011-03-27 16:04:54' From: 'wayne mery' the example you cite can lead to dataloss (unless it s actually possible to undo the tab - but the user might not remember there s changed data in the closed tab) onbeforeunload of course must be programmed in the page for this to have an effect but if you indulge me to go on a tangent and cite a broader firefox situation, see my bug 370318 and its friends it s easy for a tab to have data in it (a bug report for example) that was altered days or weeks ago and thus the user doesn t remember now, one can t totally dummy proof a browser still, i find the firefox position on this issue a bit disturbing (as well as mconnor s lack of reply to bug 370318 comment 7) i hope thunderbird might do better in this area than firefox, which as far as i know has no add-ons to mitigate the problem. Date: '2011-03-28 13:58:52' From: 'jonathan protzenko' created attachment 522466 a patch that does the right thing so this should basically fix the issue the thing is we should offer tab types a chance to refuse being closed i make this an optional argument of the tab type, and i add an implement of that new tryclosetab method for both content tabs and chrome tabs in the case of these two tab types, what happens is the method asks the browser that holds the (chrome|content)page, through its content viewer, if unload is permitted (nsicontentviewer.permitunload()) that permitunload function takes care of running onbeforeunload event listeners, and returns false if one of them canceled the unload i d say this is pretty trivial and we don t need a test for this. Date: '2011-04-08 21:44:40' From: 'mark banner' comment on attachment 522466 a patch that does the right thing >+ // false means we can t close the tab yet >+ if (docshell && docshell.contentviewer && !docshell.contentviewer.permitunload()) >+ return false >+ else >+ return true it would be better to just do return !(docshell && docshell.contentviewer && !docshell.contentviewer.permitunload()) i think we should have a test for this, as it is one of those features that although small, could easily get broken and no-one notice for ages plus i suspect the existing content-tab tests should provide a reasonable structure for this already you can land it before the test, but i would like to get a test for this. Date: '2011-04-11 07:13:32' From: 'jonathan protzenko' created attachment 525069 new version with a tentative test andrew, could you please take a look at this i think i m doing everything right, but as soon as i enter the inner mozmill loop, and try to close the modal dialog through the docommand() call, it comes back right away i ve got to be doing something wrong.. calling target.docommand() through the dom inspector does close the dialog properly, but doing the same thing through mozmill doesn t close the dialog i have no ideas right now, so i thought you might have one Date: '2011-04-11 07:29:00' From: 'mark banner' did you try doing a try/catch dump/alert in the callback function i ve found that errors typically get hidden and the effect is that the dialog does just get closed. Date: '2011-04-11 17:22:15' From: 'andrew sutherland' comment on attachment 525069 new version with a tentative test this isn t an odd mozmill issue per se i gdb ed it and the problem is that nsglobalwindow close calls nsglobalwindow canclose which calls documentviewerimpl permitunload (and it s not calling it with acallercloseswindow=true) then your code goes and calls permitunload directly the box really is popping up twice presumably you should be making sure that only one dude calls the method or that the first dude calls it in such a way that the second dude fast-paths out. Date: '2011-04-11 17:23:12' From: 'andrew sutherland' here s the js call stack of the second time if this helps at all 0 ontryclosetab(atab = [object object]) [ chrome://messenger/content/specialtabs.js: 451] docshell = [xpconnect wrapped (nsisupports, nsidocshell, nsiwebnavigation, nsidocshellhistory, nsiinterfacerequestor, nsiwebprogress) @ 0x7f6f72d716a0 (native @ 0x7f6f60791808)] this = [object object] 1 closetab(anoundo = undefined, aopttabindexnodeorinfo = [object object]) [ chrome://messenger/content/tabmail.xml: 720] closefunc = undefined tryclosefunc = [function] tabnode = [object xulelement @ 0x7f6f6fcd4d60 (native @ 0x7f6f6078e580)] tab = [object object] itab = 2 this = [object xulelement @ 0x7f6f6f0f1630 (native @ 0x7f6f6f603800)] 2 ondomwindowclose(aevent = [object event @ 0x7f6f6aa9b7b0 (native @ 0x7f6f6a256460)]) [ chrome://messenger/content/specialtabs.js: 596] this = [object xulelement @ 0x7f6f72032970 (native @ 0x7f6f6078ed80)] Date: '2011-04-12 01:45:58' From: 'jonathan protzenko' created attachment 525331 new version with a working test thanks a lot for your help debugging this actually, changing the way i close the tab fixed the issue (i m now using mc.tabmail.closetab) i ll just let you check that this is ok, then i guess i ll be able to commit this thanks again! Date: '2011-04-12 11:24:04' From: 'andrew sutherland' comment on attachment 525331 new version with a working test i agree that changing the test should make the test pass, but it seems like window.close() being invoked inside a content window is still a thing that can happen and should also be tested and i don t believe you ve fixed that i say this because i believe we went out of our way to hook up the window.close() stuff, so we shouldn t pretend it s not a thing in any event, this is really standard8 s call, so i m asking for review again because you ve materially changed what is tested i would personally suggest we test both cases and make sure the prompt only comes up once. Date: '2011-04-12 12:00:41' From: 'jonathan protzenko' thanks the problem with window.close from inside a content/chrome tab is something that s being tracked in bug 638493 (which i incidentally also reported, although i can t seem to figure out why i didn t remember it earlier) long story short, i don t think anyone right now has a clue as to why it fails... Date: '2011-04-22 05:53:50' From: 'jonathan protzenko' comment on attachment 525331 new version with a working test i think the review requestee was wrong, which might explain mark not giving his opinion on this new attempt Date: '2011-04-22 05:54:26' From: 'jonathan protzenko' er, no, mark did change his email address! Date: '2011-04-26 12:59:03' From: 'mark banner' comment on attachment 525331 new version with a working test >+ // this gives contenttabs and chrometabs a chance to run their inner >+ // onbeforeunload event listeners, who might want to cancel the >+ // tab s closing.. >+ let tryclosefunc = tab.mode.tryclosetab || tab.mode.tabtype.tryclosetab >+ if (tryclosefunc && !tryclosefunc.call(tab.mode.tabtype, tab)) >+ return i don t think you need the comment here if you want to keep it, then i think we can just make it a generic comment and not mention content/chrometabs directly. Date: '2011-04-29 01:49:57' From: 'jonathan protzenko' http://hg.mozilla.org/comm-central/rev/95f70d4b2a83","in firefox, this fires the are you sure you want to navigate away from this page? dialog in thunderbird, this closes the tab right away i believe thunderbird needs to do something regarding beforeunload event handlers, and possibly give them a chance to run before actually closing the tab. the example you cite can lead to dataloss a patch that does the right thing the thing is we should offer tab types a chance to refuse being closed i think we should have a test for this, as it is one of those features that although small, could easily get broken and no-one notice for ages new version with a tentative test andrew, could you please take a look at this actually, changing the way i close the tab fixed the issue (i m now using mc.tabmail.closetab) the problem with window.close from inside a content/chrome tab is something that s being tracked in bug 638493 (which i incidentally also reported, although i can t seem to figure out why i didn t remember it earlier)"
40,"""(646226) mozilla - Sent messages are not indexed anymore (with IMAP)"" Date: '2011-03-29 15:23:58' From: 'jonathan protzenko' now, with imap messages (i m not using pop so i can t tell), sending a message now goes like this - a fake header is created while.. - we wait for the real header to come in and replace the fake header the fake header is wrongly indexed (see bug 646225), but the real header is absolutely, never, ever indexed this can go on for hours sometimes, after restarting thunderbird, it looks like indexing finally kicks in. Date: '2011-04-15 04:32:41' From: 'mark banner' if this is true, it sounds like we need to fix this. Date: '2011-04-19 06:09:23' From: 'mark banner' (i believe i m seeing it locally). Date: '2011-04-26 08:33:34' From: 'wayne mery' (in reply to comment #1) > if this is true, it sounds like we need to fix this indeed is datalossy and hinders some testing of search issues protz thinks this may fix bug 534449 Date: '2011-04-29 04:28:58' From: 'jens mller' when my database is already corrupted due to this bug, will i have to delete and rebuild it once this bug is fixed? Date: '2011-04-29 08:45:13' From: 'andrew sutherland' (in reply to comment #4) > when my database is already corrupted due to this bug, will i have to delete > and rebuild it once this bug is fixed we can recover from the problem without blowing away the database by bumping the db schema by 1 and forcing a compaction pass on the sent folder(s) when we do so. Date: '2011-04-30 01:47:46' From: 'jonathan protzenko' i think i m seeing alternatively both this issue and 574441 it may be, if i m lucky, that, just like chuck norris, i ll be able to kill two stones with one bird, and fix the two at the same time just for reference on this particular issue, what i just saw is the following sequence - fake header gets added, - displaying it with thunderbird conversations tells me that it hasn t been indexed, because getmessagescollectionforheaders returns nothing on that message (i have fancy debugging that tells me how we found the messages), - afaict, no indexing happens in the meanwhile, because i have gloda dump enabled, and nothing appears on my console, - msgkeychanged notification (correct keys), - i get the feeling that the code from msgkeychanged assumes that the message has been indexed already, which is not the case, hence the 0 gloda-id and the failure propagating onwards /me keeps investigating Date: '2011-04-30 02:46:33' From: 'jonathan protzenko' created attachment 529272 let s at least fix that, and see what happens afterwards checked-in 20a1948de3a9 so i think my comment above was mostly right here s the bad sequence - fake headers is added, - imap sent folder was open, so we replace the fake header with the right one immediately, hence issuing a msgkeychanged notification - msgkeychanged from index_msg.js calls pendingcommittracker.getglodastate, which returns a gloda-id of 0, - nonetheless, msgkeychanged keeps going on and adds information in _keychangedbatchinfo, although the information is *wrong* because gloda is not aware of the existence of this message, - then, we receive a msgclassified notification, which triggers a _reindexchangedmessages with adirtying=false, - _keychangedbatchinfo says the message is not dirty (if i understood your comments properly, andrew, this means that the message has been indexed by gloda and is in a correct state), because that s what msgkeychanged said, - _keychangedbatchinfo exits early with these two lines: if (!keychangedinfo.isdirty) continue and the message is never indexed the patch i m attaching basically says that msgkeychanged should not try to do anything smart if gloda hasn t indexed the fake header yet it s a two-liner (four-liner including comments) my plan is let s land this, and see what happens i don t think this will fix the other two issues - sometimes the fake header is not indexed (i ve seen this there s no msgclassified notification that we could act upon to index this message, probably need to clarify things with bienvenu) - https://bugzilla.mozilla.org/show_bug.cgi?id=646225 Date: '2011-04-30 05:01:31' From: 'jonathan protzenko' if my theory is correct, since we re not altering the msgdbhdr, restarting thunderbird should be enough for an indexing pass to kick in and index all the sent messages that hadn t been indexed previously at least that s what happened on my machine. Date: '2011-05-02 04:48:33' From: 'wayne mery' (in reply to comment #8) > if my theory is correct, since we re not altering the msgdbhdr, restarting > thunderbird should be enough for an indexing pass to kick in and index all the > sent messages that hadn t been indexed previously my sent messages go to inbox, and i too have found that restart gets them indexed in a different (non-inbox/non-sent) folder however, selected messages don t get indexed. Date: '2011-05-02 11:08:11' From: 'andrew sutherland' comment on attachment 529272 let s at least fix that, and see what happens afterwards checked-in 20a1948de3a9 ugh, that was a really dumb oversight on my part ( thanks much for finding it the 0-check is not sufficient to test for a valid id, the usual check is glodaid >= gloda_first_valid_message_id so, make this if (glodaid < gloda_first_valid_message_id) ideally we would like to augment the existing unit test for msgkeychanged in gloda to make sure we don t handle messages that have not been indexed, but as you say, it seems good to land this asap. Date: '2011-05-03 01:33:19' From: 'jonathan protzenko' http://hg.mozilla.org/comm-central/rev/20a1948de3a9 this *may* be enough to close this issue, but this is only a speculative fix in case the error seems to be fixed, i ll close that bug, and then i ll focus on bug 646225 for the rest of the work one way to test this is using thunderbird conversations if you launch thunderbird from a terminal, it will output a lot of debug information there s small codes in blue that appear at some point, and that tell you how we found each message in the conversation - gf = the message was indexed by gloda, - mi = the message was not indexed by gloda - (there are other values but they re not relevant for that discussion) if, while viewing a sent message with conversations, the terminal displays mi in blue, you know that your message has not been indexed if, while viewing a sent message with conversations, the terminal shows gf , then this message has been indexed it s possible that the first few messages in the conversation have been found by gloda, and the last one (if it s a message you sent) hasn t been indexed yet in that case, the debug will look like gf gf .. gf mi+g Date: '2011-05-05 13:44:06' From: 'david :bienvenu' created attachment 530415 proposed fix protz, let me know if this fixes it for you... Date: '2011-05-05 14:02:40' From: 'jonathan protzenko' comment on attachment 530415 proposed fix i just gave this patch a try, and gloda is seeing msgsclassified for the fake header, which means it is indexed instantly (this is great) this also means asuth s code from bug 534449 will be actually used properly, because afaict, we were only going through this codepath with buggy assumptions before, or not going there at all! Date: '2011-05-05 15:41:29' From: 'david :bienvenu' fixed on trunk - http://hg.mozilla.org/comm-central/rev/ec4c84e6984a","now, with imap messages (i m not using pop so i can t tell), sending a message now goes like this - a fake header is created while.. the fake header is wrongly indexed (see bug 646225), but the real header is absolutely, never, ever indexed i think i m seeing alternatively both this issue and 574441 if my theory is correct, since we re not altering the msgdbhdr, restarting thunderbird should be enough for an indexing pass to kick in and index all the sent messages that hadn t been indexed previously my sent messages go to inbox, and i too have found that restart gets them indexed comment on attachment 530415 proposed fix i just gave this patch a try, and gloda is seeing msgsclassified for the fake header, which means it is indexed instantly (this is great) this also means asuth s code from bug 534449 will be actually used properly, because afaict, we were only going through this codepath with buggy assumptions before, or not going there at all!"
41,"""(562608) mozilla - thread summary buttons are way too big"" Date: '2010-04-29 01:23:00' From: 'jonathan protzenko' User-Agent: Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.3a4) Gecko/20100413 Minefield/3.7a4 Build Identifier: Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.2.5pre) Gecko/20100429 Lanikai/3.1b2 see attached screenshot the buttons for the multimessageview are too big by default this did not happen with 3.0.x maybe someone changed the icons reproducible: always Date: '2010-04-29 01:23:26' From: 'jonathan protzenko' created attachment 442348 screenshot of the issue. Date: '2010-05-04 09:07:48' From: 'andreas nilsson' these buttons didn ' t have icons in 3.0.x, so that ' s why they grew a bit should be a easy fix to specify them to be 16x16. Date: '2010-05-04 10:07:50' From: 'jonathan protzenko' i ' m pretty sure they had it probably depends on the gnome system theme (i ' m using linux) i ' m using tango currently. Date: '2010-05-05 00:56:33' From: 'jonathan protzenko' andreas, i just fired up a 3.0.x build of thunderbird (just to make sure) actually, only the "" delete "" button has an icon, the "" archive "" button doesn ' t have any the icon is the right size in 3.0.x i ' m using the tango icon theme, and the dom inspector tells me that chrome://messenger/skin/messageheader.css 305 has a rule for .hdrtrashbutton that says list-style-image url(moz-icon://stock/gtk-delete?size=menu) (in case any of this information is useful to you.)). Date: '2010-05-07 12:45:41' From: 'andreas nilsson' the internet connection at my hotel is horrible, so i ' m pushing the eta on this a bit until i have access to the source code. Date: '2010-05-09 13:39:16' From: 'andreas nilsson' figured out how to trigger this the gconf key buttons_have_icons must be set to true it ' s false by default in gnome and it ' s distros, so this won ' t show up in most cases i think what ' s happens is that it picks up the regular toolbar icon size (24x24) instead of [iconsize= "" small "" ] that would result in 16x16 in the css maybe that needs to be specified with the javascript will look into it tomorrow. Date: '2010-05-10 10:44:06' From: 'andreas nilsson' created attachment 444422 small icons in thread view these changes to multimessageview.xhtml makes the button size 16x16 instead of 24x24 Date: '2010-05-10 10:46:41' From: 'andreas nilsson' created attachment 444423 screenshot of patch in action Date: '2010-05-10 11:11:00' From: 'andreas nilsson' created attachment 444434 patch to use < toolbarbutton > s after some discussion with jonathan on irc this patch use < toolbarbutton > instead of < button > so that mode= "" icons "" can be set there is no ui to change that though. Date: '2010-05-10 11:33:55' From: 'jonathan protzenko' this patch is quite nice because it makes the markup more consistent and it allows someone to set the toolbar mode, possibly attach a palette, and so on.. if you want this toolbar to have the same mode as the regular mail header toolbar, you ' d probably want to hack around here http://mxr.mozilla.org/comm-central/source/mail/base/content/msghdrviewoverlay.js#293 to forward those attributes to the toolbar inside multimessageview.xhtml (i think that ' s what you meant on irc, correct me if i ' m wrong!) however we must be sure that multimessageview.xhtml is loaded only once because this code is executed only once if i ' m not mistaken, so reloads wouldn ' t have the property set properly however, i ' m not really sure we want the thread summary toolbar to have the same mode as the mail header toolbar there ' s only two buttons here so the user might want to keep text + icons in the multimessageview (because there ' s plenty of space) and still have icons only in the mail header (because there ' s no space) what do you think maybe setting defaultmode= "" full "" on the toolbar would be enough to keep icons + text by default that leaves us the possibility to add a full toolbar palette later, if we decide to do something more elaborate with the thread summary. Date: '2010-05-10 11:34:40' From: 'jonathan protzenko' oh and for further reference, there ' s still the issue of having the buttons not aligned vertically (shifted maybe 3px downwards). Date: '2010-05-10 11:56:18' From: 'bryan clark' comment on attachment 444422 small icons in thread view seems to work and looks reasonable. Date: '2010-05-10 11:57:02' From: 'bryan clark' comment on attachment 444434 patch to use < toolbarbutton > s this looks like it could be useful for future extensions who want to try offering a palette so it might make sense to make this happen as well. Date: '2010-05-13 18:51:57' From: 'dan mosedale' comment on attachment 444422 small icons in thread view in an ideal world, this would have an automated test, but i think the cost outweighs the benefit here r=dmose thanks for the patch! Date: '2010-05-13 19:04:17' From: 'dan mosedale' after looking around a bit more, i actually like the markup in the second patch better, because i recall having had problems with mismatched markup of just this sort in the past i ' d say that the second patch is probably fine as is, and we could spin off any custom palletry or a separate default mode to another bug i haven ' t actually tried it myself, but i can do that tomorrow andreas, any thoughts about the vertical alignment mentioned in comment 11? Date: '2010-05-17 06:13:29' From: 'andreas nilsson' created attachment 445691 update to the patch removing two lines from #buttonbox in multimessageview.css seems to take care of the top padding issue not sure if that have other implications though if people can take it for a test spin before i ask for code and ui-review on it, that would be great. Date: '2010-05-17 07:48:34' From: 'andreas nilsson' created attachment 445714 small update for os x small update to look all right on os x. Date: '2010-05-17 15:48:29' From: 'andreas nilsson' just for the record, this seems to look all right on windows as well. Date: '2010-05-17 17:25:36' From: 'dan mosedale' unfortunately, it doesn ' t look right on the mac the words are off of vertical center, and the gradient looks weird looking more closely at the patch, i see something that i should have caught previously in additional to changing the xul structure (and xbl-tag behind it), which has a non-trivial amount of behavioral risk to it, this also changes the id of the element together (and even individually, to a reasonable degree) this has the effect of making it an api-breaking change for people that are working on updating their existing add-ons the direction of this patch is clearly the right forward-looking one, but my inclination is that we ' d do better to not accept this risk on the branch this late in the game so i ' d suggest moving this patch forward for the trunk, and doing the most minor-possible band-aid for the branch, probably just changing a couple of very specific size units on the existing elements. Date: '2010-05-17 17:27:39' From: 'dan mosedale' < http://skitch.com/dmose/dd64n/inbox > is what things look like on mac. Date: '2010-05-17 18:45:39' From: 'andreas nilsson' created attachment 445893 more gnomestripe specific css patch hopefully this should work better. Date: '2010-05-18 06:03:58' From: 'andreas nilsson' created attachment 445947 and works in windows too hello bug mail lovers apparently this issue affects windows too, but not mac os x this patch takes care of that too. Date: '2010-05-18 06:18:32' From: 'andreas nilsson' created attachment 445952 and works in windows too v2 and i should remember to do qrefresh first of course.. Date: '2010-05-18 12:08:03' From: 'andreas nilsson' created attachment 446015 slightly modified patch after speaking with bryan and dan on the phone, here is a slightly modified patch making use of child selectors tried to specify #headingwrapper, but that did not work at all, i was able to select the ones below (#buttonbox and #buttonhbox) but it totally refused to act upon that one no idea what ' s going on really. xul vs . html? Date: '2010-05-18 16:38:11' From: 'dan mosedale' comment on attachment 446015 slightly modified patch r=dmose thanks for the patch to be honest, i think the smaller buttons on windows look a little curious since they ' re now out of line with and differently sized from the number of conversations but i only noticed that because i was specifically looking for it. Date: '2010-05-18 18:07:10' From: 'bryan clark' comment on attachment 446015 slightly modified patch looks good to me Date: '2010-05-18 19:12:32' From: 'dan mosedale' pushed to the branch in order to facilitate hitting code freeze http://hg.mozilla.org/releases/comm-1.9.2/rev/a6e8a5d55d18 the trunk tinderboxen are something of a mess right now, so i think pushing this to the trunk can wait. Date: '2010-05-19 03:30:35' From: 'mark banner' landed on trunk as well http://hg.mozilla.org/comm-central/rev/f414faed8c57 if we want to do any follow-ups for trunk, i ' d suggest doing them in separate bugs.","the buttons for the multimessageview are too big by default this did not happen with 3.0.x it probably depends on the gnome system theme (i ' m using linux) actually, only the "" delete "" button has an icon, the "" archive "" button doesn ' t have any the icon is the right size in 3.0.x the gconf key buttons_have_icons must be set to true i think what ' s happens is that it picks up the regular toolbar icon size (24x24) instead of [iconsize= "" small "" ] that would result in 16x16 in the css patch to use < toolbarbutton > s after some discussion with jonathan on irc this patch use < toolbarbutton > instead of < button > so that mode= "" icons "" can be set this patch is quite nice because it makes the markup more consistent and it allows someone to set the toolbar mode, possibly attach a palette, and so on.. however we must be sure that multimessageview.xhtml is loaded only once because this code is executed only once if i ' m not mistaken, so reloads wouldn ' t have the property set properly i ' d say that the second patch is probably fine as is, and we could spin off any custom palletry or a separate default mode to another bug update to the patch removing two lines from #buttonbox in multimessageview.css seems to take care of the top padding issue unfortunately, it doesn ' t look right on the mac"
42,"""(628669) mozilla - Provide support for relative URLs in Components utils import (JSM, JS modules)"" Date: '2011-01-25 08:28:53' From: 'jonathan protzenko' rationale: i m currently writing a thunderbird-stdlib project which is basically a collection of jsms extension authors are encouraged to checkout a copy of this into their tree, so that it appears as resource://theirext/stdlib/ problem is, module a from stdlib depends on module b from stdlib too possible non-solutions include - hardcode resource://theirext/ into stdlib s modules, which requires other extension authors to modify the stdlib, and makes their lives hell because i encourage the gitsubmodule way of checking it out, so that makes a difference with -master - write resource://__import_prefix__/stdlib/ everywhere in stdlib, and package it with a shell script that automates the process (basically a whole bunch of find and sed s) - use the magic __location__ and make a wild guess, from the extension id (xxx@yyy.tld), that the path will be resource://xxx/stdlib/ (and require the extension to be unpacked so that __location__ be defined all of these are non-satisfactory, so i think relative urls should be accepted, i.e. i should be able to write components.utils.import( ./moduleb.js ) from modulea.js any comments, thoughts and/or guidance will be highly appreciated, as i plan on tackling this as soon as i can find some time <ted> http://mxr.mozilla.org/mozilla-central/source/js/src/xpconnect/loader/mozjscomponentloader.cpp#1412 <ted> is the guts of c.u.import <ted> fwiw Date: '2011-01-28 08:46:17' From: 'jonathan protzenko' created attachment 507877 add a magic __uri__ global in jsms so this is a middle-ground solution, in the sense that it implements a magic __uri__ global, just like __location__, in jsms this allows jsms to know which uri they re being imported from, which would solve my problem of course, the relative uri solution seems better in the long run, so i have little hope that this patch will be accepted i m submitting this patch anyway for the following reasons - to be honest, this is not my area of expertise, and the patch above fit nicely in the one-hour timespan that i was willing to devote to this issue =) (this includes firing up all the mozilla string guide pages on mdc!), - now a more serious reason, i believe this is very low-risk, which gives it an epsilon chance of being accepted before firefox 4 (although i m only interested in seeing this happen in thunderbird, i still do believe it will be useful for other people) - doing the relative import thing would make it absolutely not acceptable to land at this point of the release cycle, - i m willing to spend more time to add support for relative uris in components.utils.import, maybe for firefox 5 although my xpcshell testing shows that redefining a var __uri__ global doesn t cause any warning, it might be that xpcshell ate them away but this won t break any existing jsms andreas, i ve requested review from you as you re listed as one of the peers for this module please do change the review request to someone else if you re not the best person to review this thanks any thoughts/comments are most welcome. Date: '2011-01-28 09:12:39' From: 'andreas gal :gal' comment on attachment 507877 add a magic __uri__ global in jsms for api changes lets get the module owner s opinion. Date: '2011-01-28 14:21:43' From: 'jonathan protzenko' ok one thought that just crossed my mind we could also add a importrelative function in xpcomutils or whatever one would use it as follows importrelative(this, __uri__, othermodulethat sinthesamedirectory.jsm ) that function would do the messy job of parsing __uri__ (probably through a nsifile) and replacing the leafname with the third argument before important all of the functions from the module into the first argument but let s not anticipate and wait for blake s opinion about this =). Date: '2011-02-09 02:13:40' From: 'jonathan protzenko' created attachment 510981 ew version that uses the jsapi in a proper way new version of the patch the string is now attached onto the global object through js_newstringcopyn and js_defineproperty i also added more tests, and a utility function in xpcomutils that will make sure users of this functionality won t have to rewrite the lastindexof stuff everytime they wish to do a relative module import. Date: '2011-02-10 14:25:42' From: 'blake kaplan' bsmedberg, would you be ok with something like this going into ff4? Date: '2011-02-10 14:29:40' From: 'benjamin smedberg' so we re exposing __uri__ as a string, not a nsiuri i think i m ok with that the actual importrelative function does some funky string-fu to create a uri, though i wonder if we can t use something more complete.. i really don t think this is worth working on now, though. Date: '2011-02-11 07:47:39' From: 'jonathan protzenko' bsmedberg, would it be better for you if the actual importrelative function interpreted __uri__ as a nsiuri to make sure it is well-formed i think i can upload a new patch that does that if that s the kind of modifications you would like to see before approving this i m not trying to make the firefox 4 deadline, but rather the thunderbird 3.3 alpha3 one which should be further in the future i do have time to devote to this issue, so as long as someone is ok reviewing this (rather small) patch, i can keep working on this Date: '2011-03-08 15:30:34' From: 'blake kaplan' comment on attachment 510981 new version that uses the jsapi in a proper way i m ok with this bsmedberg, any comments? Date: '2011-04-12 00:53:09' From: 'jonathan protzenko' bsmedberg, it s been two months since you commented on this bug, there s 20 lines of code, and less than 20 lines of test any chance you could give your opinion i did not expect this to make it for firefox 4, but i did not expect it to miss the firefox 5 deadline either Date: '2011-04-12 13:53:46' From: 'benjamin smedberg' comment on attachment 510981 new version that uses the jsapi in a proper way does this work with . paths, or does that confuse the xpconnect module cache? Date: '2011-04-13 12:31:37' From: 'jonathan protzenko' created attachment 525764 with a slightly more involved test thanks for the feedback so it looks like the xpconnect module cache is not confused when i use a . path, but there s no reason why it should, since i m falling back to a very standard call to component.utils.import i ve added a alternative version of the patch that has a slightly more involved test, that checks that two imported submodules (the same submodule, but with two different paths) are pointing to the same scope with the same references, i.e they re not instantiated twice i don t really think this is necessary, but if that makes you feel better, i can definitely make the importrelative function i introduced use a nsiuri and its spec property, though i don t think it s worth the overhead. Date: '2011-04-13 13:11:09' From: 'benjamin smedberg' comment on attachment 525764 with a slightly more involved test yes, the test allays my fears! Date: '2011-04-13 15:11:40' From: 'jonathan protzenko' checked-in http://hg.mozilla.org/mozilla-central/rev/d223347c8cb7 ! Date: '2011-04-22 10:35:15' From: 'eric shepherd' documentation updated https://developer.mozilla.org/en/javascript_code_modules/xpcomutils.jsm#importrelative%28%29 and mentioned on firefox 6 for developers. Date: '2012-10-31 05:07:33' From: 'a. sel.' question why is this in xpcomutils.jsm and not implemented as components.utils.importrelative or even better implemented in cu.import itself to differ between urls and relative paths is this by design or was it just the fastest way to implement for a lower priority feature request? Date: '2012-10-31 05:48:06' From: 'jonathan protzenko' your suggestion is indeed much better i guess i just wasn t skilled enough to implement it as you suggest at the time, and maybe the reviewer preferred a non-invasive change i believe the feature is useful in its current state, but in any case i d be happy to see this implemented in a better way","rationale: i m currently writing a thunderbird-stdlib project which is basically a collection of jsms problem is, module a from stdlib depends on module b from stdlib too components.utils.import( ./moduleb.js ) from modulea.js any comments, thoughts and/or guidance will be highly appreciated, as i plan on tackling this as soon as i can find some time so this is a middle-ground solution, in the sense that it implements a magic __uri__ global, just like __location__, in jsms this allows jsms to know which uri they re being imported from, which would solve my problem ew version that uses the jsapi in a proper way new version of the patch i m not trying to make the firefox 4 deadline, but rather the thunderbird 3.3 alpha3 one which should be further in the future so it looks like the xpconnect module cache is not confused when i use a . path, but there s no reason why it should, since i m falling back to a very standard call to component.utils.import i ve added a alternative version of the patch that has a slightly more involved test, that checks that two imported submodules (the same submodule, but with two different paths) are pointing to the same scope with the same references, i.e why is this in xpcomutils.jsm and not implemented as components.utils.importrelative or even better implemented in cu.import itself to differ between urls and relative paths i guess i just wasn t skilled enough to implement it as you suggest at the time, and maybe the reviewer preferred a non-invasive change"
43,"""(342998) mozilla - amo app-version management does not permit versions such as "" 2.0a1 """" Date: '2006-06-28 09:38:59' From: 'mike shaver' firefox has releases in the wild with such version strings amo won ' t let me put them in, though, so we have problems (we had "" 2.0 "" as a legal version until quite recently, which was an even bigger problem.) this is a pretty serious issue for us right now, as people update extensions to work with bon echo, and will only become more so when beta1 ships and we really start to push on extension authors to update their stuff i didn ' t want to reopen bug 313605, though the case in the summary indeed still present, and i don ' t know if we need the full monty from 283803, so i ' m filing here, because i care a lot about this specific problem, and a lot less about the unified, standardized, one-true-versioning system being in place. Date: '2006-06-28 21:41:34' From: 'michael morgan' created attachment 227502 diff for v1 admin portion -- removing dependencies on minor/major/release/build/subver fields. Date: '2006-06-28 21:42:17' From: 'michael morgan' created attachment 227503 v2 diff - only faq were affected, fairly simple adjustments. Date: '2006-06-28 21:45:19' From: 'michael morgan' i was able to * upload a 2.0a1 (or any arbitrary version string that matches something in the applications table) from the dev cp, then approve it * view the faq in the public site note - i ' ve got mixed patches here (see bug 302287) i ' m fairly certain the crypto hashes patches are fine -- so i ' d like to just get an approval on all of these nonetheless i ' m placing a dependency on the crypto hashes for now so we can get that out the door as well. Date: '2006-06-29 15:16:02' From: 'mike shaver' comment on attachment 227503 v2 diff - only faq were affected, fairly simple adjustments > index public/tpl/faq.tpl > =================================================================== > rcs file /cvsroot/mozilla/webtools/addons/public/tpl/faq.tpl,v > retrieving revision 1.4 > diff -u -p -8 -r1.4 faq.tpl > --- public/tpl/faq.tpl 6 may 2006 10 40 -0000 1.4 > +++ public/tpl/faq.tpl 29 jun 2006 04 33 -0000 > @@ -53,18 +53,17 @@ software browse plug-ins for > {/section} > < /dl > > > < h2 > valid app versions for addon developers < /h2 > > > < table class= "" appversions "" > > < tr > > < th > application name < /th > > - < th > display version < /th > > - < th > install.rdf version < /th > > + < th > version < /th > > < th > guid < /th > > < /tr > > > {foreach item=app from=$appversions} > < tr > > < td > {$app.appname} < /td > > < td > {$app.displayversion} < /td > > < td > {$app.versionnumber} < /td > > index public/htdocs/faq.php you net removed a column from the header, but didn ' t change the template that generates the rows of the table -- is that right if so, r=shaver if not, fix that and r=shaver Date: '2006-06-29 15:20:23' From: 'mike shaver' comment on attachment 227502 diff for v1 admin portion -- removing dependencies on minor/major/release/build/subver fields i ' ll do a real review when i get back from dinner, one question so far does "" order by version desc "" sort how we want i thought we determined that it didn ' t, but i ' d love to be wrong. Date: '2006-06-29 21:58:10' From: 'michael morgan' (in reply to comment #5) > does "" order by version desc "" sort how we want i thought we determined that it > didn ' t, but i ' d love to be wrong the sort should be okay after all -- there isn ' t something that will break if the char sorting messes things up, the worst-case is a couple extra iterations until the additem script finds a version string match re comment#4, yes, i missed a column fixed that. Date: '2006-06-30 10:36:07' From: 'mike shaver' comment on attachment 227502 diff for v1 admin portion -- removing dependencies on minor/major/release/build/subver fields thanks, r=shaver. Date: '2006-06-30 14:08:31' From: 'michael morgan' code is checked in, waiting for update in bug 343225.","amo won ' t let me put them in, though, so we have problems (we had "" 2.0 "" as a legal version until quite recently, which was an even bigger problem.) this is a pretty serious issue for us right now, as people update extensions to work with bon echo, and will only become more so when beta1 ships and we really start to push on extension authors to update their stuff i didn ' t want to reopen bug 313605, though the case in the summary indeed still present, and i don ' t know if we need the full monty from 283803, so i ' m filing here, because i care a lot about this specific problem, and a lot less about the unified, standardized, one-true-versioning system being in place. v2 diff - only faq were affected, fairly simple adjustments. * upload a 2.0a1 (or any arbitrary version string that matches something in the applications table) from the dev cp, then approve it * view the faq in the public site note - i ' ve got mixed patches here (see bug 302287) public/htdocs/faq.php you net removed a column from the header, but didn ' t change the template that generates the rows of the table -- is that right the sort should be okay after all -- there isn ' t something that will break if the char sorting messes things up, the worst-case is a couple extra iterations until the additem script finds a version string match re comment#4, yes, i missed a column comment on attachment 227502 diff for v1 admin portion -- removing dependencies on minor/major/release/build/subver fields"
44,"""(128682) mozilla - dragging linked images causes drop of relative image path, not absolute link target"" Date: '2002-03-03 01:37:07' From: 'mike shaver' open http://www.mozilla.org in one window drag the logo banner at the top (a link to http://www.mozilla.org) into another window the browser will try to load http://www.images.com/mozilla-banner.gif dragging to an xterm instead will drop "" images/mozilla-banner.gif "" this should obviously be dropping the absolute url of the link target, rather than the relative url for the image source i ' m seeing it on 0301 linux, and daa confirmed it on 0302 win32 bad. Date: '2002-03-03 01:38:29' From: 'mike shaver' this is a 0.9.9-critical issue, imo dragging and dropping of links is pretty important, and lots of links have images (dragging non-image links seems to work fine, btw.) Date: '2002-03-03 01:52:08' From: 'r.k.aa.' linux cvs dragging logo from this bug to a new window loaded http://mozilla.org/images/mozilla-banner.gif dup of bug 128416? Date: '2002-03-03 02:06:11' From: 'mike shaver' actually, i bet this is a problem in nscontentareadragdrop builddragdata, where we do findparentnode(draggednode, ns_literal_string( "" a "" ).get(), getter_addrefs(linknode)) if ( linknode ) { *outisanchor = pr_true getanchorurl(draggednode, urlstring) createlinktext(urlstring, htmlstring, htmlstring) } don ' t we want to do getanchorurl(linknode, urlstring) so that we drag the url target i ' ll try a patch in a bit. Date: '2002-03-03 02:13:11' From: 'mike shaver' yeah, that ' s money taking, will attach patch shortly. Date: '2002-03-03 02:16:18' From: 'mike shaver' created attachment 72291 fix use linknode to fill urlstring if we ' re dragging image-within-link this works for me, and seems "" obviously right "" soliciting quick reviews and approval for 0.9.9 and 1.0. Date: '2002-03-03 02:17:39' From: 'mike shaver' *** bug 128416 has been marked as a duplicate of this bug *** Date: '2002-03-03 02:26:16' From: 'ben goodger' comment on attachment 72291 fix use linknode to fill urlstring if we ' re dragging image-within-link sr=ben@netscape.com Date: '2002-03-03 02:30:54' From: 'brian ryner' comment on attachment 72291 fix use linknode to fill urlstring if we ' re dragging image-within-link r=bryner Date: '2002-03-03 11:45:33' From: 'robert o callahan' comment on attachment 72291 fix use linknode to fill urlstring if we ' re dragging image-within-link a=roc+moz for branch and trunk Date: '2002-03-03 14:30:53' From: 'mike shaver' committed to trunk and branch thanks for the quick reviews and approvals.","open http://www.mozilla.org in one window drag the logo banner at the top (a link to http://www.mozilla.org) into another window the browser will try to load http://www.images.com/mozilla-banner.gif i ' m seeing it on 0301 linux, and daa confirmed it on 0302 win32 this is a 0.9.9-critical issue, imo findparentnode(draggednode, ns_literal_string( "" a "" ).get(), getter_addrefs(linknode)) } don ' t we want to do getanchorurl(linknode, urlstring) use linknode to fill urlstring if we ' re dragging image-within-link this works for me, and seems "" obviously right "" soliciting quick reviews and approval for 0.9.9 and 1.0. *** bug 128416 has been marked as a duplicate of this bug ***"
45,"""(300087) mozilla - mac update fetches, but does not apply"" Date: '2005-07-08 07:07:31' From: 'mike shaver' when i update today (0708) from yesterday ' s nightly, i get to download the new build, but after restart it doesn ' t apply anything (no patching window comes up, no messages on the console or js console) i tried running updater.app by hand as well, and didn ' t get anything active-update.xml < updates xmlns= "" http://www.mozilla.org/2005/app-update "" / > updates.xml < updates xmlns= "" http://www.mozilla.org/2005/app-update "" > < update type= "" minor "" name= "" deer park 1.0+ "" version= "" 1.0+ "" extensionversion= "" 1.0+ "" detailsurl= "" undefined "" licenseurl= "" undefined "" serviceurl= "" https://aus-staging.mozilla.org:8711/update2/0/firefox/1.0%2b/2005070707/darwin_ppc-gcc3/en-us/update.xml "" installdate= "" 1120831182796 "" statustext= "" install pending "" iscompleteupdate= "" false "" > < patch type= "" complete "" url= "" http://ftp.mozilla.org/pub/mozilla.org/firefox/nightly/2005-07-07-21-trunk/firefox-1.0+.en-us.mac.mar "" hashfunction= "" md5 "" hashvalue= "" f34d2966c30fb8f6bc51c1a1a9972886 "" size= "" 8490739 "" selected= "" true "" state= "" pending "" / > < /update > < /updates > not sure if this is just the server being mistaken about there being newer builds for me, or what, but i thought i ' d file it. Date: '2005-07-21 05:36:54' From: 'mike shaver' i ' m still seeing this after i restart, the update archive gets deleted, but i never get the "" updating firefox "" window, and the build is the same old one is there some kind of logging i can turn on? Date: '2005-07-22 06:20:10' From: 'mike beltzner' mano tells me that this got fixed two days ago, but i can ' t find a duplicate bug tracking that fix at any rate, as of at least 2005-07-20 builds, this works now. Date: '2005-07-22 06:23:51' From: 'mano' point is, i ' m not aware of any mac-swu fix which was landed in that time frame (and i was able to reproduce this issue until two days ago or so). Date: '2005-07-28 06:36:05' From: 'mike beltzner' i was apparently a little premature in filing this as worksforme what i ' m seeing now is that the update applies *once*, and then subsequent updates do not get applied is active-update.xml supposed to be deleted after the update is applied if so, that ' s the problem, since it ' s still there after an update 1. get a day-before-today-nightly build 2. check for updates 3. restart & apply updates 4. look in deer park.app/contents/macos/ 5. check for updates again tomorrow (or modify the app.update.url to fake a previous build number by switching %build_id% to "" 0 "" and check today!) 6. restart & apply updates 7. notice that they ' re not applied you ' ll see the active-update.xml .. i ' ll attach the one that was lying around in mine. Date: '2005-07-28 06:38:38' From: 'mike beltzner' created attachment 190834 active-update.xml that was left around after applying updates Date: '2005-07-29 08:12:04' From: 'mike beltzner' nominating for 1.8b4 blocker Date: '2005-07-29 16:50:05' From: 'darin fisher' i just tried updating from a freshly downloaded 7/28 build to the 7/29 build on my mac, and it worked however, i also see that active-updates.xml is still in the application directory after the update i also see an active-updates.xml file under windows, but its contents are significantly different (just an empty xml tag). Date: '2005-07-29 18:58:44' From: 'mike beltzner' (in reply to comment #7) > i just tried updating from a freshly downloaded 7/28 build to the 7/29 build on > my mac, and it worked however, i also see that active-updates.xml is still in > the application directory after the update i also see an active-updates.xml > file under windows, but its contents are significantly different (just an empty > xml tag) hm i just tried removing active-updates.xml and that didn ' t seem to help in fact, i can ' t seem to find the .mar file from the second update cycle anywhere on my hdd. Date: '2005-07-29 20:13:51' From: 'gary elshaw' i ' ve been using the auto update feature for the last week strangely it has been working on alternate days updates for the 24/7, 26/7 and 28/7 versions of deer park were all fine. Date: '2005-07-31 19:55:45' From: 'gary elshaw' (in reply to comment #9) > i ' ve been using the auto update feature for the last week strangely it has been > working on alternate days updates for the 24/7, 26/7 and 28/7 versions of deer > park were all fine it occurred to me the other day, but i wanted to be sure my experience seems to indicate dp can only be updated once day one download nightly .dmg, day two update it the next day via updates mechanism, day 3 download via updates mechanism fails to overwrite i ' m guessing something is being written somewhere to prevent further updates i ' ve also tried scouring my hard drive for any signs of firefox-1.0+.en-us.mac.mar after a failed update and their doesn ' t appear to be any sign OS X 10.4.2 Mozilla/5.0 (Macintosh; U; PPC Mac OS X Mach-O; en-US; rv:1.8b4)Gecko/20050730 Firefox/1.0+ Date: '2005-08-01 09:54:57' From: 'darin fisher' > i ' ve also tried scouring my hard drive for any signs of > firefox-1.0+.en-us.mac.mar after a failed update and their doesn ' t appear to be > any sign the file is actually downloaded to update.mar. Date: '2005-08-01 15:01:07' From: 'darin fisher' when i hit this problem today, i noticed that the updates/0/ folder contained a copy of updater.app there was nothing else left in the folder when i deleted the entire updates/ folder, the problem went away, and i was able to update from the 7/29 build to today ' s 8/1 build adding this to my bug list. Date: '2005-08-01 15:23:17' From: 'gary elshaw' (in reply to comment #12) > adding this to my bug list thanks for the tip darin, i ' ll keep an eye open for it i successfully updated this morning after grabbing a nightly yesterday i notice two updater.app ' s in deerpark.app one in deerpark.app/contents/macos, and another in deerpark.app/contents/macos/updates/0/updater.app is this correct/normal or expected? Date: '2005-08-01 21:19:39' From: 'gary elshaw' from the javascript console "" error:[exception.."" component returned failure code: 0x80004005 (ns_error_failure) [nsifile.remove] "" nsresult: "" 0x80004005 (ns_error_failure) "" location: "" js frame::file:///applications/deerpark.app/contents/macos/components/nsupdateservice.js::cleanupupdatesdir::line 318 "" data: no] source file: file:///applications/deerpark.app/contents/macos/components/nsupdateservice.js line: 318 "" line 318 is "" updatedir.remove(false) OS X 10.4.2? Mozilla/5.0 (Macintosh; U; PPC Mac OS X Mach-O; en-US; rv:1.8b4)Gecko/20050801 Firefox/1.0+ Date: '2005-08-01 22:00:52' From: 'darin fisher' yeah, i think it ' s having trouble removing updates/0/updater.app/ because it does not expect that to be a directory under other systems (linux and windows), it is not a directory it is a simple executable the solution is probably to change nsupdateservice.js to pass |true| to the nsifile remove method. Date: '2005-08-01 22:01:56' From: 'darin fisher' *** bug 303024 has been marked as a duplicate of this bug *** Date: '2005-08-02 14:12:41' From: 'darin fisher' created attachment 191407 v1 patch Date: '2005-08-02 14:48:24' From: 'ben goodger' comment on attachment 191407 v1 patch r=ben@mozilla.org Date: '2005-08-02 15:50:53' From: 'mike beltzner' will this land tonight i ' d love to be able to test it .. Date: '2005-08-02 17:25:28' From: 'darin fisher' > will this land tonight i ' d love to be able to test it . if someone will approve the patch, then i will land it. Date: '2005-08-02 17:52:43' From: 'gary elshaw' (in reply to comment #20) > > will this land tonight i ' d love to be able to test it . > > if someone will approve the patch, then i will land it ...bless this patch which we are about to receive, for we are truly grateful. Date: '2005-08-03 10:31:36' From: 'darin fisher' fixed-on-trunk","when i update today (0708) from yesterday ' s nightly, i get to download the new build, but after restart it doesn ' t apply anything (no patching window comes up, no messages on the console or js console) i tried running updater.app by hand as well, and didn ' t get anything not sure if this is just the server being mistaken about there being newer builds for me, or what, but i thought i ' d file it. after i restart, the update archive gets deleted, but i never get the "" updating firefox "" window, and the build is the same old one is active-update.xml supposed to be deleted after the update is applied if so, that ' s the problem, since it ' s still there after an update active-update.xml that was left around after applying updates however, i also see that active-updates.xml is still in the application directory after the update i also see an active-updates.xml file under windows, but its contents are significantly different (just an empty xml tag). i just tried removing active-updates.xml and that didn ' t seem to help in fact, i can ' t seem to find the .mar file from the second update cycle anywhere on my hdd. when i deleted the entire updates/ folder, the problem went away, and i was able to update from the 7/29 build to today ' s 8/1 build yeah, i think it ' s having trouble removing updates/0/updater.app/ because it does not expect that to be a directory under other systems (linux and windows), it is not a directory the solution is probably to change nsupdateservice.js to pass |true| to the nsifile"
46,"""(299652) mozilla - xpcom-startup notification can trigger loading of uninstalling/ed component"" Date: '2005-07-04 10:07:35' From: 'mike shaver' (saw this with tbird, but there ' s no component there, nor one in core!) i had a file in $profile/extensions with the path to my lightning build i needed to uninstall it because it was causing the most recent nightlies to crash on startup (nsacstring symbol mismatch), so i deleted the file when i start tbird, though, it still tries to load those components, because we have an xpcom-startup observer, which references the native libs, etc should we be firing xpcom-startup before the extension manager has rejigged the component path, etc. manually removing the entry from extensions.ini let it start up, notice that the path-file was gone, and get on with its life i suspect that removing compreg.dat would have done the same. Date: '2006-04-28 19:34:05' From: 'robert strong' mike, you can uninstall the extension ' s pointer file by selecting uninstall from the em ui and this will add the .autoreg file which will cause the compreg.dat to be rebuilt doesn ' t solve the problem for the case where the pointer is removed manually which is an edgecase imo. Date: '2006-04-28 19:34:56' From: 'robert strong' cc ' ing bsmedberg benjamin, what ya ' think? Date: '2006-04-28 23:59:56' From: 'darin fisher' the problem is that em is a xpcom component itself.. and it is not something that ns_initxpcom2 knows about one solution would be to make xre_main validate the paths in extensions.ini before initializing xpcom if it finds that the paths have changed, then it can startup with all extensions disabled, load em, and let em figure out what to do about it. Date: '2006-04-29 07:11:16' From: 'benjamin smedberg' that sounds like too much trouble/code for a situation that only occurs during testing Date: '2006-04-29 14:20:16' From: 'darin fisher' it is a lot of work (is there an easier solution?), but this problem extends beyond testing what if there are complex relationships between extensions that result in badness when one of them is suddenly not there the em is designed to handle manual removal as equivalent to uninstall. Date: '2006-04-29 14:22:59' From: 'robert strong' can you provide a scenario that would cause this bad behavior that dependencies doesn ' t solve? Date: '2006-04-29 14:31:59' From: 'darin fisher' rob i don ' t know how ' dependencies ' are designed, but if it involved loading nsextensionmanager.js, then i don ' t think it would help here ' s a concrete example imagine if someone writes an extension that overrides some built-in service or component for arguments sake, let ' s say that it is something low-level in necko, like the io service now, imagine that the extension is suddenly not there, but compreg.dat says that the io service is implemented by a classid in foobar.dll, but foobar.dll does not exist what happens to the app? Date: '2006-04-29 14:35:32' From: 'robert strong' if an extension is set to be disabled or uninstalled then it will also set all extensions that depend on it to be disabled before restart and the .autoreg is generated, etc the suddenly not there scenario should only happen when manually removing extensions. Date: '2006-04-29 14:39:41' From: 'darin fisher' > the suddenly not there scenario should only happen when > manually removing extensions which is how extensions are removed when they are registered via the windows registry (via a third-party installer) for example, people may use a msi installer to insert extensions into a directory and set the registry keys to "" install "" their extension when they wish to remove their extension, they remove the registry key and blow away the directory. Date: '2006-04-29 14:51:03' From: 'robert strong' which is why i wish i was more involved when the registry location was added.. handling cases that aren ' t fully managed by the em are just a pita it seems it would be simpler / faster to just enumerate the registry install locations on startup to see if there are changes (perhaps dir existence / last modified time?) especially since there are very few extensions that use registry install locations we could add code to do the right thing from that point. Date: '2006-04-29 14:57:48' From: 'robert strong' hmmm.. what about the portable use case especially if we support additional install locations as per bug 311008? Date: '2006-04-29 16:16:35' From: 'darin fisher' we currently do that enumeration of the registry in em code we ' d need to do it before ns_initxpcom2 i don ' t see why we couldn ' t just enumerate extensions.ini from nsappstartup.cpp instead it isn ' t much different. Date: '2010-07-03 08:27:21' From: 'dave townsend' this is fixed with the extension manager rewrite, also the new component registration makes it impossible to load extension components before profile-after-change now. Date: '2010-07-04 18:39:05' From: 'henrik skupin' dave, do we have a bug # for this fix also, how can it be tested i assume it ' s something we also have to do with mozmill? Date: '2010-12-03 03:34:35' From: 'henrik skupin' dave, how can the underlying issue be tested is there a known extension, which i could use to test the specific situation covered by this bug? Date: '2010-12-03 09:48:57' From: 'dave townsend' (in reply to comment #15) > dave, how can the underlying issue be tested is there a known extension, which > i could use to test the specific situation covered by this bug e no longer call xpcom-startup for installed or uninstalled extensions, i guess you could test that but it wouldn ' t really verify the issue here. Date: '2010-12-03 10:20:23' From: 'henrik skupin' means a situation like this cannot happen with the profile-after-change notification? Date: '2010-12-03 10:22:01' From: 'dave townsend' (in reply to comment #17) > means a situation like this cannot happen with the profile-after-change > notification right Date: '2010-12-03 11:09:03' From: 'henrik skupin' thanks dave so marking as verified fixed based on the changes happened to the component registration and the observers.","i needed to uninstall it because it was causing the most recent nightlies to crash on startup (nsacstring symbol mismatch), so i deleted the file when i start tbird, though, it still tries to load those components, because we have an xpcom-startup observer, which references the native libs, etc manually removing the entry from extensions.ini let it start up, notice that the path-file was gone, and get on with its life mike, you can uninstall the extension ' s pointer file by selecting uninstall from the em ui and this will add the .autoreg file which will cause the compreg.dat to be rebuilt the problem is that em is a xpcom component itself.. and it is not something that ns_initxpcom2 knows about one solution would be to make xre_main validate the paths in extensions.ini before initializing xpcom if an extension is set to be disabled or uninstalled then it will also set all extensions that depend on it to be disabled before restart and the .autoreg is generated, etc it seems it would be simpler / faster to just enumerate the registry install locations on startup to see if there are changes (perhaps dir existence / last modified time?) especially since there are very few extensions that use registry install locations this is fixed with the extension manager rewrite, also the new component registration makes it impossible to load extension components before profile-after-change now. so marking as verified fixed based on the changes happened to the component registration and the observers."
47,"""(475568) mozilla - need additional computing power for tracemonkey talos"" Date: '2009-01-27 11:07:02' From: 'mike shaver' +++ this bug was initially created as a clone of bug #472411 +++ tracemonkey talos is skipping revisions, making it impossible to use the talos reports to effectively determine when performance regressions occurred, and dramatically slowing down work on some parts of 3.1 the data about incoming job rate and test completion time isn ' t available to me that i can see, but i presume releng has it i ' m requesting that additional talos hardware be deployed to triple the bandwidth available to tracemonkey talos on at least windows and mac, as soon as it can be acquired (idle talos machines are an insignificant waste compared to idle engineers or having to manually throttle submissions to ensure that we don ' t skip data points the difficulty of setting up an accurate talos environment on an individual developer ' s machine compounds the problem in an unfortunate way.) can someone please update this bug with an eta on hardware arrival and machine deployment we need to incorporate the impact of this on beta3 and rc1 schedules, as soon as possible. Date: '2009-01-27 12:45:56' From: 'nick thomas' alice, do we have any machines setup that can be deployed to this task ? Date: '2009-01-27 14:26:23' From: 'alice nodelman' can i get an idea of when this set up was under load when i went to check to see how far behind things had fallen i found several idle talos machine and no queue in sight there were, however, three talos boxes that had been marked as hidden on the waterfall and were not being displayed i ' ve unhidden the boxes and ensured that they are being scraped. Date: '2009-01-27 14:34:38' From: 'mike shaver' (in reply to comment #2) > can i get an idea of when this set up was under load over the weekend, mostly, i believe, when we were trying to track down talos crashes and so forth by bisecting our changeset history > when i went to check to see how far behind things had fallen i found several > idle talos machine and no queue in sight there were, however, three talos > boxes that had been marked as hidden on the waterfall and were not being > displayed i ' ve unhidden the boxes and ensured that they are being scraped how can we check this, so we don ' t have to guess if they ' re behind/hidden/crashed/etc.? Date: '2009-01-27 15:02:52' From: 'alice nodelman' if they ' ve been hidden it can be resolved through the tinderbox admin page - unfortunately, there ' s a bug in tinderbox wherein if machines have fallen off the waterfall due to idle time they are sometimes re-added as hidden when they do their new report considering that tracemonkey is (was?) a pretty low activity tree, those machine probably fell off months ago and never got re-added to the tinderbox correctly whomever is sheriff for tracemonkey should be able to check the admin page if they no longer see all 9 talos boxes being displayed having hidden boxes does not mean that the talos boxes themselves were idle they were up and testing, their results were just not viewable on the waterfall. Date: '2009-01-27 15:09:47' From: 'reed loden' (in reply to comment #4) > if they ' ve been hidden it can be resolved through the tinderbox admin page - > unfortunately, there ' s a bug in tinderbox wherein if machines have fallen off > the waterfall due to idle time they are sometimes re-added as hidden when they > do their new report er, huh bug in tinderbox server i haven ' t seen any bug reporting such a thing if there ' s indeed a problem with tinderbox server, please file a bug under webtools tinderbox. Date: '2009-01-27 15:13:28' From: 'nick thomas' we did, bug 390349, but had a credibility problem. Date: '2009-01-27 16:46:13' From: 'phil ringnalda' but no matter how many talos boxes the tree has, it ' ll still skip builds by design, won ' t it this afternoon, there were linux builds that ran from 13:37-14:29, 14:02-14:19, and 14:07-14:24. what seems to have happened, that the one which started at 14 07 got a talos run and the other two didn ' t, fits pretty well with how it ' s been explained to me, that the poller runs every ten minutes, and takes only the newest of the builds which it hasn ' t seen before, so that with lucky polling those three might have produced two (but not three) talos runs, but they weren ' t that lucky faster polling would decrease the odds of that happening, but as i understand it the poller ' s designed not to even try to test every build the times i ' ve looked at the tracemonkey pushlog, that ' s fairly typical average of maybe six or seven pushes a day, but tightly grouped in one or two bursts with an outlier or two, so _probably_ it wouldn ' t overload a poller that queued up more than one build per poll probably (then there ' s the question of whether cross-machine numbers are really good enough to say that if tss was 173.74 before your patch, on qm-plinux-trunk04, and 177.38 with your patch, on qm-plinux-trunk05, then that means you regressed it as opposed to meaning that trunk05 is a hair slower or had one bad run, but luckily that ' s not my problem.) Date: '2009-01-30 14:23:42' From: 'alice nodelman' talos does skip builds, but at the moment not by design - see bug 457885 that bug should be resolved this quarter once we ' ve fixed the random skipping of builds based upon build start times/polling interval issues, we ' ll test a lot more stuff we ' ll skip less, but i would still expect us to have buildbot queue compress out builds under heavy load our goal is to test as many builds as we possibly can and to only skip builds if we are unable to get ahead if this bug is now about inappropriate skipping of builds it should be duped to the active ftppoller failures bug. Date: '2009-01-30 14:49:14' From: 'john o duinn' (in reply to comment #7) > the times i ' ve looked at the tracemonkey pushlog, that ' s fairly typical > average of maybe six or seven pushes a day, but tightly grouped in one or two > bursts with an outlier or two, so _probably_ it wouldn ' t overload a poller that > queued up more than one build per poll probably interesting usage data, good to know alice ' s point about ftppoller in bug#457885 is one bug which is complicating the picture phil, when you said "" by design "" i think you were referring to how talos uses queue-compression intentionally after we fix bug#457885, we could try changing how queues are processed, turning off queue-compression for a while, and see if the talos machines do eventually catch up in the lulls between the bursts getting this wrong would be bad, and ironically, would fail worst under peak load times, so lets deal with that investigation separately. Date: '2009-01-30 14:50:30' From: 'john o duinn' (in reply to comment #3) > (in reply to comment #2) > how can we check this, so we don ' t have to guess if they ' re > behind/hidden/crashed/etc. i ' ve added text to the top of each tinderbox waterfalls for mozilla-central, mozilla-1.9.1 and tracemonkey giving a count of machines for each project branch (there ' s *way* too many to list by names) * if the count does not match what you can see on the waterfall, then ask the sheriff to see if any machines are hidden * if the count still does not match up, file a bug in mozilla.org serveroperations note that if you are missing *all* talos machines for a given o.s on a given branch, then the bug should be marked as blocker we currently are able to run 3 talos runs concurrently, and have them all report to the tinderbox, so i ' m going to close this as fixed (to deal with peak-demand-scenarios like this in future, arising on different proj branches at different times, the work in bug#476099 is probably the way to go but its too early to tell yet.) Date: '2009-01-30 15:19:56' From: 'axel hecht' fwiw, i just updated the branch for buildbot ticket 415, where we could make the merging of buildrequests load-dependent say, we could start merging if the pendingbuilds go beyond a threshold. Date: '2009-01-30 15:27:10' From: 'phil ringnalda' i meant http://mxr.mozilla.org/mozilla/source/tools/buildbot-configs/testing/talos/perfmaster/ftppoller.py#141 which if i read it right means that if a poll finds multiple new directories, it will only look in the newest one ignoring all the others (or possibly means it may or may not depending on the sort, but "" only in the newest "" is consistent with the mozilla-central linux behavior, where if the linux 64 bit build starts and/or finishes at the wrong time, then nothing gets run because they ' re going in the same directory as the 32 bit builds and a "" newest "" directory with the 64 bit build is the only place the poller looks). Date: '2009-01-30 19:04:21' From: 'phil ringnalda' oh, which is bug 457885 but what i really meant was that if shaver and sayrer want every single tracemonkey build to get a talos test run, they don ' t need to throw money at hardware because that *will not work*, they need to throw time at alice.","+++ this bug was initially created as a clone of bug #472411 +++ tracemonkey talos is skipping revisions, making it impossible to use the talos reports to effectively determine when performance regressions occurred, and dramatically slowing down work on some parts of 3.1 i ' m requesting that additional talos hardware be deployed to triple the bandwidth available to tracemonkey talos on at least windows and mac, as soon as it can be acquired the difficulty of setting up an accurate talos environment on an individual developer ' s machine compounds the problem in an unfortunate way.) can someone please update this bug with an eta on hardware arrival and machine deployment can i get an idea of when this set up was under load when i went to check to see how far behind things had fallen i found several idle talos machine and no queue in sight there were, however, three talos boxes that had been marked as hidden on the waterfall and were not being displayed over the weekend, mostly, i believe, when we were trying to track down talos crashes and so forth by bisecting our changeset history if they ' ve been hidden it can be resolved through the tinderbox admin page - unfortunately, there ' s a bug in tinderbox wherein if machines have fallen off the waterfall due to idle time they are sometimes re-added as hidden when they do their new report having hidden boxes does not mean that the talos boxes themselves were idle 07 got a talos run and the other two didn ' t, fits pretty well with how it ' s been explained to me, that the poller runs every ten minutes, and takes only the newest of the builds which it hasn ' t seen before, so that with lucky polling those three might have produced two (but not three) talos runs, but they weren ' t that lucky (then there ' s the question of whether cross-machine numbers are really good enough to say that if tss was 173.74 before your patch, on qm-plinux-trunk04, and 177.38 with your patch, on qm-plinux-trunk05, then that means you regressed it as opposed to meaning that trunk05 is a hair slower or had one bad run, but luckily that ' s not my problem.) i ' ve added text to the top of each tinderbox waterfalls for mozilla-central, mozilla-1.9.1 and tracemonkey giving a count of machines for each project branch * if the count does not match what you can see on the waterfall, then ask the sheriff to see if any machines are hidden * if the count still does not match up, file a bug in mozilla.org"
48,"""(393342) mozilla - select "" save to disk "" for pdf, not downloaded or saved; ns_error_file_unrecognized_path"" Date: '2007-08-22 20:23:17' From: 'mike shaver' when i click to download a pdf file and pick "" save to disk "" (it ' s the default for me, fwiw), i don ' t get it downloaded i sometimes *do* get a pair of exceptions in the console, though, to read instead Error: [Exception... ""Component returned failure code: 0x80520001 (NS_ERROR_FILE_UNRECOGNIZED_PATH) [nsIDownloadManager.userDownloadsDirectory]"" nsresult: "" 0x80520001 (ns_error_file_unrecognized_path) "" location: ""JS frame :: file:///Applications/Minefield.app/Contents/MacOS/components/nsHelperAppDlg.js :: anonymous :: line 96""  data: no] Source File: file:///Applications/Minefield.app/Contents/MacOS/components/nsHelperAppDlg.js Line: 96 error: uncaught exception: unknown (can ' t convert to string) started recently, possibly with today ' s nightly (2007082204 os x on x86) my download dir is "" /users/shaver/downloads "" in the prefs window, and for both browser.download.dir and browser.download.downloaddir the pref value is (ahem) browser.download.downloaddir;aaaaaafaaaiaaqhmncbdywnozqaaaaaaaaaaaaaaaaaaaaaaaadbcrzjscsaaaah2lojrg93bmxvywrzaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaakrmcgpwicaaaaaaaaaap////8aaakgaaaaaaaaaaaaaaaaaaaabnnoyxzlcgaqaagaamfxjukaaaaraagaamgpyqcaaaabaagab9i6aabvgqacab9mncbdywnoztpvc2vyczpzagf2zxi6rg93bmxvywrzaaaoabqacqbeag8adwbuagwabwbhagqacwapabiacabmadqaiabdageaywboaguaegawvxnlcnmvc2hhdmvyl0rvd25sb2fkcwataaevaaavaaiadf//aaa= hth! Date: '2007-08-23 11:29:11' From: 'jim mathies' i ' m not on osx, so i can ' t test this i ' m wondering if this is a failure in the directory services code for osx for retreiving the user ' s download folder it was not used much prior to bug 308073 http://lxr.mozilla.org/mozilla/source/toolkit/components/downloads/src/nsdownloadmanager.cpp#741 can you post the result of the two new attributes in the download manager - userdownloadsdirectory and defaultdownloadsdirectory var dm = components.classes[ "" @mozilla.org/download-manager;1 "" ] .getservice(components.interfaces.nsidownloadmanager) dm.userdownloadsdirectory dm.defaultdownloadsdirectory dm.userdownloadsdirectory.target dm.defaultdownloadsdirectory.target (both should nsilocalfile) one of these might result in the same error note, browser.download.downloaddir is obsolete in firefox, and is not used, so i ' m not sure how it got set to that garbage browser.download.dir is the pref we standardized on for custom download folder post 308073. Date: '2007-08-24 13:26:24' From: 'mike shaver' userdownloadsdirectory: ns_error_file_unrecognized_path (same error) defaultdownloadsdirectory: [xpconnect wrapp ed (nsisupports, nsilocalfilemac, nsilocalfile, nsifile, nsihashable)] user.target: ns_error_file_unrecognized_path (same error) default.target: ns_error_not_implemented from nsilocalfilemac.target ( that ' s not garbage, btw, it ' s how we encode mac filehandles, because of pre-os x legacy about names not being unique identifiers welcome to the mac!) Date: '2007-08-27 10:04:54' From: 'jim mathies' hey mike, what ' s your browser.download.folderlist pref? Date: '2007-08-27 10:24:24' From: 'mike shaver' it ' s set to 2. Date: '2007-08-27 10:35:04' From: 'jim mathies' ok, so you ' re saying the funny data in your browser.download.dir is correct on the mac i was looking at the patch, and afaict, the code that sets that didn ' t really change however, in the new userdownloadsdirectory code i ' ve made the assumption it ' s a path i think that might be the problem, i should be getting the complex value as an nsilocalfile instead. Date: '2007-08-27 10:46:46' From: 'jim mathies' yes, i think that ' s it mike, if i roll a patch, would you have the time to test it out to be sure it addresses the problem i ' m not on osx so i ' m unable to test this. Date: '2007-08-27 11:37:40' From: 'jim mathies' created attachment 278426 custom download folder patch v.1 Date: '2007-08-27 11:42:38' From: 'jim mathies' tested on windows, works great it would be nice if we could find someone to try it out on osx as well. Date: '2007-08-27 13:00:31' From: 'mike shaver' slightly different error now, after rebuilding with the patch, probably just line-number fuzz Error: [Exception... ""Component returned failure code: 0x80520001 (NS_ERROR_FILE_UNRECOGNIZED_PATH) [nsIDownloadManager.userDownloadsDirectory]"" nsresult: ""0x80520001 (NS_ERROR_FILE_UNRECOGNIZED_PATH)"" location: ""JS frame :: file:///Users/shaver/src/trunk/obj-out/dist/Minefield.app/Contents/MacOS/components/nsHelperAppDlg.js :: anonymous :: line 107""  data: no] Source File: file:///Users/shaver/src/trunk/obj-out/dist/Minefield.app/Contents/MacOS/components/nsHelperAppDlg.js Line: 107 Date: '2007-08-27 13:57:46' From: 'jim mathies' mike, would you mind posting your browser.download.dir pref in here again the first example you gave had "" browser.download.downloaddir "" on the front of what appears to be valid base64 encoded data was that correct? Date: '2007-08-27 14:16:38' From: 'mike shaver' no, that was an artifact of choosing "" copy "" instead of "" copy value "" in the about: config window the pref value starts after the ;, and is aaaaaafaaaiaaqhmncbdywnozqaaaaaaaaaaaaaaaaaaaaaaaadbcrzjscsaaaah2lojrg93bmxvywrzaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaakrmcgpwicaaaaaaaaaap////8aaakgaaaaaaaaaaaaaaaaaaaabnnoyxzlcgaqaagaamfxjukaaaaraagaamgpyqcaaaabaagab9i6aabvgqacab9mncbdywnoztpvc2vyczpzagf2zxi6rg93bmxvywrzaaaoabqacqbeag8adwbuagwabwbhagqacwapabiacabmadqaiabdageaywboaguaegawvxnlcnmvc2hhdmvyl0rvd25sb2fkcwataaevaaavaaiadf//aaa= Date: '2007-08-27 14:18:27' From: 'jim mathies' ahh, ok, just confirming - is users/shaver/downloads a valid directory on your system? Date: '2007-08-27 14:31:37' From: 'mike shaver' with a leading / it is, yes, and it happens to be my downloads directory of choice ) ( "" /users/shaver/downloads "" ) Date: '2007-08-27 14:35:35' From: 'jim mathies' decoding that base64 chunk shows "" users/shaver/downloads "" within it, and i ' m not sure if the starting ' / ' is implicit in these things but if not, initwithnativepath, which i believe is being called, has this check - 1349 else if (filepath.isempty() || filepath.first() != ' / ' ) 1350 return ns_error_file_unrecognized_path and it ' s one of the few places in osx file code that returns ns_error_file_unrecognized_path i ' m wondering if there is a missing ' / ' in your custom dir pref. Date: '2007-08-27 15:01:10' From: 'mike shaver' there ' s a leading slash in my pref as shown in the prefs window where is initwithnativepath being called inside the complex-value deserialization? Date: '2007-08-27 15:20:46' From: 'jim mathies' yes, and that error code really isn ' t returned very often, which is why i was looking at that i hate to be a pain but do you have any time to place a break point in getuserdwonloadsfolder and step through it to see where the failure is actually occuring if not i ' ll try to find somebody on irc that can help us out. Date: '2007-08-28 10:55:42' From: 'gavin sharp' comment on attachment 278426 custom download folder patch v.1 > i ' m wondering if there is a missing ' / ' in your custom dir pref isn ' t the call to initwithnativepath returning that error because you ' re passing it the base64 encoded string anyhow, some review comments > index: toolkit/components/downloads/src/nsdownloadmanager.cpp > if (customdirectory) { > - nscomptr < nsilocalfile > afile = > - do_createinstance( "" @mozilla.org/file/local;1 "" , & rv) glad you ' re removing this, using an "" a "" prefix for local variables is just confusing ) > + customdirectory- > exists( & bres) > if (bres) { > - ns_addref(*aresult = afile) > + ns_addref(*aresult = customdirectory) > return ns_ok > } > - rv = afile- > create(nsifile::directory_type, 755) > + rv = customdirectory- > create(nsifile::directory_type, 755) > ns_ensure_success(rv, rv) > if (bres) { > - ns_addref(*aresult = afile) > + ns_addref(*aresult = customdirectory) > return ns_ok > } this second block of code you ' re changing looks dead - bres can ' t be true here, otherwise you would have returned in the previous block it looks like perhaps you meant to include another exists() call before checking it, but even then exists() shouldn ' t return false after a succesful create() call seems like you should just remove the second "" if (bres) "" (or rewrite it so that the create() call is in a (!bres) block rather than returning early, for clarity) this patch does fix the problem for me, though, so r+, but please do either attach a new patch here that includes the dead code removal, or file a bug to remove it separately. Date: '2007-08-28 10:58:07' From: 'gavin sharp' and it ' d sure be nice to have some tests for for existent and non-existent "" download dirs "" the latter would have caught the dead code bug, i believe, by causing that method to return the default download dir when it creates the directory. Date: '2007-08-28 11:14:55' From: 'jim mathies' created attachment 278605 custom download folder patch v.2 Date: '2007-08-28 11:21:11' From: 'jim mathies' created attachment 278606 custom download folder patch v.2 (removed an uneeded rv =) gavin, on the tests, i ' ve not had the chance to write one of those the purpose would be to check to make sure the directory returned was valid? Date: '2007-08-28 11:34:28' From: 'gavin sharp' (in reply to comment #20) > created an attachment (id=278606) [details] > custom download folder patch v.2 i don ' t think this is correct either - removing the rv checking for both calls makes the problem worse (one or both could fail while bres remains true) i do think you want to go with the first patch, but just additionally remove the second "" if (bres) "" check > gavin, on the tests, i ' ve not had the chance to write one of those the > purpose would be to check to make sure the directory returned was valid right, just verifying that the nsifile you get back from the call to getuserdownloadsdirectory() is correct for various values of the pref perhaps shawn can help with this, he probably knows the dm tests best. Date: '2007-08-28 11:35:51' From: 'gavin sharp' comment on attachment 278606 custom download folder patch v.2 beltzner doesn ' t do code reviews, and this doesn ' t need any additional (ui-)review once my comments are addressed. Date: '2007-08-28 11:42:19' From: 'jim mathies' created attachment 278611 custom download folder patch v.3 Date: '2007-08-28 12:00:36' From: 'gavin sharp' landed on the trunk mozilla/browser/components/preferences/main.js 1.11 mozilla/toolkit/components/downloads/src/nsdownloadmanager.cpp 1.110 Date: '2007-09-02 21:40:21' From: 'stephen donner' i can confirm that in the 2007-08-22-04 builds of minefield on os x 10.4, with a ' users/stephend/downloads/ ' directory, and the pref to prompt me where to save, i get the following exception thrown Error: [Exception... ""Component returned failure code: 0x80520001 (NS_ERROR_FILE_UNRECOGNIZED_PATH) [nsIDownloadManager.userDownloadsDirectory]"" nsresult: ""0x80520001 (NS_ERROR_FILE_UNRECOGNIZED_PATH)"" location: ""JS frame :: file:///Applications/Minefield.app/Contents/MacOS/components/nsHelperAppDlg.js :: anonymous :: line 96""  data: no] Source File: file:///Applications/Minefield.app/Contents/MacOS/components/nsHelperAppDlg.js Line: 96 With the latest Mozilla/5.0 (Macintosh; U; Intel Mac OS X; en-US; rv:1.9a8pre) Gecko/2007090204 Minefield/3.0a8pre build, I can successfully save to 'Users/stephend/Downloads,' with no exceptions thrown. shaver: thanks for logging this bug verified fixed","when i click to download a pdf file and pick "" save to disk "" (it ' s the default for me, fwiw), i don ' t get it downloaded i sometimes *do* get a pair of exceptions in the console, though, to read instead however, in the new userdownloadsdirectory code i ' ve made the assumption it ' s a path i think that might be the problem, i should be getting the complex value as an nsilocalfile instead. slightly different error now, after rebuilding with the patch, probably just line-number fuzz > } this second block of code you ' re changing looks dead - bres can ' t be true here, otherwise you would have returned in the previous block this patch does fix the problem for me, though, so r+, but please do either attach a new patch here that includes the dead code removal, or file a bug to remove it separately. i do think you want to go with the first patch, but just additionally remove the second "" if (bres) "" check right, just verifying that the nsifile you get back from the call to getuserdownloadsdirectory() is correct for various values of the pref i can confirm that in the 2007-08-22-04 builds of minefield on os x 10.4, with a ' users/stephend/downloads/ ' directory, and the pref to prompt me where to save, i get the following exception thrown verified fixed"
49,"""(153211) KDE - Keyboard didn t respond anymore after I press Alt+Shift+Tab"" Date: '2007-12-01 13:53:43' From: 'josep febrer' version: 3.96.1 (using kde devel) installed from: compiled sources os: linux while using alt+tab for switching between applications works fine in my kde4 post rc1 version, when i try to use alt+shift+tab shortcut the keyboard did not respond anymore and i don t know how to get it back however the mouse it is still working properlly, so i can logout with the mouse and i when i log back the keyboard it also works. Date: '2007-12-05 17:41:05' From: 'andreas pakulat' i just hit this bug as well but unfortunately i can t re-trigger it at the moment while alt-shift-tab doesn t do anything here, the keyboard is still accessible. Date: '2007-12-05 22:28:30' From: 'andreas pakulat' this is really a serious problem it seems that if i hit alt+shift+tab directly i always get the problem and if i just hit alt+tab and then alt+shift+tab and release i get it as well, so i have to make sure i always hit alt+tab as last thing. Date: '2007-12-06 23:06:22' From: 'matt williams' in kde 3, alt+shift+tab is one of the possible shortcuts used for switching keyboard layouts (keyboard layout kcm -> xkb options -> layout switching tree item) even though i don t have that box ticked, it still persists in changing the layout with that shortcut perhaps, the shortcut is being sent to the same place but is causing a crash due to some bitrot? Date: '2007-12-06 23:46:31' From: 'andreas pakulat' while editing kglobalaccelsrc to change the shortcut does help, killing kxkb doesn t help at all and thus i don t think its kxkb causing the problem. Date: '2007-12-06 23:47:54' From: 'andreas pakulat' *** bug 153495 has been marked as a duplicate of this bug *** Date: '2007-12-07 00:18:11' From: 'ga?l de chalendar' i confirm i had to reboot note that the mouse was behaving has if the shift key was pressed it was extending the selection when clicking with the left button Date: '2007-12-08 20:23:44' From: 'andreas pakulat' the problem is in kglobalaccel, it doesn t release the grab when a shortcut is set that isn t triggered which is the case for alt+shift+tab, the shortcut that is actually send by x11 is alt+shift+backtab re-assigning. Date: '2007-12-09 23:24:50' From: 'matt williams' *** bug 153754 has been marked as a duplicate of this bug *** Date: '2007-12-11 11:27:41' From: 'andreas pakulat' svn commit 747205 by apaku add a hotfix for bug #153211, also ungrab the keyboard when alt+shift+backtab was hit ccbug: 153211 m +5 -1 kglobalaccel_x11.cpp websvn link: http://websvn.kde.org/?view=rev&revision=747205 Date: '2007-12-12 11:20:13' From: 'josep febrer' thanks, your hotfix fixed this problem, however on the past krushday someone mentioned a similar issue pressing alt+printscr which is still present for me i don t know if this is related with the original issue, but if not you can close this bug. Date: '2007-12-12 12:03:33' From: 'andreas pakulat' it could be, i ll check later today iirc alt+print screen is some snapshot function right you can easily check wether its the same issue by doing the following open $home/.kde4/share/config/kglobalshortcutsrc and find the action there then open any shortcut dialog in any application and change one of the shortcuts when you re asked for pressing the new keyboard combination press the alt+print keys and check wether the label of the shortcut button is now the same as that in the rc-file if they differ its the same problem and that means we need a different fix for this problem, than the hotfix i comitted. Date: '2007-12-12 13:48:56' From: 'josep febrer' in kglobalshortcutsrc i have assigned alt+print to kwin, and also alt+shift+tab to kwin but if in one application like konqueror or konsole i assing a new shortcurt to alt+print it get s changed automatically to alt+shift+print, so i can t assign another alt+print shortcut however i can assign alt+shift+tab shortcut, but besides it is still showing it in shortcut settings it doesn t work, and also it doesn t appear in kglobalshortcutsrc apart from the old one already existing and assigned to kwin also i don t know if is my setup but in kcmshell4 keys i can t modify any shortcut, in fact, it doesn t show any, but that can be another bug. Date: '2007-12-12 14:02:30' From: 'andreas pakulat' ok as far as i can see this is the same problem, namely that the keys alt+print don t produce the x11 keysequence that is expected in particular alt+shift+tab creates a qt key sequence of alt+shift+backtab and seemingly alt+print creates alt+shift+print in qt key sequence so this is indeed the same problem regarding the keys kcm thats expected , the kcm hasn t been properly ported i ve already posted a patch for a minimal port to the kde-core list that one will get comitted next monday, unless i get objections. Date: '2007-12-12 16:21:52' From: 'josep febrer' i discovered another similar shortcut which is ctrl+printscrn but this doesn t suffer this problem and works as expected to my knowledge, only alt+shift+print and alt+print are triggered by this bug. Date: '2007-12-29 21:26:29' From: 'andreas pakulat' *** bug 154692 has been marked as a duplicate of this bug *** Date: '2008-01-18 09:43:38' From: 'andreas pakulat' *** bug 156069 has been marked as a duplicate of this bug *** Date: '2008-01-18 18:27:22' From: 'lubos lunak' svn commit 763132 by lunakl since calling directly xlib s xgrabkeyboard() is very unlikely and even probably undesired in kded, make kglobalaccel again ungrab when there s no qt caused grab bug: 153211 m +0 -7 kdedglobalaccel.cpp m +1 -4 kdedglobalaccel.h m +11 -11 kglobalaccel_x11.cpp websvn link: http://websvn.kde.org/?view=rev&revision=763132 Date: '2008-01-23 19:38:13' From: 'andreas pakulat' *** bug 156434 has been marked as a duplicate of this bug *** Date: '2009-01-05 22:47:48' From: 'mathieu jobin' this bug should still be open i am running 4.2 beta 2 and this problem is still there. Date: '2009-02-12 10:52:27' From: 'mikael gerdin' i ve found this bug in kde 4.2 too i don t know if there is any specific key-combination that triggers it, but kwin acts as if i m holding down the alt-key, moving windows when i click and drag in them (kubuntu 8.10 (intrepid) packages from kubuntu-experimental)","while using alt+tab for switching between applications works fine in my kde4 post rc1 version, when i try to use alt+shift+tab shortcut the keyboard did not respond anymore and i don t know how to get it back however the mouse it is still working properlly, so i can logout with the mouse and i when i log back the keyboard it also works. while alt-shift-tab doesn t do anything here, the keyboard is still accessible. the problem is in kglobalaccel, it doesn t release the grab when a shortcut is set that isn t triggered thanks, your hotfix fixed this problem, however on the past krushday someone mentioned a similar issue pressing alt+printscr which is still present for me ok as far as i can see this is the same problem, namely that the keys alt+print don t produce the x11 keysequence that is expected i ve found this bug in kde 4.2 too"
50,"""(29984) KDE - Change numerically the permits of the files on Konqueror"" Date: '2001-07-29 13:33:30' From: 'josep febrer' (*** this bug was imported into bugs.kde.org ***) package: konqueror version: 2.1 severity: wishlist installed from: debian package 4:2.1.2-2 (testing/unstable) compiler: gcc version 2.95.4.20010319 (debian prerelease) os: linux 2.4.4 i686 to also change numerically the permits of the files on konqueror for a lot of people it is easier and quick to change the permits of the files with the values chmod in numbers that to mark the stalls i would be very happy if this option was included when making click in properties permits in a file with the konqueror i think that under the options of the stalls it could have an option that allowed to insert the numeric values of the permits of the file. Date: '2003-04-15 19:11:07' From: 'paulo fidalgo' i m here because i will report this wish too, but i will add one thing, when selecting the file permissions, the numerical number sould appear it s nothing essencial, but it helps to complete kde Date: '2003-05-15 14:33:02' From: '' subject: [patch] #29984 change file permission using octal numbers hello, i wrote a patch to close the feature requested in bug #29984 http://bugs.kde.org/show_bug.cgi?id=29984 the patch adds a line edit to the permission page of the properties dialog the user can enter any octal number in the line edit to change the file permission like he would do when using chmod additionally the file permissions selected by the user are shown as an octal number the attached patch is tested against head and works flawlessly for me when applied to kdelibs may i commit it are there any comments for improvements cu dom created an attachment (id=1582) kpropertiesdialog.diff Date: '2003-05-15 16:45:25' From: '' subject: re: [patch] #29984 change file permission using octal numbers hello, am donnerstag, 15 mai 2003 16:20 schrieb scott wheeler > on thursday 15 may 2003 14:32, dominik seichter wrote > > the patch adds a line edit to the permission page of the properties > > dialog the user can enter any octal number in the line edit to change > > the file permission like he would do when using chmod additionally the > > file permissions selected by the user are shown as an octal number > > hmm, to me it just doesn t seem like this belongs in the gui -- certainly > not simply with the string permissions well, you are right the string permission should be changed i simply had no idea for a better, more descriptive string maybe octal permissions would be better or chmod permissions > i think understanding unix > permissions is confusing as is, but allowing for setting the octal mode > would just add another widget to the general confusion this would seem > roughly like being prompted for command line switches when dragging and > dropping a file because it s more powerful that way the additional widget might help the user to better understand the concept of unix permissions numbers, because the number is updated in real time, as soon as the user clicks on one of the checkboxes maybe there is a possibility to make it more obvious to the user that s/he has not to change anything in this line edit i can t think of any better way right now > anyway -- just my opinion we ll see what others think.. cu dom Date: '2003-05-15 17:07:47' From: 'stephan kulow' subject: re: change numerically the permits of the files on konqueror on thursday 15 may 2003 16:45, domseichter@web.de wrote > > > i think understanding unix > > permissions is confusing as is, but allowing for setting the octal mode > > would just add another widget to the general confusion this would seem > > roughly like being prompted for command line switches when dragging and > > dropping a file because it s more powerful that way > the additional widget might help the user to better understand the concept of > unix permissions numbers, because the number is updated in real time, as soon > as the user clicks on one of the checkboxes maybe there is a possibility to > make it more obvious to the user that s/he has not to change anything in this > line edit i can t think of any better way right now well, if that s the goal why is your patch missing massive whatsthis help greetings, stephan Date: '2005-06-05 17:59:58' From: 'maksim orlovich' *** bug 106836 has been marked as a duplicate of this bug *** Date: '2009-08-04 12:04:30' From: 'finex' @peter: what do you think about this wish could be interesting to implement it on dolphin? Date: '2009-08-04 12:50:29' From: 'peter penz' @finex: the corresponding file where the change must be done is in kdelibs and out of scope of dolphin from my point of view i m strongly against this feature the file properties dialog is used by a lot of users (bug #185551 gives an indication about this) adding a line editor to the ui that can be used and is understood by only by a very, very small user group should not be part of a ui that is used by other user groups too i even don t see a benefit for the advanced users in this case i think it is more effort to right click an item, select properties..., select permissions , fokus the line editor, type in the permissions instead of pressing f4 to open the konsole and type one line chmod... Date: '2009-08-04 12:51:57' From: 'peter penz' ah, in the last sentence i meant i think it is not efficient to right click .. sorry! Date: '2009-08-04 13:21:38' From: 'finex' thanks peter i agree with you i ll move the request to kdelibs even if i m against too.","to also change numerically the permits of the files on konqueror i would be very happy if this option was included when making click in properties permits in a file with the konqueror i think that under the options of the stalls it could have an option that allowed to insert the numeric values of the permits of the file. i m here because i will report this wish too, but i will add one thing, when selecting the file permissions, the numerical number sould appear the user can enter any octal number in the line edit to change the file permission like he would do when using chmod the attached patch is tested against head and works flawlessly for me when applied to kdelibs the string permission should be changed the additional widget might help the user to better understand the concept of unix permissions numbers, because the number is updated in real time, as soon as the user clicks on one of the checkboxes @finex: the corresponding file where the change must be done is in kdelibs and out of scope of dolphin adding a line editor to the ui that can be used and is understood by only by a very, very small user group should not be part of a ui that is used by other user groups too"
51,"""(137982) KDE - Fit to window zoom action doesn t scale images that are smaller to the window size [KDE4.1]"" Date: '2006-11-27 21:08:40' From: 'josep febrer' version: 1.4.1 (using kde kde 3.5.5) installed from: compiled from sources compiler: gcc version 4.1.2 20061115 (prerelease) (debian 4.1.1-20) os: linux in gwenview 1.4.1 when i select the zoom option fit to window it doesn t work on an image that is smaller to the image window size, however it works if the image is bigger than the image window size also, the zoom options fit to width and fit to height are working correctly with images that are smaller to the image window size and they are scaled acording to the option selected thanks. Date: '2007-12-12 16:34:36' From: 'josep febrer' i checked with a current build of the kde4 version, and this issue is still present, when an image it is smaller than the gwenview s image view area and the zoom to fit toolbar button is pressed the image isn t scaled to fit the image view area and it s showed exaclty like if actual size button were pressed. Date: '2007-12-13 00:02:49' From: 'aurelien gateau' in fact, there is an option to do what you want in gwenview 1.4 it s in the configuration dialog, go to image view , then check enlarge small images when auto zoom is activated unfortunately, i haven t ported that option to gwenview 2.0 and since we are freezing for kde4.0, it won t be there you will probably have to wait for kde4.1. Date: '2007-12-16 11:38:33' From: 'jos poortvliet' would love to have it in 4.1 for sure, and imho it should be on by default (for the sake of simplicity, i wouldn t even make it an option). Date: '2007-12-16 23:02:51' From: 'aurelien gateau' marking as kde4.1 Date: '2007-12-17 11:57:15' From: 'josep febrer' thanks, aurelien i don t know how i missed this option in 1.4. Date: '2008-03-29 01:40:40' From: 'aurelien gateau' *** bug 159608 has been marked as a duplicate of this bug *** Date: '2008-04-27 12:16:51' From: 'aurelien gateau' *** bug 161035 has been marked as a duplicate of this bug *** Date: '2008-04-27 14:22:31' From: 'aurelien gateau' svn commit 801676 by gateau new option to enlarge smaller images in zoom to fit mode bug: 137982 m +42 -2 app/configdialog.ui m +4 -0 lib/gwenviewconfig.kcfg m +15 -1 lib/imageview.cpp m +2 -0 lib/imageview.h m +1 -0 part/gvpart.cpp websvn link: http://websvn.kde.org/?view=rev&revision=801676","in gwenview 1.4.1 when i select the zoom option fit to window it doesn t work on an image that is smaller to the image window size, however it works if the image is bigger than the image window size i checked with a current build of the kde4 version, and this issue is still present, when an image it is smaller than the gwenview s image view area and the zoom to fit toolbar button is pressed the image isn t scaled to fit the image view area and it s showed exaclty like if actual size button were pressed. in fact, there is an option to do what you want in gwenview 1.4 it s in the configuration dialog, go to image view , then check enlarge small images when auto zoom is activated you will probably have to wait for kde4.1. would love to have it in 4.1 for sure, and imho it should be on by default (for the sake of simplicity, i wouldn t even make it an option)."
52,"""(137787) KDE - Change the default behaviour on left and right mouse click on the kicker mediaapplet"" Date: '2006-11-23 20:36:29' From: 'josep febrer' version: (using kde kde 3.5.5) installed from: compiled from sources compiler: gcc version 4.1.2 20061115 (prerelease) (debian 4.1.1-20) os: linux by default when i press with the left mouse on a device present in the kicker mediaapplet it shows a menu with various options, where the first one is called open a new window , opens a konqueror window showing the device contents a right mouse click over it shows a menu with one option configure , where i can select what devices want to appear on kicker i just submited a similar bug regarding the kicker trashapplet https://bugs.kde.org/show_bug.cgi?id=137786 what i would love is a similar behaviour described on the other wish, is that when i click with the left mouse over a device in the kicker mediaaplet it opens the konqueror window showing the device contents and with the right mouse click it show the menu that now appears with a left mouse click also i think that the option configure that now appears with a right mouse click isn t necessary to show, as it s the same when selecting the option configure media applet that appears on the kicker mediaapplet tile also i think that the menu entry called open a new window should be renamed to open the media contents or similar. Date: '2008-09-28 16:53:49' From: 'josep febrer' i also close this bug report because the new stable kde stable series, kde4, changed the behaviour of the old mediaapplet with the devicenotifier plasmoid and this bug report it s no longer applicable to the new version it s only valid for kde 3.x series which are in maintenance mode thanks.","by default when i press with the left mouse on a device present in the kicker mediaapplet it shows a menu with various options, where the first one is called open a new window , opens a konqueror window showing the device contents a right mouse click over it shows a menu with one option configure , where i can select what devices want to appear on kicker what i would love is a similar behaviour described on the other wish, is that when i click with the left mouse over a device in the kicker mediaaplet it opens the konqueror window showing the device contents and with the right mouse click it show the menu that now appears with a left mouse click also i think that the option configure that now appears with a right mouse click isn t necessary to show, as it s the same when selecting the option configure media applet that appears on the kicker mediaapplet tile also i think that the menu entry called open a new window should be renamed to open the media contents or similar. i also close this bug report because the new stable kde stable series, kde4, changed the behaviour of the old mediaapplet with the devicenotifier plasmoid and this bug report it s no longer applicable to the new version"
53,"""(153923) KDE - Dolphin doesn t show floppy drive contents when I select PC Floppy Drive in the places panel"" Date: '2007-12-12 18:46:32' From: 'josep febrer' version: 0.9.5.3.97.1 (using kde devel) installed from: compiled sources os: linux in the dolphin s places panel if i press in the pc floppy drive icon it mount s the floppy but dolphin doesn t change the directory location to the floppy one the second time i press over the pc floppy drive icon in the places panel it seems that try again to mount the floppy drive (although it is already mounted), also doesn t change the directory location and shows an error message in the status bar which says an error occurred while accessing pc floppy drive , the system said mount: /dev/fd0 already mounted or /media/floppy busy mount: according to mtab,/dev/fd0 is already mounted on /media/floppy besides that, if i manually go to /media/floppy with dolphin it displays and manages correctly the contents inside the floppy disk another thing, that when the floppy drive it is mounted, there is no way to unmount with dolphin, if i right click over the pc floppy drive icon in the dolphin s panel only appears a hide option while another media like cd or a pendrive it shows an option to correclty unmount or eject the drive. Date: '2008-04-24 08:16:13' From: 'peter penz' is this issue still reproducible with kde 4.0.3 i don t have a floppy drive and cannot reproduce it i ve reassigned the issue to kdelibs as - if the issue still occurs - it might be related to solid. Date: '2008-04-24 09:59:33' From: 'josep febrer' i can exactly confirm with kde 4.0.3 but with trunk kde 4.0.70>=20080418 it is still present in the same form as described above. Date: '2008-04-25 15:59:21' From: 'tobias koenig' hej, that s a bug in hal, which provides an empty volume.mount_point property for floppy discs instead of the real path so we can t fix it but have to wait until hal is fixed ciao, tobias Date: '2008-04-25 16:38:04' From: 'josep febrer' i want to add an additional comment if i run the gnome-settings-daemon command then gtk apps show hal devices in it s file open dialog like the kde one s, but if i click on the floppy device on a gtk file picker it mounts it but doesn t change it s path, like kde, but the second time i click it, it goes to the floppy location which is what doesn t happen in kde apps note that this behaviour it happenend to me sometimes with other devices in kde, so the first time that i click over it, it mounts the device but doesn t change it s path, but the second time doesn t try to mount again if it is already mounted and go to it s location i think that it should be sufficient to check if the device it is already mounted and change to the mounted point, but i don t know if that it is already a hal job, so better to fix it there if is that case thanks, josep Date: '2010-01-08 23:56:54' From: 'bernhard geier' this bug still exists in kde 4.3.4 and hal 0.5.14","in the dolphin s places panel if i press in the pc floppy drive icon it mount s the floppy but dolphin doesn t change the directory location to the floppy one the second time i press over the pc floppy drive icon in the places panel it seems that try again to mount the floppy drive (although it is already mounted), also doesn t change the directory location and shows an error message in the status bar which says besides that, if i manually go to /media/floppy with dolphin it displays and manages correctly the contents inside the floppy disk another thing, that when the floppy drive it is mounted, there is no way to unmount with dolphin, if i right click over the pc floppy drive icon in the dolphin s panel only appears a hide option hej, that s a bug in hal, which provides an empty volume.mount_point property for floppy discs instead of the real path"
54,"""(110724) KDE - K-Menu starts in wrong position"" Date: '2005-08-13 21:46:37' From: 'josep febrer' version: (using kde kde 3.4.2) installed from: compiled from sources compiler: gcc 4.0.2 20050806 (prerelease) (debian 4.0.1-4) os: linux if the kicker width is minor than 100% and it isn t left aligned, then the first time that i click on the k-menu, the menu starts left aligned and not on the k-menu button position however the succesive times that i click on the k-menu it is displayed at the correct position if i restart kicker with dcop then only the first time that i click on the k-menu button, the menu it s placed in the wrong place. Date: '2005-08-13 21:48:22' From: 'josep febrer' created attachment 12212 screenshot showing the bug screenshot showing the bug. Date: '2005-08-13 22:16:01' From: 'aaron j. seigo' you need to have a qt compiled with the patches provided by the kde project in the qt-copy module.","if the kicker width is minor than 100% and it isn t left aligned, then the first time that i click on the k-menu, the menu starts left aligned and not on the k-menu button position however the succesive times that i click on the k-menu it is displayed at the correct position you need to have a qt compiled with the patches provided by the kde project in the qt-copy module."
55,"""(250434) KDE - Regression: Calendar View Rendering broken when appointment in current selection"" Date: '2010-09-07 12:43:25' From: 'felix wolfsteller' in version 4:4.5~20100903.1171290-1maemo1.1171237 when looking at a section of the calendar in which appointments are present, rendering is broken (e.g. does not update areas) also, in this version i was never able to see an appointment (as red box, was possible previously). Date: '2010-09-09 16:30:28' From: 'volker krause' also affects the new month view, also only when looking at a time range containing events consistently happens on all devices with package installations, does not happen on my development phone with self-compiled applications, does also not happen on the desktop, making it very hard to debug Date: '2010-09-10 15:11:25' From: 'volker krause' svn commit 1173789 by vkrause disable opengl rendering for korg-mobile for now it seems that the calendar views trigger a bad misbehavior in the opengl stack on the n900, causing random rendering defects at best and device crashes at worst further details are still unknown, but not using opengl seems to make all those problems go away bug: 250434 m +1 -1 korganizer-mobile.sh websvn link: http://websvn.kde.org/?view=rev&revision=1173789 Date: '2010-09-13 11:37:41' From: 'felix wolfsteller' fix confirmed for version 4:4.5~20100912.1174548-1maemo1.1173569 , closing. Date: '2010-09-15 14:57:57' From: 'volker krause' *** bug 248389 has been marked as a duplicate of this bug ***","in version 4:4.5~20100903.1171290-1maemo1.1171237 when looking at a section of the calendar in which appointments are present, rendering is broken (e.g. does not update areas) also, in this version i was never able to see an appointment (as red box, was possible previously). also affects the new month view, also only when looking at a time range containing events it seems that the calendar views trigger a bad misbehavior in the opengl stack on the n900, causing random rendering defects at best and device crashes at worst"
56,"""(250018) KDE - When Save as Draft without recipient, draft is lost"" Date: '2010-09-03 14:39:05' From: 'felix wolfsteller' when closing the composer in which a mail is composed that does not yet has an recipient, a question pops up ( discard/save as draft ) if save as draft is selected, a message is shown ( no recipient found ...you should specify at least one recipient...) and the mail ist lost i expect to be able to save drafts that do not yet have a recipient specified observed in 4:4.5~20100903.1171170-1maemo1.1170522 . Date: '2010-09-08 19:33:22' From: 'sabine faure' i tested this today and i can reproduce on linux after clicking on ok in the pop up dialogue asking the user to specify a recipient the composer closes and the email is lost instead of saved as draft this seems incoherent with the save as draft functionality that i tested today and which works fine - launch kmail mobile - click on write new email button - after entering a subject and a few words, open the actions tab and click on save as draft - a no recipients found - kmail mobile pop up dialogue opens with the following message you should specify at least one recipient for this message - click on ok - the user can open the actions tab and specify the recipient s email - and then click on send the email is properly save as a draft and stored in the draft folder however, both test have in common that you need to specify a recipient whereas in kmail desktop version it is possible to save as draft without specifying a recipient (unknown is then displayed as the recipient) so regarding that last part a decision needs to be made n900, 4:4.5~20100906.1172093-1maemo1.1171830 Date: '2010-09-15 16:17:15' From: 'till adam' svn commit 1175670 by tilladam avoid mail loss on saving as drafts on composer close when a composer window is closed, don t ask for recipients, just save as drafts wait for that to succeed, before actually deleting the window bug: 250018 m +5 -1 composerview.cpp websvn link: http://websvn.kde.org/?view=rev&revision=1175670 Date: '2010-09-16 22:52:05' From: 'sabine faure' i retested this today and saving an email as draft without adding a recipient works fine now the email is correctly stored in the save as draft folder (local folders) however, when the user tries to reopen it in a composer a delete draft error pop up message appears can not delete draft this error message does not make sense so i have reported a different bug about that (see bug #251511) n900, 4:4.5~20100916.1175939-1maemo1.1174921 Date: '2010-09-20 13:30:46' From: 'felix wolfsteller' can confirm sabines observations with version 4:4.5~20100917.1176295-1maemo1.1174921 the draft is afterwards lost also an intermediate question is a bit misleading (reproducable with a totally emtpy mail) ~ do you really want to _send_ the message without subject - where the user actually wants to save the message as draft. Date: '2010-09-20 14:35:05' From: 'bjoern ricks' it s not possible to reopen a draft and the draft gets lost -> very high prio Date: '2010-09-21 11:47:22' From: 'felix wolfsteller' persists in 4:4.5~20100920.1177660-1maemo1.1177547 . Date: '2010-09-25 21:27:37' From: 'till adam' this works fine for me, on the phone and the desktop, including re-opening the draft, with no questions in between can you give more detailed, step by step instructions how to reproduce this, please? Date: '2010-09-27 09:05:24' From: 'felix wolfsteller' (in reply to comment #7) > this works fine for me, on the phone and the desktop, including re-opening the > draft, with no questions in between can you give more detailed, step by step > instructions how to reproduce this, please will retest and resolve or provide more detailed steps to reproduce which version were you using? Date: '2010-09-27 09:26:50' From: 'till adam' snapshots from the 25th. Date: '2010-09-27 10:04:48' From: 'felix wolfsteller' in 4:4.5~20100927.1180086-1maemo1.1179477 , the slightly confusing question can be seen when 0) start kmail-mobile 1) touch write new email 2) go to the window switcher (top left corner, or press ctrl+backspace) 3) attempt to close the composer 4) switch to the composer window 5) select save as draft 6) question pops up should be do you really want to save the message as draft without text or maybe better - no question. Date: '2010-09-27 10:22:26' From: 'felix wolfsteller' can confirm improvements with 4:4.5~20100927.1180086-1maemo1.1179477 however, after reopening a draft and sending it, i got a cannot delete draft message after a while the draft then was deleted nontheless this was unfortunately not reproducible (or i did something different in betweeen). Date: '2010-09-27 13:15:20' From: 'felix wolfsteller' older issues partly reproducible when in composer view the unnamed identity is chosen. Date: '2010-09-29 15:17:01' From: 'volker krause' svn commit 1180941 by vkrause don t complain about a missing subject when saving as draft bug:250018 m +1 -1 composerview.cpp websvn link: http://websvn.kde.org/?view=rev&revision=1180941 Date: '2010-09-30 19:25:57' From: 'sabine faure' it is corrected now it is possible to save as draft an email without a recipient, subject or text when reopening the draft in a composer from home/local folders/drafts and clicking on send the user is asked 1) to enter a recipient (do it and click on send ) 2) whether he wishes to enter a subject or not but in both cases it works fine so i am closing this bug note: saving as draft an email with no recipient, subject or text is not possible in kmail desktop the user is not even asked in that case whether he wants to save the empty email as draft or discard it kmail desktop just deletes it automatically which i think makes more sense since this feature is supposed to save time to the user n900, 4:4.5~20100930.1181183-1maemo1.1180919","when closing the composer in which a mail is composed that does not yet has an recipient, a question pops up ( discard/save as draft ) if save as draft is selected, a message is shown ( no recipient found ...you should specify at least one recipient...) and the mail ist lost after clicking on ok in the pop up dialogue asking the user to specify a recipient the composer closes and the email is lost instead of saved as draft however, both test have in common that you need to specify a recipient whereas in kmail desktop version it is possible to save as draft without specifying a recipient (unknown is then displayed as the recipient) the email is correctly stored in the save as draft folder (local folders) however, when the user tries to reopen it in a composer a delete draft error pop up message appears can not delete draft this error message does not make sense so i have reported a different bug about that (see bug #251511) it is corrected now it is possible to save as draft an email without a recipient, subject or text"
57,"""(249840) KDE - Reading new (unread) mail leads to conflict warning"" Date: '2010-09-02 09:52:53' From: 'felix wolfsteller' when reading a freshly received mail, a conflict dialog pop ups there is no indication that its a conflict dialog, though (only titled kmail mobile ) the conflicting fields are modification time and flags (\seen) found in version 4:4.5~20100902.1170752-1maemo1.1170522 . Date: '2010-09-08 16:01:04' From: 'bjoern ricks' also occurs with 4:4.5~20100903.1171290-1maemo1.1171237 Date: '2010-09-14 18:08:09' From: 'bjoern ricks' created attachment 51642 conflict dialog in list view Date: '2010-09-14 18:26:43' From: 'volker krause' svn commit 1175284 by vkrause apply the same sparse item optimization we already have in kmail desktop when marking as read, should eventually go into messageviewer and happen after message downloading though bug: 248550 bug: 249840 m +10 -5 mainview.cpp websvn link: http://websvn.kde.org/?view=rev&revision=1175284 Date: '2010-09-16 23:07:09' From: 'sabine faure' i tested this today and i could not reproduce it reading freshly received email works fine for me so i guess the fix works ;) i am verifying that bug but feel free to reopen if needed n900, 4:4.5~20100916.1175939-1maemo1.1174921 Date: '2010-09-20 12:51:47' From: 'felix wolfsteller' confirming absence in 4:4.5~20100917.1176295-1maemo1.1174921 .","when reading a freshly received mail, a conflict dialog pop ups there is no indication that its a conflict dialog, though (only titled kmail mobile ) the conflicting fields are modification time and flags (\seen) apply the same sparse item optimization we already have in kmail desktop when marking as read, should eventually go into messageviewer and happen after message downloading though"
58,"""(251589) KDE - Appointment creation view does not close, leading to conflicts when used by normal user"" Date: '2010-09-17 17:37:40' From: 'felix wolfsteller' in 4:4.5~20100917.1176264-1maemo1.1174921 , when creating a new event/appointment, first nothing happens when pressing ok again after some time passed by a conflict warning is shown the conflict cannot be resolved by deciding for either (or both) dates conflicting are start and end time (in the milliseconds e.g.2010-09-17t17:38:24.734+02:00 vs 2010-09-17t17:38:24+02:00) . it worked in previous versions . Date: '2010-09-17 17:39:46' From: 'felix wolfsteller' actually, the appointments are created interpretation is that the ui does not close adjusting bug title accordingly. Date: '2010-09-17 19:06:12' From: 'volker krause' what s the relation to 251082 and 251322 there seems to be a lot of overlap between those three. Date: '2010-09-17 19:15:40' From: 'felix wolfsteller' (in reply to comment #2) > what s the relation to 251082 and 251322 there seems to be a lot of overlap > between those three yeah, i realized that later as well i would mark as duplicate if i had the developer insights a naive guess is that a resource_creation function/signal does not signal back that its finished maybe create gui/operations should be made more synchronous (blocking input to the gui). Date: '2010-09-17 19:35:45' From: 'felix wolfsteller' my maybe slightly confusing answer was assuming that you referenced https://bugs.kde.org/show_bug.cgi?id=242812 . Date: '2010-09-18 16:10:37' From: 'till adam' svn commit 1176748 by tilladam fully qualify types in signal declarations, to make connects work bug: 242812 bug: 251589 m +2 -2 editoritemmanager.h websvn link: http://websvn.kde.org/?view=rev&revision=1176748 Date: '2010-09-20 10:20:58' From: 'felix wolfsteller' confirming fix for version 4:4.5~20100920.1177273-1maemo1.1174921 .","in 4:4.5~20100917.1176264-1maemo1.1174921 , when creating a new event/appointment, first nothing happens when pressing ok again after some time passed by a conflict warning is shown the conflict cannot be resolved by deciding for either (or both) dates interpretation is that the ui does not close there seems to be a lot of overlap between those three."
59,"""(250358) KDE - Added Accounts do not show up in tree view"" Date: '2010-09-06 14:15:04' From: 'felix wolfsteller' in version 4:4.5~20100827.1171364-1maemo8.1169941 i fail to add kolab-accounts the account wizards runs through fine and complains if i enter wrong passwords, but the accounts do not show up in the tree view restarting the application or the phone did not help the accounts do however show up in the account view in the actions flap. Date: '2010-09-06 14:37:57' From: 'felix wolfsteller' may be duplicate of https://bugs.kde.org/show_bug.cgi?id=248554 and fixed in newer versions. Date: '2010-09-06 15:59:52' From: 'bernhard e. reiter' felix, could you check what the akonadi (remote or local) console tells you about the accounts? Date: '2010-09-08 16:21:28' From: 'bjoern ricks' seems to be fixed in 4:4.5~20100903.1171290-1maemo1.1171237 Date: '2010-09-09 18:46:01' From: 'stephen kelly' i can t reproduce seems to be fixed. Date: '2010-09-13 11:49:04' From: 'felix wolfsteller' still observed in at least a single case in version 4:4.5~20100912.1174548-1maemo1.1173569 in that case, a third account was added it showed up immediately in the accounts list, but not in the tree-view. Date: '2010-09-14 12:48:50' From: 'felix wolfsteller' the accounts i added where empty accounts (no folders, few/none mails) after i created a folder and moved a mail into it (using kontact stationary), the account showed up in kmail-mobile i am however not sure if that was the cause (i.e. did not try to reproduce) happened in 4:4.5~20100910.1174804-1maemo2.1174786. Date: '2010-09-17 15:36:46' From: 'felix wolfsteller' i suspect the flaw exists for the other apllications (adress, kalendar, notes), too there i am quite sure that they do not end up in the flap, either. Date: '2010-09-17 18:37:30' From: 'stephen kelly' svn commit 1176423 by skelly don t strip the domain from the user name when configuring an account bug: 250358 m +5 -2 imapwizard.es websvn link: http://websvn.kde.org/?view=rev&revision=1176423 Date: '2010-09-17 19:12:38' From: 'bjoern ricks' please backport to lastest tag it s a criticial very high prio bug -> backport Date: '2010-09-17 19:28:42' From: 'volker krause' sorry, but i disagree with that solution the underlying problem is described in https://issues.kolab.org/issue3801 and https://issues.kolab.org/issue2869, this is a bug in the kolab server, it s not reporting an error when logging in without the domain name and instead just lists no folders obviously, the kolab wizard has to handle that correctly by adding the domain part to the username (and it does that already) but adding kolab-specific workarounds to the generic imap wizard is wrong imho most non-kolab imap servers i know don t require a domain part in the username, and keep in mind that this is only about the pre-filled value in the username field anyway, in case you have a different username than the suggested default you have to edit it. Date: '2010-09-17 19:34:03' From: 'felix wolfsteller' i see a relation to https://bugs.kde.org/show_bug.cgi?id=251590 this might affect all kdepim-mobile applications a kolab-folder-less account cannot sanely be added, it seems to me maybe somebody with more insights could create a meta-issue, if thats the case (and reopen this one)? Date: '2010-09-21 15:14:11' From: 'felix wolfsteller' happens with the other applications (e.g. korganizer mobile), too. Date: '2010-09-23 12:12:05' From: 'felix wolfsteller' also happens with 4:4.5~20100922.1178352-1maemo1.1177763 when trying to add an imap resource in notes-mobile . Date: '2010-09-28 16:16:56' From: 'volker krause' this issues consists partly of the server bug described in comment #10 and partly of bug 251590, which has been fixed by now therefore, i m closing this one. Date: '2010-10-01 12:19:45' From: 'felix wolfsteller' have not yet seen happening with 4:4.5~20101001.1181430-1maemo1.1181463 , closing.","the account wizards runs through fine and complains if i enter wrong passwords, but the accounts do not show up in the tree view the accounts do however show up in the account view in the actions flap. may be duplicate of https://bugs.kde.org/show_bug.cgi?id=248554 and fixed in newer versions. it showed up immediately in the accounts list, but not in the tree-view. the accounts i added where empty accounts (no folders, few/none mails) after i created a folder and moved a mail into it (using kontact stationary), the account showed up in kmail-mobile i suspect the flaw exists for the other apllications (adress, kalendar, notes), too sorry, but i disagree with that solution obviously, the kolab wizard has to handle that correctly by adding the domain part to the username (and it does that already) but adding kolab-specific workarounds to the generic imap wizard is wrong imho most non-kolab imap servers i know don t require a domain part in the username, and keep in mind that this is only about the pre-filled value in the username field anyway, in case you have a different username than the suggested default you have to edit it."
60,"""(251917) KDE - Contradictory notifications after sending, when no transport configured, email afterwards lost"" Date: '2010-09-21 12:46:10' From: 'felix wolfsteller' similar to https://bugs.kde.org/show_bug.cgi?id=248775 , when attempting to send a message without a configured transport to reproduce 0) start kmail-mobile 1) open composer ( write new mail ) 2) open action flap->configure transport 3) press delete for every transport 4) add recipient, enter subject and text for the mail 5) press send this results in two notifications error while trying to send email there were problems and e-mail successfully sent these notifications should not appear together the email is afterwards lost (not found in outbox or sent-mail). Date: '2010-09-21 12:46:59' From: 'felix wolfsteller' encountered with version 4:4.5~20100920.1177660-1maemo1.1177547 . Date: '2010-09-22 11:01:21' From: 'bj?rn balazs' is this a dublicate of https://bugs.kde.org/show_bug.cgi?id=249993 ? Date: '2010-09-22 11:22:49' From: 'felix wolfsteller' (in reply to comment #2) > is this a dublicate of https://bugs.kde.org/show_bug.cgi?id=249993 great that you keep eyes on this imho, its not fully the (the other issue is more sent-mail and malformed adress - centric) probably the intermediate cause for the conflicting notifications is i hope the devs can straighten this out and mark as duplicate if it is. Date: '2010-09-29 15:04:02' From: 'volker krause' svn commit 1180939 by vkrause don t emit sentsuccessfully() after failed(), that causes the current draft to be lost bug: 251917 bug: 249993 m +3 -1 messagecomposer/composerviewbase.cpp m +1 -0 mobile/mail/composerview.cpp websvn link: http://websvn.kde.org/?view=rev&revision=1180939 Date: '2010-10-04 10:10:41' From: 'felix wolfsteller' in 4:4.5~20101001.1181430-1maemo1.1181463 , not reproducible instead, just the error message is shown the composer view is kept open, though.","similar to https://bugs.kde.org/show_bug.cgi?id=248775 , when attempting to send a message without a configured transport this results in two notifications error while trying to send email there were problems and e-mail successfully sent these notifications should not appear together the email is afterwards lost (not found in outbox or sent-mail). imho, its not fully the (the other issue is more sent-mail and malformed adress - centric) probably the intermediate cause for the conflicting notifications is instead, just the error message is shown"
61,"""(80789) KDE - shortcut for rename should be F2 for consistency with konqueror"" Date: '2004-05-02 15:13:13' From: 'janis blechert' version: 0.11.9 (using kde 3.2.2, gentoo) compiler: gcc version 3.3.3 20040217 (gentoo linux 3.3.3, propolice-3.3-7) os: linux (i686) release 2.6.5-gentoo as usual the titel says it all i meant the renaming of the cd ( k3b data project , etc), but possible the normal file renaming uses ctrl+r aswell, which is inconsistent with konqueror -janis blechert Date: '2004-11-30 17:01:21' From: 'stephan binner' *** bug 81915 has been marked as a duplicate of this bug *** Date: '2004-11-30 17:01:32' From: 'stephan binner' *** bug 81699 has been marked as a duplicate of this bug *** Date: '2004-12-23 18:16:33' From: 'gilles schintgen' *** this bug has been confirmed by popular vote *** Date: '2005-05-18 08:19:15' From: 'mohd asif ali rizwaan' make it work with ctrl+r and f2 key i really find it annoying to use ctrl+r, cause it is difficult to press the combination f2 is quick please make it consistent. Date: '2005-05-23 18:50:52' From: 'sebastian trueg' currently doing it and using this bug to log into this system Date: '2005-05-23 18:55:00' From: 'sebastian trueg' *** bug has been marked as fixed ***. Date: '2005-06-27 19:26:23' From: 'mohd asif ali rizwaan' thanks a million sebastian trueg i really appreciate k3b and its ease of use.","i meant the renaming of the cd ( k3b data project , etc), but possible the normal file renaming uses ctrl+r aswell, which is inconsistent with konqueror make it work with ctrl+r and f2 key"
62,"""(73686) KDE - OK/Apply icon isn t displayed when using Crystal SVG"" Date: '2004-01-28 16:31:10' From: 'janis blechert' version: (using kde devel) installed from: compiled sources compiler: 3.2.3 - os: linux well the title says it all, you have to enable display icons on buttons in the style-control-thingy, instead of a check mark, a blank file-type-icon is displayed Date: '2004-01-28 17:02:20' From: 'kenneth wimer' i am not sure which icon to use here...any idea was there an icon on this button in earlier versions (i don t think so...not all of the buttons have icons on them) does anyone know which exact icon is being used now and why it is either using the empty-doc icon because it is coded that way or (i guess) because the correctly named icon is missing. Date: '2004-01-28 21:27:36' From: 'janis blechert' there was an icon, a green check mark, fits nicely imho Date: '2004-01-28 22:49:05' From: 'kenneth wimer' hmmm....you mean cr22-action-button_ok.png in kdelibs/pics/crystalsvg which is (afaik) used for the ok button i really don t think that the apply button had an icon on it....i will talk to tackat about this one he knows more about what kde used in the past than i. Date: '2004-02-02 15:48:45' From: 'kenneth wimer' i have added these files as cr[16,22,32]-action-apply.png it would be good to note that the cr[22-32]-action-button_ok.png are differently than the 16x16 version (cr16-action-ok.png) this should be fixed by someone who can also fix the code.","well the title says it all, you have to enable display icons on buttons in the style-control-thingy, instead of a check mark, a blank file-type-icon is displayed i am not sure which icon to use here...any idea it is either using the empty-doc icon because it is coded that way or (i guess) because the correctly named icon is missing. there was an icon, a green check mark, fits nicely imho it would be good to note that the cr[22-32]-action-button_ok.png are differently than the 16x16 version (cr16-action-ok.png) this should be fixed by someone who can also fix the code."
63,"""(86044) KDE - actions freeze the gui"" Date: '2004-07-26 21:52:53' From: 'janis blechert' version: 0.8.3 (using kde 3.2.3, gentoo) compiler: gcc version 3.3.3 20040412 (gentoo linux 3.3.3-r6, ssp-3.3.2-2, pie-8.7.6) os: linux (i686) release 2.6.7-ck5 everytime one connects to some kind of protocol the gui freezes (if you re offline it will be freezed until it timed out), the gui will also freeze for a short time if one joins/parts some irc channel, if the load is low this won t be noticed much, but there seems to be some kind of operation running which completely freezes the gui, imho this should run in the background and leave the rest of the gui responsible. Date: '2004-08-17 01:11:38' From: 'richard smith' i just tried connecting with yahoo, msn, jabber, icq, aim and gadu-gadu, and none of them had this problem i then tried connecting all 12 of my accounts at once, and noticed a very slight lag in the ui. Date: '2004-08-27 20:52:59' From: 'olivier goffart' i think this has been fixed in kde 3.3 with the new socket api Date: '2004-08-27 20:53:08' From: 'olivier goffart' i think this has been fixed in kde 3.3 with the new socket api Date: '2004-08-27 21:41:55' From: 'matt rogers' > ------- additional comments from ogoffart tiscalinet be 2004-08-27 20:52 ------- > i think this has been fixed in kde 3.3 with the new socket api no, this has not been fixed you see my kopete block when i connect all 5 of my accounts Date: '2004-08-27 21:44:37' From: 'matt rogers' kopete still blocks the ui when connecting my 5 accounts janis: which protocols do you have accounts for? Date: '2004-08-27 22:13:49' From: 'janis blechert' just icq and jabber, i don t connect them at startup but only when i use them, if i connect them both at the same time i can t notice any blocked ui, so from my part this bug is fixed Date: '2004-08-27 22:15:50' From: 'matt rogers' works for the reporter, so i ll close my problems are probably due to my spewing of debug output i ll investigate for myself Date: '2005-07-03 13:48:55' From: 'rapha?l pinson' same here with kopete 0.10 (kde 3.4.1) it works fine when i connect only one account at a time, but freezes 2 times over 3 trials when trying to connect all my accounts (1 yahoo, 2 msn, 1 jabber, 1 icq, 2 gg, 1 aim) at the same time it doesn t only lag, it simply freezes and i have to kill kopete and start again.","everytime one connects to some kind of protocol the gui freezes (if you re offline it will be freezed until it timed out), the gui will also freeze for a short time if one joins/parts some irc channel, if the load is low this won t be noticed much, but there seems to be some kind of operation running which completely freezes the gui, imho this should run in the background and leave the rest of the gui responsible. i think this has been fixed in kde 3.3 with the new socket api just icq and jabber, i don t connect them at startup but only when i use them, if i connect them both at the same time i can t notice any blocked ui, so from my part this bug is fixed it works fine when i connect only one account at a time, but freezes 2 times over 3 trials when trying to connect all my accounts (1 yahoo, 2 msn, 1 jabber, 1 icq, 2 gg, 1 aim) at the same time it doesn t only lag, it simply freezes and i have to kill kopete and start again."
64,"""(88340) KDE - disable displaying of status icons of contacts"" Date: '2004-08-28 22:18:10' From: 'janis blechert' version: 0.9.0 (using kde 3.3.0, gentoo) compiler: gcc version 3.3.3 20040412 (gentoo linux 3.3.3-r6, ssp-3.3.2-2, pie-8.7.6) os: linux (i686) release 2.6.8-gentoo-r3 since kopete is a multimessenger and has the idea of metacontacts etc i don t think it s neccessary to display on which network the contact is online (because it doesn t matter), this makes even more sense if you have people who have several different accounts and irc nicks and keeping track of all of them can quite clutter the contact list, so i would simply like an option to turn of the displaying of the tiny icq/irc/etc icons right (or wherever you choose them to be) of the display name, hope this will be done any time soon, thanks for kopete it s such a great app! Date: '2004-09-29 19:46:43' From: 'georges goncalves' i d like an option to do exactly the opposite in fact, the contact list is organised as [kopetestatusicon][contactname][protocolicon] well, i d like a way to tell kopete to display only [protocolicon][contactname] in fact, the best way would be to allow a css customisation of the contact list, just as we can have in message windows Date: '2004-09-29 21:07:53' From: 'richard smith' i am already considering adding that feature for the next version of kopete there are no technical or technological problems preventing it however, there may not be time to implement it before kde3.4. Date: '2004-09-29 22:11:42' From: 'jason keirstead' on september 29, 2004 04:07 pm, richard smith wrote > ------- i am already considering adding that feature for the next version > of kopete there are no technical or technological problems preventing it > however, there may not be time to implement it before kde3.4 richard, are you hinting that you are going to render the list view inside a khtml widget that would be hella cool, but also hella complicated Date: '2004-09-29 23:27:58' From: 'richard smith' on wednesday 29 september 2004 9:13 pm, jason keirstead wrote > richard, are you hinting that you are going to render the list view inside > a khtml widget it s an option i m considering, for sure but the current contact list code is quite flexible - flexible enough to allow me to throw together a drag-and-drop style editor for it, at least this needs more discussion before anything gets coded richard Date: '2007-11-14 14:44:00' From: 'will stephenson' something to think about for 4.1 Date: '2008-07-21 14:59:38' From: 'ramon antonio parada' i think many people would be interested in showing this maybe an option could be added (if enought demand) to disable it. Date: '2009-03-30 10:33:56' From: 'roman jarosz' fixed in trunk (svn commit 946606) will be in kde 4.3, in trunk user can define contact list layout so you can hide the icons or change order.","since kopete is a multimessenger and has the idea of metacontacts etc i don t think it s neccessary to display on which network the contact is online (because it doesn t matter), this makes even more sense if you have people who have several different accounts and irc nicks and keeping track of all of them can quite clutter the contact list, so i would simply like an option to turn of the displaying of the tiny icq/irc/etc icons right (or wherever you choose them to be) of the display name, hope this will be done any time soon, thanks for kopete it s such a great app! in fact, the best way would be to allow a css customisation of the contact list, just as we can have in message windows i am already considering adding that feature for the next version of kopete but the current contact list code is quite flexible - flexible enough to allow me to throw together a drag-and-drop style editor for it, at least fixed in trunk (svn commit 946606) will be in kde 4.3, in trunk user can define contact list layout so you can hide the icons or change order."
65,"""(81962) KDE - sound mixer is a positioned wrong (sorry couldn t make up any better summary)"" Date: '2004-05-21 17:36:39' From: 'janis blechert' version: unknown (using kde 3.2.2, gentoo) compiler: gcc version 3.3.2 20031218 (gentoo linux 3.3.2-r5, propolice-3.3-7) os: linux (i686) release 2.6.5-gentoo-r1 i don t know any words to describe what i see, just look at the screenshots and you should see i am no programmer but since i am learning a bit c++ i thought i could give it a try, dunno if my patch breaks anything but i don t think thats possible i didn t know if m_errorlabel should have been changed too, didn t see any difference so i let it be Date: '2004-05-21 17:37:14' From: 'janis blechert' created attachment 6077 my patch Date: '2004-05-21 17:44:23' From: 'janis blechert' alright i just kind of accidentialy deleted the screenshots and i am not going to compile it all again since i thought i was finished and deleted everything... so...the problem was that the soundmixers were displayed a bit to low (for use with the default background image) and not in-line with the icons, in the patch i just set the default mixer hight to -2 , this doesn t solve the same problem when using a large kicker and it introduces a new one, when using small as size for the kicker the upper grey line is overdrawn by the soundmixer because it frees about 4 pixel more than it would need to to display it s mixers.. and because i ve no idea how to change that i ll leave it to you Date: '2004-06-15 02:13:25' From: 'christian esken' hi, actually the problem is much more complicated it depends on the height of the panel and whether icons are shown and the direction of the panel i have a version that works much better already although its not public yet, i ll like to close this bug report if kde3.3 does not ship with a satifactory panel applet, please talk back thanks and bye, chris Date: '2004-06-15 06:12:41' From: 'janis blechert' no problem with that","so...the problem was that the soundmixers were displayed a bit to low (for use with the default background image) and not in-line with the icons, in the patch i just set the default mixer hight to -2 , this doesn t solve the same problem when using a large kicker and it introduces a new one, when using small as size for the kicker the upper grey line is overdrawn by the soundmixer because it frees about 4 pixel more than it would need to to display it s mixers.. it depends on the height of the panel and whether icons are shown and the direction of the panel i have a version that works much better already"
66,"""(66932) KDE - viewing multiple jpg images in tabs will slow down konqueror"" Date: '2003-10-30 21:50:24' From: 'janis blechert' version: 4.0 (using kde 3.1.9) compiler: gcc version 3.2.3 os: linux (i686) release 2.4.22-ck2 i dont know if this is a bug but i do hope so when browsing multiple (jpg) images and having 10+ tabs open with loading images, konqueror gets slow, this happens for example while browsing deviantart.com or some picture galery i know that loading images takes cpu power but since only konqueror is that extremly slow i think it is a bug (i already recompiled libjpg and konqueror with optimized cflags but i didnt help) i use selfcompiled kde 3.2 alpha2 on slackware 9.1 Date: '2003-10-31 04:34:34' From: 'robert guthrie' konq seems to redraw all the tabs when you open another, i dont think it is related to the content of tabed view itself i heard this may be a qt bug actually. but it sure is annoying it can really bog the system down if you have too many tabs. Date: '2003-10-31 10:02:02' From: 'janis blechert' after the images are loaded completely the perfomance is normal again Date: '2006-08-08 10:23:39' From: 'lexual' is this still an issue for you janis? Date: '2006-08-30 20:31:47' From: 'joseph kerian' this does, in fact, still happen to me on devaintart i wonder if the problem is konq s picture handling, or javascript on those pages set your system to open new windows in tabs, go to deviantart.com, and middle click all of the top level images.. now open a new tab and refresh a page that is cached on my system, the mouse starts jumping and the cached page loads just as slowly as the deviantart pages. Date: '2006-08-30 20:52:55' From: 'roger larsson' no problem for me konqueror 3.5.1 (suse 10.1) but i do have 2 gb of ram - it could help, alot check cache settings i had use cache, keep syncronized, 20 mb on disk (very little...) Date: '2006-08-31 00:12:49' From: 'matt broadstone' closing this as i can reconfirm roger s report that it is not an issue in 3.5 i m running a 1.7ghz laptop with 512mb ram, so its not just a memory issue unless you have a very old computer.","when browsing multiple (jpg) images and having 10+ tabs open with loading images, konqueror gets slow, this happens for example while browsing deviantart.com or some picture galery konq seems to redraw all the tabs when you open another, i dont think it is related to the content of tabed view itself i heard this may be a qt bug actually. closing this as i can reconfirm roger s report that it is not an issue in 3.5"
67,"""(174533) KDE - moving files opens too many file dialogs"" Date: '2008-11-07 13:43:53' From: 'evert vorster' version: (using kde 4.1.2) installed from: compiled from sources amarok version 1.94 when moving a large amount of files to my collection, amarok2 opens a file dialog for every single file that it moves to reproduce make a directory where you would like your music collection to be stored go in to amarok2 and set it up so that the new collection area is included then, right-click on local collection, select organise and select the new destination for the files even my core 2 duo with 2 gb of ram could not handle 16,000 file dialogs, and crashed my whole system hard, requiring a reboot can we please either 1) move the files sequentially, or 2) not display a file dialog? Date: '2008-11-08 08:51:36' From: 'seb ruiz' sorry, i can t reproduce this i just tried, and there is information shown in the progress bar and nowhere else i m copying tracks to my local sql collection i assume you are doing the same? Date: '2008-11-08 09:30:31' From: 'evert vorster' are you using amarok to move the files it still opens a file dialog for every file that it is organising i just checked again i have the following options ticked on in the organise files option use cover art for folder icons ignore the in artist names group by file type replace spaces with underscores restrict to ascii vfat safe filenames overwrite destination it might be that one of those options trigger this, or the combination weird once i started messing around with what is ticked, the problem went away now i am also unable to reproduce it Date: '2008-11-08 12:40:38' From: 'evert vorster' i have been able to reliably reproduce the bug use the files tab of amarok, then click on the directory that you want to move the files from, select move to collection select the following use cover art for folder icons ignore the in artist names group by file type replace spaces with underscores restrict to ascii vfat safe filenames overwrite destination it makes lots of file transfer windows for me, every time -evert- Date: '2008-11-08 13:05:42' From: 'seb ruiz' i still can t reproduce this are you using copying using amarok s filebrowser, or are you organising the collection browser how did you install amarok (compiled, packages etc) and which platform are you using Date: '2008-11-08 14:05:34' From: 'evert vorster' i am using amarok s file browser i think so, anyways i click on the files tab i have noticed that i only get the lots of file moving dialogs if i have all of those options ticked right now i am moving my files in to my collection with overwrite destination unticked and i do not get the file dialogs then i downloaded the source of amarok 1.94, and compiled it with gcc 4.2.3 i am using sorcerer linux, so all software on my system is hand-optimized and locally compiled -evert- Date: '2008-11-08 14:12:05' From: 'seb ruiz' svn commit 881542 by seb fix boolean logic which caused the progress info to be shown when overwriting tracks during a collection copy bug: 174533 m +2 -0 changelog m +1 -1 src/collection/sqlcollection/sqlcollectionlocation.cpp websvn link: http://websvn.kde.org/?view=rev&revision=881542","when moving a large amount of files to my collection, amarok2 opens a file dialog for every single file that it moves 1) move the files sequentially, or 2) not display a file dialog? use the files tab of amarok, then click on the directory that you want to move the files from, select move to collection use cover art for folder icons ignore the in artist names group by file type replace spaces with underscores restrict to ascii vfat safe filenames overwrite destination it makes lots of file transfer windows for me, every time right now i am moving my files in to my collection with overwrite destination unticked and i do not get the file dialogs then"
68,"""(174663) KDE - excessive memory use during file operations"" Date: '2008-11-08 21:52:57' From: 'evert vorster' version: (using kde 4.1.2) compiler: gcc 4.3.2 -march=native -o2 -pipe os: linux installed from: compiled from sources compiled amarok 1.94 from source with gcc 4.3.2 i wanted to clean up a little of my disk space, and get my music collection in a little better shape admittedly, the collection is a little large, with about 16,000 songs to reproduce: right-click on my local collection, and then pick organize files ticked sort by file type, and replace spaces with underscores, restrict to ascii then clicked on continue the amarok gui becomes completely unusable, and when switching between screens and back it does not redraw so i leave it alone for a few hours, even though file renames and moving on the same filesystem should be fairly quick result: when i returned to my machine, all of my 2gb of ram was claimed by amarok, the cpu was still at 100% and my swap was thrashing madly while amarok did not actually crash, it did become completely unresponsive investigation: so, i killed the amarok process then i try again with a smaller set of files, ( one band ) and the file move operation was done almost instantly so i try ever bigger selections of files with the time used by amarok to sort and move them increasing linearly with the amount of files picked at about ten bands or so selected i run out of ram again and the time waited increases exponentially as swap is terribly slow conclusion: seems to me that amarok is trying to load every song in my collection in to ram before starting to move them this is fine for handling small amounts of data, but makes no sense when pointed at a collection of about 100gb expected behaviour: amarok should be able to deal with huge amounts of files gracefully check how much ram is available and only run batches that will actually fit in to the ram in serial rather than try to move all the files at once. Date: '2008-11-08 23:53:08' From: 'seb ruiz' sounds like a reasonable request. Date: '2008-12-02 18:28:18' From: 'dan meltzer' targeting this for 2.0.1 as it s a pretty important feature (and many people are going to want to organize their entire collection, so it will probably effect the masses.) Date: '2009-03-17 19:07:04' From: 'mark kretschmann' is this still valid with svn trunk the report is super old... Date: '2009-04-13 01:37:56' From: 'seb ruiz' yes, this report is still valid. Date: '2009-08-02 13:00:39' From: 'myriam schweingruber' any news on this changed version. Date: '2009-11-25 04:03:17' From: 'evert vorster' amarok does not eat up huge amounts of memory anymore collection management still leaves a little to be desired, though i suppose that will have to go into usability bugs i was able to move around 20gb worth of songs from a directory to my collection.","the amarok gui becomes completely unusable, and when switching between screens and back it does not redraw result: when i returned to my machine, all of my 2gb of ram was claimed by amarok, the cpu was still at 100% and my swap was thrashing madly conclusion: seems to me that amarok is trying to load every song in my collection in to ram before starting to move them expected behaviour: amarok should be able to deal with huge amounts of files gracefully targeting this for 2.0.1 as it s a pretty important feature (and many people are going to want to organize their entire collection, so it will probably effect the masses.) amarok does not eat up huge amounts of memory anymore collection management still leaves a little to be desired, though i suppose that will have to go into usability bugs i was able to move around 20gb worth of songs from a directory to my collection."
69,"""(175376) KDE - organize files not working."" Date: '2008-11-17 09:27:18' From: 'evert vorster' version: 1.94 (using kde 4.1.3) os: linux installed from: compiled from sources i have two directories that i use as music collections one ( music ) has all my music in complete chaos the other, ( tunes ) is where i want to place songs after i sorted out their tags, genre etc after looking at many music databases, i decided to organize according to genre would suit me best the only way to do this in amarok is to tick custom in the file organize dialog i fiddled with it until i got the preview of where the files are supposed to go the way i liked it, and clicked on ok no new directories were created in ( tunes ) in fact, it looks like exactly nothing happened i double checked that i had write permissions in that directory, and double checked that i have selected the right directory in amrarok. Date: '2008-11-18 19:10:42' From: 'teo mrnjavac' can you please explain what you did in more detail did you select the right collection in the drop-down box on the top of the dialog did you use basic or advanced mode also please include the complete paths in the description. Date: '2008-11-19 02:33:24' From: 'teo mrnjavac' @evert vorster: i hope you don t mind if i paste your email here, but it s best if the rest of the amarok dev team is kept informed the more detailed description by the person who reported the bug follows hi there thanks for looking in to this one in more detail i keep my music on a removable hard disk the path to my music collection is /media/evert250gb/music this one has about 16,000 songs, in various formats, and various states of completeness i want to create a new collection, with only the songs that have been correctly tagged and sorted in /media/evert250gb/tunes this directory is currently empty so, i select both these folders and index the music collection once that was done, i picked a band that i knew what genre they are normally classified in to i made sure that all the tags are correct in all the songs then, in the collection i selected all the songs i want to move to the new directory, and right-click and then organize files here i select /media/evert250gb/tunes as the destination directory i tick use cover art for folder icons and ignore the in artists names then i tick custom format i drag down stuff until i get genre/artist/album i have tried the same with the advanced tab, too %genre/%artist/%album also ticked are replace spaces with underscores and restrict to ascii unticked are vfat safe names and overwrite destination then i click on ok what i would expect is that a new directory to me made in /media/evert250gb/tunes, the name of which is the genre of my mp3 this directory stays empty, though i checked that i have permissions to write to this directory, and i have actually given everybody write permission to that directory still nothing if you need any more info, please do not hesitate to ask kind regards, -evert vorster- Date: '2008-11-19 02:36:34' From: 'teo mrnjavac' as i understand, you didn t drag down the token collection root , please confirm if that s the case and try with the collection root token if so, the report is invalid but useful nonetheless because it points to something that could be an obvious usability issue Date: '2008-11-19 15:29:59' From: 'teo mrnjavac' fixed in svn revision 886544 removed collection root token from token pool and placed before the filenamelayoutwidget as a constant token a path is now forced to begin with the current collection s root i can t think of a sane use case where the user would want to operate with organizecollectiondialog on a path outside of the collection root.","the only way to do this in amarok is to tick custom in the file organize dialog i fiddled with it until i got the preview of where the files are supposed to go the way i liked it, and clicked on ok then, in the collection i selected all the songs i want to move to the new directory, and right-click and then organize files what i would expect is that a new directory to me made in /media/evert250gb/tunes, the name of which is the genre of my mp3 this directory stays empty, though i checked that i have permissions to write to this directory, and i have actually given everybody write permission to that directory as i understand, you didn t drag down the token collection root , please confirm if that s the case and try with the collection root token removed collection root token from token pool and placed before the filenamelayoutwidget as a constant token a path is now forced to begin with the current collection s root"
70,"""(226761) KDE - Multi File rename number of digits."" Date: '2010-02-14 08:41:30' From: 'evert vorster' version: (using kde 4.3.5) compiler: gcc 4.3.3 os: linux installed from: compiled from sources hi there in dolphin, i have a a bunch of files that are named pretty much at random, and i want to import them into a video editor the name is not important, just the date they are created in in the video editor the files are sorted to their names so i assume that i can sort them to date and then select them all, and press f2 to rename them so, i get this output 1.mts 2.mts .. 10.mts 11.mts and so on.. in the video editor the files are sorted 1.mts 10.mts .... 2.mts 20.mts so, i think. right, it wants to be tricky.. lets add two of these # in there, to give me two digits.. i was _stunned_ to see the output as 11.mts 22.mts ........ 1010.mts 1111.mts i see the logic.. each # gives an increasing number however, i want the files to be of the name 00000000001.mts 00000000002.mts ... 00000000010.mts 00000000011.mts how do i set the leading zero s i searched all sorts of documentation, and could not find it.. so now i respectfully ask for this to be added to dolphin no, my video editor does not support sorting the files on date.. nor does it do the silly natural name sorting it sorts on names the posix way one other place i ran into this shortcoming of rename is when i was trying to import a range of pictures into ffmpeg to make a time-lapse movie i simply could not rename a 1000 photos ( only a few seconds of video ) so that they all follow on each other, and have the same amount of digits in the filename kind regards, -evert vorster- Date: '2010-07-12 23:45:59' From: 'jeffrey g thomas' i second this, this is very important that files are named in the selected order (when listed by date, or size, or whatever) and that the # part is padded with zeros so that the files are always listed in the proper order find out how many it is renaming and perhaps add an additional 0 ahead of that, so for 800 items they would be listed as item0001.ext item0002.ext .. item0800.ext thanks for kde. Date: '2010-10-05 18:29:24' From: 'peter penz' svn commit 1182776 by ppenz - integrate the patch from matthias fuchs from http://reviewboard.kde.org/r/5496 to allow having leading zeros when renaming files: e.g. using the name a ###.jpg results in the filenames a 001.jpg , a 002.jpg .. the patch could be simplified a little bit by guaranting only one connective sequence of # s - move the renaming code into the renamedialog ccmail: mat69@gmx.net bug: 226761 fixed-in: 4.6.0 m +5 -12 panels/folders/folderspanel.cpp m +12 -17 views/dolphinview.cpp m +80 -15 views/renamedialog.cpp m +18 -50 views/renamedialog.h websvn link: http://websvn.kde.org/?view=rev&revision=1182776 Date: '2011-09-12 02:53:42' From: 'jeffrey g thomas' created attachment 63575 screenshot of no leading zeros screenshot of no leading zeros the files renamed to test1-9 should have been renamed to test01-09 so that the files are always in the correct order Date: '2011-09-12 02:54:33' From: 'jeffrey g thomas' this doesn t seem to work for me in kde 4.6.5 on debian sid, any ideas do i need to enable this somewhere? Date: '2011-09-12 02:55:24' From: 'jeffrey g thomas' sorry, i read the patch description better and i needed ## in the rename thanks much!","no, my video editor does not support sorting the files on date.. nor does it do the silly natural name sorting it sorts on names the posix way one other place i ran into this shortcoming of rename is when i was trying to import a range of pictures into ffmpeg to make a time-lapse movie i simply could not rename a 1000 photos ( only a few seconds of video ) so that they all follow on each other, and have the same amount of digits in the filename - integrate the patch from matthias fuchs from http://reviewboard.kde.org/r/5496 to allow having leading zeros when renaming files: e.g. using the name a ###.jpg results in the filenames a 001.jpg , a 002.jpg .."
71,"""(216039) KDE - kspread not rendering spreadsheet cells."" Date: '2009-11-25 02:17:08' From: 'evert vorster' version: 2.1 rc 1 (using 4.3.3 (kde 4.3.3), compiled sources) compiler: gcc os: linux (i686) release 2.6.31.6 after updating to kde 4.3.2, kspread does not display spreadsheets the ui appears, but where it is supposed to render the cells there is just what was on the screen before kspread cpu usage jumps to 100% the application does not crash, and i can exit it normally with the file menu kde version: 4.3.3 qt version: 4.5.3 glibc version: 2.11 when started from the command line this is my output ------------------------------------------------------- wed nov 25 09:57 evert@dora: ~$ kspread Kross: Action::setInterpreter: interpreter not found: python wed nov 25 09:55 evert@dora:~$ python python 2.6 (r26:66714, nov 23 2009, 18:17) [gcc 4.3.3] on linux2 type help , copyright , credits or license for more information >>> keyboardinterrupt >>> quit use quit() or ctrl-d (i.eeof) to exit >>> wed nov 25 09:25 evert@dora --------------------------------------------------- as you can see, python is definitely installed and reachable on my system the same error message is documented on https://bugs.launchpad.net/ubuntu/+source/koffice2/+bug/391829 but it appears that their kspread is still working i have seen this error on koffice 2.0.2 and 2.0.91, 32bit and 64bit versions. Date: '2009-11-25 02:19:31' From: 'evert vorster' created attachment 38554 screenshot Date: '2009-11-25 02:28:14' From: 'evert vorster' created attachment 38560 compile/install log for koffice 2.0.91 i am running sorcerer as such all software on the machine is compiled from source pretty much in the same way as gentoo i might have missed a dependency, but i missed a dependency, so did your compile script annoyingly, this used to work on an older version of kde i m sorry that i do not use kspread all that often, so i can t pinpoint exactly when it stopped working for me -evert vorster- Date: '2009-11-25 02:30:40' From: 'evert vorster' oh, i am also willing to do tests and recompilations and answer any relevant questions on this bug i did look for duplicates of this bug, but the other bugs files here are all segfaulting, this one kspread keeps on running normally, apart from not displaying cells. Date: '2009-12-22 21:53:15' From: 'eugene markow' the non-appearing spreadsheet / cells issue on kspread was first reported on 2009-10-14 at bug report #210534 https://bugs.kde.org/show_bug.cgi?id=210534 thanks. Date: '2010-01-18 06:45:45' From: 'evert vorster' it is indeed the same bug also, i can confirm that updating to koffice 2.1.1 cures the bug thanks for the great support.","after updating to kde 4.3.2, kspread does not display spreadsheets the ui appears, but where it is supposed to render the cells there is just what was on the screen before kspread cpu usage jumps to 100% the application does not crash, and i can exit it normally with the file menu https://bugs.launchpad.net/ubuntu/+source/koffice2/+bug/391829 as such all software on the machine is compiled from source pretty much in the same way as gentoo annoyingly, this used to work on an older version of kde i m sorry that i do not use kspread all that often, so i can t pinpoint exactly when it stopped working for me the non-appearing spreadsheet / cells issue on kspread was first reported on 2009-10-14 at bug report #210534 it is indeed the same bug"
72,"""(242405) KDE - Digikam configure script misleading."" Date: '2010-06-21 21:01:26' From: 'evert vorster' version: 1.3.0 (using kde 4.4.4) os: linux digikam 1.3.0 depends upon unreleased versions of libraries libkexiv2 and libkdcraw when the configure script does not find the version of the libraries it needs, it reports the libraries missing, in stead of too old reproducible: didn t try steps to reproduce: compile digikam 1.3.0 actual results misleading messages from the configure script -- checking for module libkdcraw>=1.1.0 -- package libkdcraw>=1.1.0 not found -- checking for module libkexiv2>=1.1.0 -- package libkexiv2>=1.1.0 not found expected results: your installed versions of $library is too old, please upgrade to at least $required version it s poor form to release software as stable when it depends upon libraries that have not yet been marked as stable. Date: '2010-06-21 21:07:43' From: 'johannes wienke' we cannot do much about this because the pkgconfig macro from cmake simply says whether it has found a suitable version or not if not, it does not tell which version was found but wasn t sufficient. Date: '2010-06-21 21:48:48' From: 'evert vorster' thanks for the extra info i was under the impression that each project can fine-tune their own cmake script, same as the configure script of old do you think we can ask for a change in the cmake scripts themselves, then -evert- Date: '2010-06-21 21:54:28' From: 'johannes wienke' we could do a workaround, first requesting every version of the library and then in a second step the desired version but i do not think it s worth the work actually i think it would be better if kde would switch to the new cmake pkgconfig wrapper this one gives much better console output of what s exactly requested. Date: '2010-06-21 21:56:56' From: 'evert vorster' nope i prefer to keep things simple as well it would be better for the pkgconfig wrapper to be used in kde.","when the configure script does not find the version of the libraries it needs, it reports the libraries missing, in stead of too old expected results: your installed versions of $library is too old, please upgrade to at least $required version it s poor form to release software as stable when it depends upon libraries that have not yet been marked as stable. we cannot do much about this because the pkgconfig macro from cmake simply says whether it has found a suitable version or not if not, it does not tell which version was found but wasn t sufficient. actually i think it would be better if kde would switch to the new cmake pkgconfig wrapper i prefer to keep things simple as well it would be better for the pkgconfig wrapper to be used in kde."
73,"""(337925) Gnome - AttributeError: NoneType object has no attribute split "" Date: '2006-04-10 12:13:52' From: 'christian kirbach' happens with at least the following jhbuild gnome 2.14 modules gedit, zenity, file-roller, rhythmbox traceback (most recent call last) make[2]: *** [es/rhythmbox.xml] fehler 1 make[2]: verlasse verzeichnis ?/cvs/gnome/rhythmbox/help? Date: '2006-04-10 13:33:04' From: 'christian kirbach' <kmaraas> nazgul, i got the same problem as you in gnome-panel Date: '2006-04-10 13:35:28' From: 'kjartan maraas' and i found that if i continued the build outside of jhbuild it passed (or it could be that running it a second time would make it pass too, but i didn t check that) Date: '2006-04-10 13:51:18' From: 'christian kirbach' a second run does not change anything i acknowledge it compiles for me as well using the system-wide xml2po playing with python_path environment variable did not remedy. Date: '2006-04-10 18:26:33' From: 'eloi primaux' got the same for gnome-applet, gedit and perhaps more with jhbuild is smth changed in xml2po last week it was working correctly.. i have no system wide xml2po and playing with the environment fix nothing Date: '2006-04-11 13:36:41' From: 'danilo segan' created an attachment (id=63236) fix handling of untranslated translators-credits yes, something has changed in xml2po (we allow marking of untranslated strings now, it was a recent bugfix, and this introduced a problem with untranslated translator-credits ) please commit this for me (i don t have my ssh key here) 2006-04-11 danilo ?egan <danilo@gnome.org> * modes/docbook.py: check if translators-credits is translated note to self: add more regression tests involving docbook mode and real data. Date: '2006-04-11 13:47:02' From: 'danilo segan' *** bug 338031 has been marked as a duplicate of this bug *** Date: '2006-04-11 13:59:46' From: 'christian kirbach' fix works for me. Date: '2006-04-11 15:42:01' From: 'danilo segan' can anyone commit it for me thanks Date: '2006-04-11 16:19:58' From: 'elijah newren' sure Date: '2006-04-11 16:34:29' From: 'christian kirbach' *** bug 338096 has been marked as a duplicate of this bug *** Date: '2006-04-19 20:28:50' From: 'danilo segan' *** bug 338388 has been marked as a duplicate of this bug *** Date: '2006-06-02 17:30:52' From: 'danilo segan' *** bug 337015 has been marked as a duplicate of this bug ***","gedit, zenity, file-roller, rhythmbox traceback (most recent call last) and i found that if i continued the build outside of jhbuild it passed (or it could be that running it a second time would make it pass too, but i didn t check that) got the same for gnome-applet, gedit and perhaps more with jhbuild is smth changed in xml2po fix handling of untranslated translators-credits yes, something has changed in xml2po (we allow marking of untranslated strings now, it was a recent bugfix, and this introduced a problem with untranslated translator-credits ) *** bug 338031 has been marked as a duplicate of this bug *** *** bug 338096 has been marked as a duplicate of this bug *** *** bug 338388 has been marked as a duplicate of this bug *** *** bug 337015 has been marked as a duplicate of this bug ***"
74,"""(331732) Gnome - playlist entries do not always get removed"" Date: '2006-02-19 01:51:19' From: 'christian kirbach' purge playlist add two files play the first entry right-lick it and select eleminate playback skips to the next song but the entry is not visibly removed this leads to a crash when the first entry is played again and attempted to eleminate. Date: '2006-02-19 03:16:32' From: 'alex lancaster' can t duplicate this with head as of today i suspect this is a duplicate of bug #131150 which just got fixed today marking as such re-open if this still isn t fixed *** this bug has been marked as a duplicate of 131150 *** Date: '2006-02-19 15:00:13' From: 'christian kirbach' hmm i still can reproduce it Date: '2006-02-19 16:40:26' From: 'alex lancaster' with cvs head what do you mean by eliminate, you mean remove or move to trash i can t duplicate this. Date: '2006-03-06 15:49:05' From: 'christian kirbach' yes with cvs head still there with cvs build from today i mean remove from playlist (the minus symbol) Date: '2006-03-10 14:45:46' From: 'jonathan matthew' created an attachment (id=61038) delay rhythmdb entry-deleted signal until commit this was happening because the entry was being deleted while it still had outstanding changes the deletion signal was emitted immediately (removing the entry from all sources), then the changes were emitted on the next rhythmdb_commit, which re-added the entry to any sources it had been in this patch delays the entry deleted signal until the next rhythmdb_commit, like all other changes all rhythmdb_entry_delete calls except one already had rhythmdb_commit calls immediately afterwards this patch adds the missing commit. Date: '2006-03-11 00:35:15' From: 'james ""doc"" livingston' looks good to me. Date: '2006-03-11 04:01:32' From: 'jonathan matthew' committed, with some small changes to add a reference on entries in the deleted-entries list, and free the list in rhythmdb_commit_internal.","playback skips to the next song but the entry is not visibly removed this leads to a crash when the first entry is played again and attempted to eleminate. i suspect this is a duplicate of bug #131150 which just got fixed today this was happening because the entry was being deleted while it still had outstanding changes the deletion signal was emitted immediately (removing the entry from all sources), then the changes were emitted on the next rhythmdb_commit, which re-added the entry to any sources it had been in this patch delays the entry deleted signal until the next rhythmdb_commit, like all other changes all rhythmdb_entry_delete calls except one already had rhythmdb_commit calls immediately afterwards"
75,"""(597328) Gnome - remove removed gpilotd/gpilotd-conduit-mgmt.h from POTFILES.in"" Date: '2009-10-04 16:50:00' From: 'christian kirbach' intltool-update no longer works because of missing file git master xgettext: ?ffnen der datei ?./../gpilotd/gpilotd-conduit-mgmt.h zum lesen fehlgeschlagen: no such file or directory error: xgettext failed to generate po template file please consult error message above if there is any. Date: '2009-10-04 16:51:02' From: 'christian kirbach' created an attachment (id=144720) remove missing file from potfiles.in Date: '2009-10-04 17:04:56' From: 'christian kirbach' confirming l10n.gnome.org also reports trouble raising prio. Date: '2009-10-18 09:36:03' From: 'christian kirbach' ping this is still valid for me Date: '2009-10-18 20:50:12' From: 'matt davey' thanks for the ping should be fixed now, sorry for the delay.","intltool-update no longer works because of missing file git master error: xgettext failed to generate po template file l10n.gnome.org also reports trouble raising prio. ping this is still valid for me should be fixed now, sorry for the delay."
76,"""(320804) Gnome - removing tracks from list, one of which is playing"" Date: '2005-11-06 13:09:56' From: 'christian kirbach' steps to reproduce: 1. select artist play a song 2. select all tracks, one of which is currently being played 3. right-click and remove from playlist expected results: files removed from playlist, audio ceases how often does this happen? once will try to reproduce stack trace: backtrace was generated from /opt/gnome2/bin/rhythmbox using host libthread_db library /lib/tls/libthread_db.so.1 system-supplied dso at 0xffffe000 has disappeared keeping its symbols [thread debugging using libthread_db enabled] [new thread -1226594080 (lwp 5421)] [new thread -1236833360 (lwp 7972)] [new thread -1236321360 (lwp 5427)] [new thread -1227932752 (lwp 5426)] 0xb78d3201 in __waitpid_nocancel () from /lib/tls/libpthread.so.0 #0 0xb78d3201 in __waitpid_nocancel () from /lib/tls/libpthread.so.0 other information Date: '2005-11-06 13:14:59' From: 'christian kirbach' hmm i cannot trigger this crash on purpose the trace looks fine anyways. Date: '2005-11-16 04:50:14' From: 'james ""doc"" livingston' there have recently been some fixes to stop these query/property model bugs can you reproduce it with cvs from the last day or two? Date: '2005-11-16 15:51:16' From: 'christian kirbach' i haven t been able to reproduce this with 0.9.1cvs from today lets hope it won t come back ;) good work marking this fixed.","expected results: files removed from playlist, audio ceases stack trace: backtrace was generated from /opt/gnome2/bin/rhythmbox using host libthread_db library /lib/tls/libthread_db.so.1 hmm i cannot trigger this crash on purpose the trace looks fine anyways. i haven t been able to reproduce this with 0.9.1cvs from today marking this fixed."
77,"""(354442) Gnome - crash just after in ldap_op_finish"" Date: '2006-09-05 14:38:30' From: 'christian kirbach' comment #7 from ola thoresen (reporter, points: 3) 2006-09-04 21 and the bug buddy backtrace from the same crash as comment #6 memory status: size: 55439360 vsize: 0 resident: 55439360 share: 0 rss: 7901184 rss_rlim: 0 CPU usage: start_time: 1157403439 rtime: 0 utime: 11 stime: 0 cutime:6 cstime: 0 timeout: 5 it_real_value: 0 frequency: 0 backtrace was generated from /usr/libexec/evolution-data-server-1.8 using host libthread_db library ""/lib/libthread_db.so.1"". [thread debugging using libthread_db enabled] [new thread -1208166704 (lwp 3499)] [new thread -1210651760 (lwp 3529)] [new thread -1210381424 (lwp 3500)] 0xb7ff0402 in __kernel_vsyscall () Date: '2006-09-05 17:01:16' From: 'ola thoresen' created an attachment (id=72262) another backtrace hope i have all the needed -debuginfo packages now. Date: '2006-09-05 20:58:31' From: 'christian kirbach' attached trace is as fine as the posted one confirming report altough we have one frame missing Date: '2006-09-29 13:34:45' From: 'devashish sharma' created an attachment (id=73635) patch this patch fixes the issue and will be committed for 2.8.1 Date: '2006-09-29 16:17:49' From: 'devashish sharma' patch committed. Date: '2006-11-03 14:10:39' From: 'ola thoresen' is this the same bug as #274240 i just posted a backtrace there, as i still have issues when searching ldap for addresses. Date: '2006-11-03 14:37:50' From: 'christian kirbach' the backtrace is different, and the original one posted is from a much older evolution version but if you followed precisely the steps described in the other report and could trigger the crash you should leave a comment there telling that. Date: '2006-11-03 14:39:28' From: 'christian kirbach' devashish can we close this one? Date: '2007-09-20 20:06:43' From: 'tobias mueller' note, that bug 449609 and it s dups (and their dups) look related to that issue, although they are a year younger than this bug here.","memory status: size: 55439360 vsize: 0 resident: 55439360 share: 0 rss: 7901184 rss_rlim: 0 CPU usage: start_time: 1157403439 rtime: 0 utime: 11 stime: 0 cutime:6 cstime: 0 timeout: 5 it_real_value: 0 frequency: 0 backtrace was generated from /usr/libexec/evolution-data-server-1.8 hope i have all the needed -debuginfo packages now. the backtrace is different, and the original one posted is from a much older evolution version but if you followed precisely the steps described in the other report and could trigger the crash you should leave a comment there telling that. note, that bug 449609 and it s dups (and their dups) look related to that issue, although they are a year younger than this bug here."
78,"""(351279) Gnome - crash on Rhythmbox Music Player"" Date: '2006-08-14 12:16:06' From: 'christian kirbach' what were you doing when the application crashed invoke rb when gnome-settings-daemon is not running can we consider this a bug distribution: ubuntu 6.06 (dapper) gnome release: 2.15.91 2006-08-10 (jhbuild) bugbuddy version: 2.15.91 memory status: size: 28389376 vsize: 0 resident: 28389376 share: 0 rss: 14921728 rss_rlim: 0 cpu usage: start_time: 1155556072 rtime: 0 utime: 19 stime: 0 cutime:16 cstime: 0 timeout: 3 it_real_value: 0 frequency: 2 backtrace was generated from  /opt/gnome2/bin/rhythmbox using host libthread_db library /lib/tls/i686/cmov/libthread_db.so.1. [thread debugging using libthread_db enabled] [new thread -1228691776 (lwp 5338)] 0xffffe410 in __kernel_vsyscall () Date: '2006-08-14 12:44:36' From: 'james ""doc"" livingston' ah, we weren t checking whether the pixbuf could be loaded before using it now fixed in cvs.","invoke rb when gnome-settings-daemon is not running can we consider this a bug backtrace was generated from  /opt/gnome2/bin/rhythmbox ah, we weren t checking whether the pixbuf could be loaded before using it"
79,"""(80941) Gnome - gimp should use libgimpprint"" Date: '2002-05-06 13:30:48' From: 'sven neumann' instead of shipping a complete but outdated print plug-in, gimp should depend on libgimpprint-4.2 and only ship the plug-in that exports the libgimpprint functionality to the user in case someone wants to build gimp w/o printing support, there should be a --disable-print configure option. Date: '2002-05-06 15:21:35' From: 'sven neumann' i have done the necessary changes in my local 1.2 tree i had to change the gimpprint code slightly so it uses g_malloc and g_free all over the place instead of xmalloc, malloc and free i18n also needed a few tweaks if noone complains, i ll commit this change. Date: '2002-05-06 23:53:47' From: 'robert krawitz' as the gimp-print lead, i strongly encourage this change it will enable compatibility with future 4.2 releases, allowing us to add new printers, improved dither algorithms, etc without rebuilding the gimp if there are changes to the gimp print plugin, please feed them back to the gimp-print project please don t change the libgimpprint core, for obvious reasons Date: '2002-05-07 08:48:04' From: 'sven neumann' the head branch now depends on libgimpprint the plug-in code is based on what was shipped with gimpprint-4.2.1 but ported to gtk+-2.0 (not yet entirely deprecation-free) i ll wait another day or two before doing the change in the stable tree to give people a chance to object. Date: '2002-05-07 11:52:08' From: 'sven neumann' added robert to the cc. Date: '2002-05-08 09:36:26' From: 'sven neumann' committed the change to the stable branch now we need to give the translators some time to update the translations. Date: '2002-12-18 14:12:46' From: 'rapha?l quinet' just so that i don t forget, here is a forward reference to bug #85788. Date: '2003-06-20 16:42:24' From: 'rapha?l quinet' the fix is part of the stable release 1.2.4 closing this bug.","instead of shipping a complete but outdated print plug-in, gimp should depend on libgimpprint-4.2 and only ship the plug-in that exports the libgimpprint functionality to the user in case someone wants to build gimp w/o printing support, there should be a --disable-print configure option. it will enable compatibility with future 4.2 releases, allowing us to add new printers, improved dither algorithms, etc the plug-in code is based on what was shipped with gimpprint-4.2.1 but ported to gtk+-2.0 (not yet entirely deprecation-free) committed the change to the stable branch now we need to give the translators some time to update the translations."
80,"""(83208) Gnome - mail plug-in doesn t respect sendmail configure option"" Date: '2002-05-28 01:09:44' From: 'sven neumann' configure allows to define the sendmail-location and sets the variable mailer accordingly this variable is however never passed to the mail plug-in to make things worse, i fear i recently broke the configure check in the stable tree i have just fixed this problem in the head branch i m opening this bug-report so we don t forget to backport the fixes to 1.2. Date: '2002-07-09 16:38:02' From: 'sven neumann' merged the changes from the head branch. Date: '2003-06-20 16:37:30' From: 'rapha?l quinet' the fix is part of the stable release 1.2.4 closing this bug.","configure allows to define the sendmail-location and sets the variable mailer accordingly this variable is however never passed to the mail plug-in to make things worse, i fear i recently broke the configure check in the stable tree i have just fixed this problem in the head branch merged the changes from the head branch. the fix is part of the stable release 1.2.4"
81,"""(436241) Gnome - POTFILES.skip should allow skipping directories"" Date: '2007-05-06 00:32:01' From: 'sven neumann' in the gimp module we have multiple text domains and maintain multiple po directories in each of these, intltool-update -m detects a long list of files that are missing from potfiles.in we would like to fix this but maintaining the potfiles.skip files would be quite a pain it would make our lifes a lot easier if potfiles.skip could contain directory names and intltool-update would then skip the listed directory entirely that way we could easily exclude plug-ins from the core translation domain and vice versa i am filing this as a bug report instead of an enhancement request because with the makefile.in.in installed by recent versions of intltool, intltool-update -m is run in a distcheck hook this means that i can t run make distcheck until we fix all potfiles.skip files please either remove this hook or make it easier for us to maintain potfiles.skip. Date: '2007-06-05 18:27:31' From: 'andreas r?sdal' the gnome-games module is also annoyed by this bug. Date: '2007-06-06 09:05:42' From: 'abel cheung' no matter whether this problem should be fixed in this way or by any other mean, allowing directory to be skipped could be a good thing to add for intltool. Date: '2008-04-12 19:09:40' From: 'rodney dawes' fixed in svn trunk you can now ignore directories by simply placing the directory name in potfiles.skip for exmaple to ignore the libgimp/ sub-directory, you can simply just place libgimp in po/potfiles.skip. Date: '2008-04-13 17:36:34' From: 'sven neumann' thanks a lot desperately waiting for the next intltool release... Date: '2008-06-06 08:46:24' From: 'sven neumann' we are now using this feature in gimp trunk seems to work nicely with intltool 0.40.0 thanks again for this change it makes maintaining the potfiles.skip files a lot easier.","in the gimp module we have multiple text domains and maintain multiple po directories in each of these, intltool-update -m detects a long list of files that are missing from potfiles.in we would like to fix this but maintaining the potfiles.skip files would be quite a pain it would make our lifes a lot easier if potfiles.skip could contain directory names and intltool-update would then skip the listed directory entirely the gnome-games module is also annoyed by this bug. no matter whether this problem should be fixed in this way or by any other mean, allowing directory to be skipped could be a good thing to add for intltool. you can now ignore directories by simply placing the directory name in potfiles.skip we are now using this feature in gimp trunk seems to work nicely with intltool 0.40.0 it makes maintaining the potfiles.skip files a lot easier."
82,"""(78408) Gnome - no mirrors for United States"" Date: '2002-04-11 16:44:40' From: 'sven neumann' the list of mirrors on http://www.gimp.org/download.html doesn t list any mirrors under the united states heading. Date: '2002-04-11 17:05:27' From: 'rapha?l quinet' for some reason, the script that generates the list of mirrors from defines/mirrors_list.def is forgetting the last line i added a harmless </dl> that should fix the problem. Date: '2002-05-27 13:58:34' From: 'rapha?l quinet' fixed again (updated the old files that were restored after the disk crash). Date: '2004-01-04 11:50:07' From: 'dave neary' changing all www.gimp.org bugs from gimp product to the gimp-web product, including old closed/fixed bugs, and reassigning. Date: '2004-01-04 14:14:14' From: 'dave neary' re-resolving old bugs Date: '2004-01-04 22:51:58' From: 'rapha?l quinet' re-assigning all open and closed bug reports related to ftp mirrors to the ftp mirrors component let s hope that we are done with all these bugzilla changes....","the list of mirrors on http://www.gimp.org/download.html doesn t list any mirrors under the united states heading. for some reason, the script that generates the list of mirrors from defines/mirrors_list.def is forgetting the last line i added a harmless </dl> that should fix the problem. changing all www.gimp.org bugs from gimp product to the gimp-web product, including old closed/fixed bugs, and reassigning. re-resolving old bugs re-assigning all open and closed bug reports related to ftp mirrors to the ftp mirrors component"
83,"""(139024) Gnome - gimptool collides with gimp-1.2"" Date: '2004-04-04 11:11:59' From: 'sven neumann' when gimp is being configured with the --enable-default-binary options (which is on by default since gimp-2.0rc), we create a symlink gimptool pointing to gimptool-2.0 gimp-1.2 contains this symlink also, pointing to gimptool-1.2 the intention was to make gimptool convenient to use for our users there s a problem however which is in the gimp-1.2 tree but since we can t fix it there, we should think about possible workarounds in gimp-2.0 the problem is that gimp.m4, which provides am_path_gimp(), the automake macro to check for gimp-1.2 does not use gimptool-1.2 as it should it checks for the gimptool binary in the path and uses that this means that if people have gimp-2.0 installed, makefiles and configure scripts written to work with gimp-1.2 start to break the gimp-print plug-in is a prominent example if gimp-1.2 and gimp-2.0 are installed and the gimp-print configure script is run, the script detects the presence of gimp-1.2 but uses cflags and libs from gimptool which points to gimp-2.0 probably the only thing we can do about this is to not install the symlink and to document that gimptool-2.0 needs to be used with gimp-2.0 this doesn t fix all the systems that already have gimp-2.0.0 installed since the symlink exists there already. Date: '2004-04-04 11:30:59' From: 'sven neumann' created an attachment (id=26308) don t install the gimptool links Date: '2004-04-04 14:49:47' From: 'sven neumann' i ve fixed the gimp.m4 script in the gimp-1-2 branch we should consider to do a 1.2.6 release as a final release in the 1.2 series 2004-04-04 sven neumann <sven@gimp.org> * gimp.m4 (am_path_gimp): use gimptool-1.2, not gimptool (bug #139024). Date: '2004-04-04 19:24:21' From: 'sven neumann' 2004-04-04 sven neumann <sven@gimp.org> * makefile.am * docs/makefile.am don t install gimptool symlinks to gimptool-2.0 and its manpage gimp.m4 as installed with gimp-1.2 looks for gimptool (bug #139024).","there s a problem however which is in the gimp-1.2 tree but since we can t fix it there, we should think about possible workarounds in gimp-2.0 the problem is that gimp.m4, which provides am_path_gimp(), the automake macro to check for gimp-1.2 does not use gimptool-1.2 as it should this means that if people have gimp-2.0 installed, makefiles and configure scripts written to work with gimp-1.2 start to break if gimp-1.2 and gimp-2.0 are installed and the gimp-print configure script is run, the script detects the presence of gimp-1.2 but uses cflags and libs from gimptool which points to gimp-2.0 probably the only thing we can do about this is to not install the symlink and to document that gimptool-2.0 needs to be used with gimp-2.0 don t install the gimptool links we should consider to do a 1.2.6 release as a final release in the 1.2 series"
84,"""(351283) Gnome - review and localize Script-Fu blurbs"" Date: '2006-08-14 12:26:12' From: 'sven neumann' as explained on the mailing-lists, the short descriptions registered by script-fu scripts should be reviewed and localized before we can enter the string freeze for 2.4. Date: '2006-08-22 09:35:05' From: 'rapha?l quinet' please use milestone + priority==urgent instead of severity==blocker. Date: '2006-10-05 08:12:52' From: 'rapha?l quinet' please consider doing the string review for tiny-fu instead of script-fu. Date: '2006-10-05 13:43:13' From: 'saulgoode' created an attachment (id=74057) patch for blurb changes i have employed the phrase selected region (or alpha) in describing the scripts that, if no selection exists, will operate on the region where the alpha channel is not zero (black) i feel that this behavior is an important distinction and that the user should be made aware of the existence of this feature in the blurb i have chosen to use the word alpha because it is consistent with its usage in the alpha to selection operation there is a contingent of gimp users (mostly youths) who term such objects with transparent backgrounds renders personally, i think using the term render would be confusing, given its well-established meaning in the 3-d modelling field but i do think that the concept of an object defined by the contents of the alpha channel is an important one, regardless of what it is called. Date: '2006-10-05 14:48:32' From: 'saulgoode' created an attachment (id=74061) updated patch this patch fixes a couple of oversights in the previous one i am not sure about what is to be done with the script-fu-select-to-xxxx.scm files because i do not fully understand current menu registration guidelines and where these functions are to appear in menus (and they might be deprecated because of the recent addition of edit->paste to xxxx functionality). Date: '2006-10-05 18:07:46' From: 'sven neumann' the script-fu-select-to-foo scripts are deprecated and do not any longer register a menu entry i have backed out this part of the patch, as well as the change to test-sphere.scm thanks for your help, the change is now in cvs.","as explained on the mailing-lists, the short descriptions registered by script-fu scripts should be reviewed and localized before we can enter the string freeze for 2.4. please use milestone + priority==urgent instead of severity==blocker. please consider doing the string review for tiny-fu instead of script-fu. created an attachment (id=74057) patch for blurb changes i have employed the phrase selected region (or alpha) in describing the scripts that, if no selection exists, will operate on the region where the alpha channel is not zero (black) i have chosen to use the word alpha because it is consistent with its usage in the alpha to selection operation created an attachment (id=74061) updated patch this patch fixes a couple of oversights in the previous one the script-fu-select-to-foo scripts are deprecated and do not any longer register a menu entry i have backed out this part of the patch, as well as the change to test-sphere.scm"
85,"""(696213) Gnome - Sidebar is too narrow by default to fit the word Connect to server "" Date: '2013-03-20 17:40:35' From: 'andreas nilsson' running ostree with a new user i realized that the sidebar is too narrow to fit the entire word. Date: '2013-03-20 17:43:15' From: 'andreas nilsson' created an attachment (id=239393) screenshot of the issue Date: '2013-03-20 17:45:35' From: 'andreas nilsson' seems it needs to be at least 188px to fit the word. Date: '2013-03-22 17:12:57' From: 'cosimo cecchi' created an attachment (id=239564) sidebar: increase default sidebar width so that at least in english locale, entries can fill hte width without ellipsizing -- thanks for the report, i ll push this after freeze. Date: '2013-03-25 17:29:58' From: 'cosimo cecchi' attachment 239564 pushed as 4688bd1 - sidebar: increase default sidebar width","running ostree with a new user i realized that the sidebar is too narrow to fit the entire word. seems it needs to be at least 188px to fit the word. created an attachment (id=239564) sidebar: increase default sidebar width so that at least in english locale, entries can fill hte width without ellipsizing sidebar: increase default sidebar width"
86,"""(590514) Gnome - Add.. color scheme don t honor buttons_have_icons gconf setting"" Date: '2009-08-02 10:03:33' From: 'andreas nilsson' if /desktop/gnome/interface/buttons_have_icons is set to false i still get a icon on the add... button in the font & colors preferences tab this seems to work on the remove button though, so maybe they are implemented differently. Date: '2009-08-02 10:04:13' From: 'andreas nilsson' created an attachment (id=139723) screenshot of preferences window Date: '2009-08-02 10:50:49' From: 'paolo borelli' thanks should be fixed on trunk now.","if /desktop/gnome/interface/buttons_have_icons is set to false i still get a icon on the add... button in the font & colors preferences tab this seems to work on the remove button though, so maybe they are implemented differently. created an attachment (id=139723) screenshot of preferences window should be fixed on trunk now."
87,"""(706011) Gnome - Under OSTree, going to the background settings gives a Segfault"" Date: '2013-08-14 17:32:28' From: 'andreas nilsson' i am not sure if this is a bug in gnome-control-center or ostree, but filing it here first and then it can get reassigned if necessary at least under todays ostree, going to the background panel results in a segfault and crashes the whole thing. Date: '2013-08-18 12:54:24' From: 'andreas nilsson' output when run with --verbose ** (gnome-control-center:15608): debug: enabling debugging (gnome-control-center:15608): background-cc-panel-debug: capturing only a portion of the screen (gnome-control-center:15608): background-cc-panel-debug: trying to capture rectangle 1024x27 (at 0,0) segmentation fault (core dumped) Date: '2013-08-19 02:41:04' From: 'bastien nocera' thanks for taking the time to report this bug without a stack trace from the crash it s very hard to determine what caused it can you get us a stack trace please see http://live.gnome.org/gettingtraces for more information on how to do so thanks in advance! Date: '2013-08-19 12:30:27' From: 'andreas nilsson' program received signal sigsegv, segmentation fault convert_alpha (height=768, width=1024, src_y=<optimized out>, src_x=<optimized out>, src_stride=4096, src_data=0x11d4030 , dest_stride=4096, dest_data=0x7fffd1488010 ) at ../../gdk/gdkpixbuf-drawable.c 162 162 ../../gdk/gdkpixbuf-drawable.c no such file or directory (gdb) bt Date: '2013-08-19 22:57:10' From: 'bastien nocera' i believe this is fixed by this commit in gnome-3-8 and master, please test commit 1097d4ca754ec0a340bc26127808a901e6d78a94 author: bastien nocera <hadess@hadess.net> date: mon aug 19 23:26 2013 +0200 background: fix memory corruption when creating preview when using a single screen, the captured area was too small, and we were copying data from out-of-bounds of the pixbuf area https://bugzilla.gnome.org/show_bug.cgi?id=696166 Date: '2013-08-20 00:03:37' From: 'andreas nilsson' yep, that did the trick closing as fixed.","i am not sure if this is a bug in gnome-control-center or ostree, but filing it here first and then it can get reassigned if necessary at least under todays ostree, going to the background panel results in a segfault and crashes the whole thing. without a stack trace from the crash it s very hard to determine what caused it program received signal sigsegv, segmentation fault convert_alpha (height=768, width=1024, src_y=<optimized out>, src_x=<optimized out>, src_stride=4096, src_data=0x11d4030 , dest_stride=4096, dest_data=0x7fffd1488010 ) at ../../gdk/gdkpixbuf-drawable.c 162 162 ../../gdk/gdkpixbuf-drawable.c i believe this is fixed by this commit in gnome-3-8 and master, please test background: fix memory corruption when creating preview when using a single screen, the captured area was too small, and we were copying data from out-of-bounds of the pixbuf area yep, that did the trick"
88,"""(547411) Gnome - online/offline icons are inconsistent with the rest of the icons"" Date: '2008-08-12 11:12:01' From: 'andreas nilsson' the online/offline icons are done in the old gnome style and doesn t match the rest of the icons in the interface. Date: '2008-08-12 11:14:26' From: 'andreas nilsson' created an attachment (id=116411) new online and offline icons + svg sources Date: '2008-08-12 11:19:52' From: 'baptiste mille-mathias' i raise priority as there is patch and ui freeze is near Date: '2008-08-12 15:27:45' From: 'matthew barnes' these look great i d like to install them as themed icons but i haven t dealt with non-square icons before is it correct to install the pngs into a 32x16 directory? Date: '2008-08-12 16:23:42' From: 'matthew barnes' even mclasen isn t sure, but he thinks gtk should preserve the aspect ratio if we put it in 32x32 i ll try it and see if i can get it to work. Date: '2008-08-12 19:37:24' From: 'michael monreal' i have wondered about where to put them too the answer is probably there is no non-square icon .. andreas, what do you think i think i would just replace the old bitmap with this one for 2.24 and look for a better solution in the next cycle. Date: '2008-08-12 19:47:03' From: 'matthew barnes' created an attachment (id=116449) proposed patch here s a complete patch i put the images into 32x32 and gtk found the icon names alright, but i had to load them by filename to prevent gtk from scaling them down to a 16x16 works though, and looks good! Date: '2008-08-12 20:50:08' From: 'andr klapper' i want this for 2.24, but it may require screenshot updates from our beloved docs team. Date: '2008-08-14 20:38:22' From: 'matthew barnes' committed to trunk (revision 35995).","the online/offline icons are done in the old gnome style and doesn t match the rest of the icons in the interface. created an attachment (id=116411) new online and offline icons + svg sources i raise priority as there is patch and ui freeze is near even mclasen isn t sure, but he thinks gtk should preserve the aspect ratio if we put it in 32x32 i think i would just replace the old bitmap with this one for 2.24 and look for a better solution in the next cycle. here s a complete patch i put the images into 32x32 and gtk found the icon names alright, but i had to load them by filename to prevent gtk from scaling them down to a 16x16 i want this for 2.24, but it may require screenshot updates from our beloved docs team. committed to trunk (revision 35995)."
89,"""(644020) Gnome - Needs a 256x256 size icon"" Date: '2011-03-06 13:39:24' From: 'andreas nilsson' we need a 256x256 variant for various places in gnome shell would be good to have for the os x port as well i guess. Date: '2011-03-06 13:47:43' From: 'andreas nilsson' created an attachment (id=182607) icons in all sizes also included is source svg using the one canvas approach. Date: '2011-03-06 13:59:21' From: 'lapo calamandrei' plese note that the source svg needs to be kept in the repository, no need to ship it with the tomboy source package tho. Date: '2011-03-16 12:07:48' From: 'lapo calamandrei' any progress on this one? Date: '2011-04-08 15:58:25' From: 'lapo calamandrei' created an attachment (id=185534) icons + source svg slightly refesh d version with more contrast and better canvas usage on the 256x256. Date: '2011-04-08 15:58:56' From: 'lapo calamandrei' *** bug 647174 has been marked as a duplicate of this bug *** Date: '2011-11-15 13:43:36' From: 'andreas nilsson' ping? Date: '2011-11-28 00:36:43' From: 'jared jennings' created an attachment (id=202264) adds 256x256 icon support tested with my opensuse 12.1 gnome 3.2 build. Date: '2011-11-28 00:37:02' From: 'jared jennings' hopefully this can be approved quickly (in reply to comment #6) > ping? Date: '2011-11-28 03:22:44' From: 'jared jennings' committed r50006f367b34","we need a 256x256 variant for various places in gnome shell also included is source svg using the one canvas approach. plese note that the source svg needs to be kept in the repository, no need to ship it with the tomboy source package tho. slightly refesh d version with more contrast and better canvas usage on the 256x256. *** bug 647174 has been marked as a duplicate of this bug *** tested with my opensuse 12.1 gnome 3.2 build. committed r50006f367b34"
90,"""(454668) Gnome - splash image appears to be relative to page size"" Date: '2007-07-07 20:50:53' From: 'andreas nilsson' the splash image on http://gnome.jardigrec.eu/en/ seems to be relative in size to the page size this causes problems on bigger screens as the image gets very pixelated. Date: '2007-07-30 08:22:07' From: 'quim gil' ramon just fixed this one. Date: '2007-07-30 09:03:31' From: 'diego escalante urrelo' if you mean the simply beautiful image, may i suggest a special case for lower resolutions i m on 1024x768 and the gnome magic sentence sidebar half eats the splash. Date: '2007-07-30 09:31:17' From: 'quim gil' this is a problem of the image used, not of plone or the homepage template itself andreas or someone should define the size of those splash images (i think someone had defined this but it s not documented) and deliver the real splash we are going to have.","the splash image on http://gnome.jardigrec.eu/en/ seems to be relative in size to the page size this causes problems on bigger screens as the image gets very pixelated. ramon just fixed this one. this is a problem of the image used, not of plone or the homepage template itself andreas or someone should define the size of those splash images (i think someone had defined this but it s not documented) and deliver the real splash we are going to have."
91,"""(551879) Gnome - gnome-panel crashes when clicking launcher on second screen"" Date: '2008-09-11 21:35:53' From: 'andreas moog' steps to reproduce every time i click on a launcher on second screen's applet gnome-panel crashes using nvidia's propietary drivers without xinerama or twinview stack trace other information this bug was reported on launchpad https://bugs.edge.launchpad.net/ubuntu/+source/gnome-panel/+bug/256041 Date: '2008-09-28 11:22:39' From: 'gerd kohlberger' i just ran into the same problem i think the crash happens because the launcher animation window is created with the default (wrong) screen. version: 2.24.0 metacity compositor enabled. backtrace with --sync ----- + trace 207485 Date: '2008-09-28 11:25:16' From: 'gerd kohlberger' created an attachment (id=119520) [details] [review] set screen from launcher this patch fixes the bug for me. Date: '2009-03-24 15:48:58' From: 'ramon.bastiaans' i still experience this issue with gnome 2.26 in ubuntu jausty. i also experienced this issue in ubuntu intrepid in ubuntu hardy there was no problem, so i would assume this bug entered the source somewhere between the hardy and intrepid release. Date: '2009-06-30 10:08:16' From: 'andreas moog' the patch from gerd kohlberger fixes the issue. Date: '2009-07-01 12:15:05' From: 'vincent untz' this problem has been fixed in the development version the fix will be available in the next major software release thank you for your bug report.","every time i click on a launcher on second screen's applet gnome-panel crashes using nvidia's propietary drivers without xinerama or twinview i think the crash happens because the launcher animation window is created with the default (wrong) screen. in ubuntu hardy there was no problem, so i would assume this bug entered the source somewhere between the hardy and intrepid release. the patch from gerd kohlberger fixes the issue."
92,"""(550868) Gnome - seahorse crashed with SIGSEGV in _seahorse_viewer_on_key_delete_gtk_action_activate()"" Date: '2008-09-04 16:22:26' From: 'andreas moog' steps to reproduce 1. open seahorse 2. right-mouse-click a ssh-key and select delete 3. crash stack trace: starting program: /usr/bin/seahorse [thread debugging using libthread_db enabled] [new thread 0xb7048700 (lwp 16727)] ** message: init gpgme version 1.1.6 program received signal sigsegv, segmentation fault the program is running exit anyway(y or n) other information: the bug has also been reported on launchpad https://bugs.edge.launchpad.net/ubuntu/+source/seahorse/+bug/264753 Date: '2008-09-07 15:10:30' From: 'stef walter' this should be fixed with this commit 2008-09-07 stef walter <stef@memberwebs.com> * libseahorse/seahorse-key.c: fill in abstract methods properly on the seahorseobject class: fixes crash. Date: '2008-09-08 20:09:22' From: 'andreas moog' well, the crash does not occur anymore but the key does not get deleted either so its still not the expected behaviour should i open a new bug regarding the deletion issue? Date: '2008-09-13 14:30:15' From: 'stef walter' just fixed related bug #551377 do you think that ll do the trick? Date: '2008-09-13 17:19:40' From: 'andreas moog' i ll try with svn later but looks good thank you. Date: '2008-09-14 18:40:49' From: 'andreas moog' can confirm its fixed thanks again.","2. right-mouse-click a ssh-key and select delete stack trace: starting program: /usr/bin/seahorse [thread debugging using libthread_db enabled] [new thread 0xb7048700 (lwp 16727)] program received signal sigsegv, segmentation fault this should be fixed with this commit but the key does not get deleted either so its still not the expected behaviour just fixed related bug #551377"
93,"""(575904) Gnome - Crash when opening a rhythmbox pls within browser pane"" Date: '2009-03-19 02:22:01' From: 'andreas moog' reported on launchpad: https://bugs.launchpad.net/bugs/288392 steps to reproduce 1. start brasero 2. open new audio-project 3. in the filebrowser, select a pls-file 4. crash. Date: '2009-03-19 02:22:11' From: 'andreas moog' stacktrace(gdb) bt full Date: '2009-03-19 02:23:46' From: 'andreas moog' created an attachment (id=130933) thread apply all backtrace Date: '2009-03-19 02:24:09' From: 'andreas moog' created an attachment (id=130934) info registers Date: '2009-03-21 18:00:57' From: 'luis medinas' i just created a pls file on totem 2.26, build brasero with totem-pl-parser 2.26 support and i can t reproduce this crash how did you created the pls file ? Date: '2009-03-22 00:58:45' From: 'andreas moog' the file was created by rhytmbox i ll attach a sample file which makes it crash. Date: '2009-03-22 01:00:51' From: 'andreas moog' created an attachment (id=131105) sample .pls-file which makes brasero crash. Date: '2009-03-22 18:19:13' From: 'luis medinas' ok now i m able to reproduce the crash using rhythmbox the totem playlists are a bit different from rhythmbox another backtrace Date: '2009-03-25 08:42:39' From: 'luis medinas' just fixed a bug on svn trunk and gnome-2-26 branch (the fix will go to 2.26.1) thanks philippe for the hint 2009-03-25 luis medinas <lmedinas@gnome.org> * src/brasero-io.c (brasero_io_start_playlist_cb), (brasero_io_parse_playlist_get_uris) remove unneeded signal connection and rename callback fixes crash on rhythmbox playlist import see bgo #575904.","thread apply all backtrace i just created a pls file on totem 2.26, build brasero with totem-pl-parser 2.26 support and i can t reproduce this crash i ll attach a sample file which makes it crash. sample .pls-file which makes brasero crash. ok now i m able to reproduce the crash using rhythmbox just fixed a bug on svn trunk and gnome-2-26 branch (the fix will go to 2.26.1) remove unneeded signal connection and rename callback fixes crash on rhythmbox playlist import see bgo #575904."
94,"""(669336) Gnome - Crash when closing seahorse with Show password dialog open"" Date: '2012-02-03 19:22:31' From: 'andreas moog' steps to reproduce 1. open seahorse 3.2 2. doubleclick a saved secret in the keyring 3. close seahorse main window without closing the information window --> crash backtrace Date: '2012-02-03 19:58:25' From: 'andreas moog' stacktrace with version 3.2.2, previously was with version 2.32.0 Date: '2012-03-09 13:59:45' From: 'stef walter' this seems to be fixed in 3.3.x due to refactoring and cleanup of the code please reopen if you can reproduce with a version later than 3.3.5.",2. doubleclick a saved secret in the keyring 3. close seahorse main window without closing the information window --> crash this seems to be fixed in 3.3.x due to refactoring and cleanup of the code please reopen if you can reproduce with a version later than 3.3.5.
95,"""(576531) Gnome - alacarte crashed with IOError in copyItem() (when copying item with / in name)"" Date: '2009-03-24 08:53:32' From: 'andreas moog' steps to reproduce 1. open alacarte 2. try to copy item with / in name 3. crash stack trace: traceback (most recent call last) /home/username/.local/share/applications/mozilla thunderbird mail/news.desktop other information: reported on launchpad http://bugs.launchpad.net/bugs/205463 Date: '2009-03-24 08:54:34' From: 'andreas moog' created an attachment (id=131233) patch correcting the issue the attached patch corrects the issue by replacing the / in the filename with - . Date: '2011-08-22 18:56:31' From: 'olav vitters' the following fix has been pushed 49cf1a2 don t crash when a desktop has a / in the name Date: '2011-08-22 18:56:35' From: 'olav vitters' created an attachment (id=194411) don t crash when a desktop has a / in the name reported by andreas moog Date: '2012-03-05 15:56:46' From: 'vadim rutkovsky' reproduced in 0.13.2-2ubuntu4: created a launcher mail/news copied to another category ioerror: [errno 2] no such file or directory: /home/vadik/.local/share/applications/mail/news.desktop",2. try to copy item with / in name stack trace: traceback (most recent call last) the attached patch corrects the issue by replacing the / in the filename with - . the following fix has been pushed reproduced in 0.13.2-2ubuntu4: created a launcher mail/news copied to another category ioerror: [errno 2] no such file or directory: /home/vadik/.local/share/applications/mail/news.desktop
96,"""(590331) Gnome - Seahorse does not display Passwords -Tab"" Date: '2009-07-30 23:34:52' From: 'andreas moog' reported on launchpad: https://bugs.edge.launchpad.net/bugs/407063 seahorse 2.27.5 is not displaying the password tab and thus i am unable to view or delete network passwords or wireless secrets launching seahorse from the terminal results in the following related errors: $ seahorse ** (seahorse:3910): warning **: dns-sd initialization failed: daemon not running ** message: init gpgme version 1.1.8 ** (seahorse:3910): warning **: could not find widget password-tab for seahorse-key-manager.xml ** (seahorse:3910): critical **: initialize_tab: assertion self->pv->tabs[tabid].widget != null failed problemtype: bug architecture: i386 date: thu jul 30 15:48 2009 distrorelease: ubuntu 9.10 nonfreekernelmodules: wl package: seahorse 2.27.5-0ubuntu1 procenviron: lang=en_us.utf-8 shell=/bin/bash procversionsignature: ubuntu 2.6.31-4.23-generic sourcepackage: seahorse uname: linux 2.6.31-4-generic i686 Date: '2009-08-04 16:00:41' From: 'tom london' see this in fedora rawhide as well: https://bugzilla.redhat.com/show_bug.cgi?id=515263 Date: '2009-08-05 20:05:07' From: 'rodney dawes' reverting http://git.gnome.org/cgit/seahorse/commit/?id=6b7d1de066011d04db35548217f0b64e607abe4b will fix this problem, it seems looks like the moving the passwords tab didn t quite fully happen, and instead it sort of got removed Date: '2009-08-06 01:39:31' From: 'stef walter' sorry, this is my bad this happened during the migration to gtkbuilder.. the commit above happened shortly after the migration. Date: '2009-08-06 01:50:03' From: 'stef walter' commit 4a1bfa6a3d399d93a9b0dc7b1ab45977ef859e80 author: stef walter <stef@memberwebs.com> date: thu aug 6 01:04 2009 +0000 fix problem with missing password tab fixes bug #590331 Date: '2009-08-06 02:38:38' From: 'c de-avillez' tested and confirmed resolved thanks, stef.","seahorse 2.27.5 is not displaying the password tab and thus i am unable to view or delete network passwords or wireless secrets launching seahorse from the terminal results in the following related errors: $ seahorse ** (seahorse:3910): critical **: initialize_tab: assertion self->pv->tabs[tabid].widget != null failed see this in fedora rawhide as well: https://bugzilla.redhat.com/show_bug.cgi?id=515263 looks like the moving the passwords tab didn t quite fully happen, and instead it sort of got removed this happened during the migration to gtkbuilder.. the commit above happened shortly after the migration. commit 4a1bfa6a3d399d93a9b0dc7b1ab45977ef859e80 tested and confirmed resolved"
